/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/Versions","sap/ui/fl/Utils"],function(F,V,U){"use strict";var a={};a.isDraftAvailable=function(p){return a.getVersions(p).then(function(v){var d=v.find(function(o){return o.versionNumber===0;});return!!d;});};a.getVersions=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}var A=U.getAppComponentForControl(p.selector);var r=U.getComponentClassName(A);if(!r){return Promise.reject("The application ID could not be determined");}return V.getVersions({reference:U.normalizeReference(r),layer:p.layer});};a.loadDraftForApplication=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}var A=U.getAppComponentForControl(p.selector);var r=U.getComponentClassName(A);if(!r){return Promise.reject("The application ID could not be determined");}return F.clearAndInitialize({componentId:A.getId(),reference:r,draftLayer:p.layer});};a.activateDraft=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}if(!p.title){return Promise.reject("No version title was provided");}var A=U.getAppComponentForControl(p.selector);var r=U.getComponentClassName(A);if(!r){return Promise.reject("The application ID could not be determined");}return V.activateDraft({reference:U.normalizeReference(r),layer:p.layer,title:p.title});};a.discardDraft=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}var A=U.getAppComponentForControl(p.selector);var r=U.getComponentClassName(A);if(!r){return Promise.reject("The application ID could not be determined");}return V.discardDraft({reference:U.normalizeReference(r),layer:p.layer,appComponent:A,updateState:p.updateState});};return a;});
