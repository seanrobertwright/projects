/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/rta/plugin/iframe/URLBuilderDialogController"],function(L,M,F,J,R,U){"use strict";var _=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var a={dialogTitle:_.getText("IFRAME_URLBUILDER_DIALOG_TITLE"),previewUrlLabel:_.getText("IFRAME_URLBUILDER_DIALOG_PREVIEW_URL_LABEL"),previewUrlMessage:_.getText("IFRAME_URLBUILDER_DIALOG_BUTTON_PREVIEW_MESSAGE"),showPreviewButton:_.getText("IFRAME_URLBUILDER_DIALOG_BUTTON_SHOW_PREVIEW"),editUrlLabel:_.getText("IFRAME_URLBUILDER_DIALOG_EDIT_URL_LABEL"),parametersLabel:_.getText("IFRAME_URLBUILDER_DIALOG_PARAMETERS_LABEL"),columnParameterLabel:_.getText("IFRAME_URLBUILDER_DIALOG_TABLE_PARAMETER_LABEL"),columnUiValueLabel:_.getText("IFRAME_URLBUILDER_DIALOG_TABLE_UI_VALUE_LABEL"),saveText:_.getText("IFRAME_URLBUILDER_DIALOG_BUTTON_SAVE"),cancelText:_.getText("IFRAME_URLBUILDER_DIALOG_BUTTON_CANCEL")};function b(){return new J({text:a,previewUrl:{value:""},parameters:{value:[]},editURL:{value:""}});}var c=M.extend("sap.ui.rta.plugin.iframe.URLBuilderDialog",{metadata:{library:"sap.ui.rta",events:{opened:{},closed:{}}}});c.prototype.open=function(p){return new Promise(function(r){this._fnResolve=r;this._createDialog(p);}.bind(this));};c.prototype._createDialog=function(p){this._oJSONModel=b();this._oController=new U(this._oJSONModel,p);F.load({name:"sap.ui.rta.plugin.iframe.URLBuilderDialog",controller:this._oController}).then(function(u){this._oDialog=u;this._oDialog.addStyleClass(R.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel);this._openDialog();}.bind(this)).catch(function(e){L.error("Error loading fragment sap.ui.rta.plugin.iframe.URLBuilderDialog: ",e);});};c.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this.fireOpened();}.bind(this));this._oDialog.attachAfterClose(function(){var u=this._oController.getURL();this._oDialog.destroy();this._oDialog=null;this._fnResolve(u);this._oController=null;this.fireClosed({url:u});}.bind(this));this._oDialog.open();};return c;});
