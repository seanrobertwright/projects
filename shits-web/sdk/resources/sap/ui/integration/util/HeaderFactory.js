/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/f/library","sap/ui/base/Object","sap/f/cards/BindingHelper","sap/f/cards/NumericHeader","sap/f/cards/Header","sap/f/cards/NumericSideIndicator","sap/f/cards/IconFormatter","sap/base/strings/formatMessage","sap/ui/integration/controls/ActionsToolbar","./CardActions"],function(q,l,B,a,N,H,b,I,f,A,C){"use strict";var c=l.cards.AreaType;function d(F,h){if(F.parts&&F.translationKey&&F.parts.length===2){var o={parts:[F.translationKey,F.parts[0].toString(),F.parts[1].toString()],formatter:function(t,p,P){var s=p||F.parts[0];var g=P||F.parts[1];if(Array.isArray(p)){s=p.length;}if(Array.isArray(P)){g=P.length;}var i=parseFloat(s)||0;var j=parseFloat(g)||0;return f(t,[i,j]);}};h.bindProperty("statusText",o);}}var e=B.extend("sap.ui.integration.util.HeaderFactory",{metadata:{library:"sap.ui.integration"},constructor:function(o){B.call(this);this._oCard=o;}});e.prototype.create=function(m){if(!m){return null;}var h,o=this._oCard,s=o._oServiceManager,D=o._oDataProviderFactory,g=o._sAppId,i=new C({card:o,areaType:c.Header}),S={title:m.title,subtitle:m.subTitle},j;if(m.status&&typeof m.status.text==="string"){S.statusText=m.status.text;}switch(m.type){case"Numeric":q.extend(S,{unitOfMeasurement:m.unitOfMeasurement,details:m.details,sideIndicators:m.sideIndicators});if(m.mainIndicator){S.number=m.mainIndicator.number;S.scale=m.mainIndicator.unit;S.trend=m.mainIndicator.trend;S.state=m.mainIndicator.state;}S=a.createBindingInfos(S);if(m.sideIndicators){S.sideIndicators=S.sideIndicators.map(function(k){return new b(k);});}h=new N(S);break;default:if(m.icon){S.iconSrc=m.icon.src;S.iconDisplayShape=m.icon.shape;S.iconInitials=m.icon.text;}S=a.createBindingInfos(S);if(S.iconSrc){S.iconSrc=a.formattedProperty(S.iconSrc,function(v){return I.formatSrc(v,g);});}h=new H(S);break;}if(m.status&&m.status.text&&m.status.text.format){if(m.status.text.format.translationKey){o._loadDefaultTranslations();}d(m.status.text.format,h);}h._sAppId=g;h.setServiceManager(s);h.setDataProviderFactory(D);h._setData(m.data);h._setAccessibilityAttributes(m);i.attach(m,h);h._oActions=i;j=this._createActionsToolbar();if(j){h.setToolbar(j);}return h;};e.prototype._createActionsToolbar=function(){var o=this._oCard,h=o.getHostInstance(),g,i;if(!h){return null;}g=new A();i=g.initializeContent(h,o);if(i){return g;}return null;};return e;});
