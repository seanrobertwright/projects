<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Support Assistant API</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="The Support Assistant can also run in silent mode and accept calls through its API. This way it can be integrated in more complex automated scenarios."><meta name="description" content="The Support Assistant can also run in silent mode and accept calls through its API. This way it can be integrated in more complex automated scenarios."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"473201b547734e0eb66612df5bae8553.html","previousTopicHref":"cfabbd4dfc054936997d9d00916e1668.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }
$('.collapsible').collapsify({"expandText":"Display Content","collapseText":"Hide Content","codeblockText":"Code Sample","codeblockCopyText":"Copy code to clipboard","codeblockSelectText":"Select code for copying to clipboard"});


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loioa34eb58aaf124f538a3ead23a6cab04a"><h1 class="title topictitle1" hidden>Support Assistant API</h1><div class="body conbody"><p class="shortdesc" hidden>The Support Assistant can also run in silent mode and accept calls through its API. This
way it can be integrated in more complex automated scenarios.</p>
<div class="section collapsible expanded" id="loioa34eb58aaf124f538a3ead23a6cab04a__section_fzf_d3y_zy"><section class="section collapsible expanded" type="General Information"><h2 class="section_title" style="font-size: 1.15em;">General Information</h2>

<div class="p">The Support Assistant is currently separated into two main parts:<ul class="ul" id="loioa34eb58aaf124f538a3ead23a6cab04a__ul_rfd_h3y_zy">
<li class="li">
<p class="p">Core plug-in in <span class="ph"><span class="ph pname">OpenUI5</span></span></p>
</li>
<li class="li">
<p class="p">UI client running in an iFrame or separate window, or programmable
clients via an API</p>
</li>
</ul></div>
<p class="p">In the following diagram you can see how the Support Assistant is connected to the
individual application layers. </p>
<div class="p">
<div class="fig fignone" id="loioa34eb58aaf124f538a3ead23a6cab04a__fig_y25_ws5_41b"><div class="figbody">

<img class="inline" id="loioa34eb58aaf124f538a3ead23a6cab04a__image_q5q_svz_n1b" src="loiofad73ed570df460bbbc5b828c3fe4e15_LowRes.png">
</div><span class="figcap">Support Assistant Architecture</span></div>
</div>
<div class="p">There are two different use cases for its integration: <ul class="ul" id="loioa34eb58aaf124f538a3ead23a6cab04a__ul_dhz_m3y_zy">
<li class="li">
<p class="p">Using browser window messaging protocol for agents in other window
frames;</p>
</li>
<li class="li">
<p class="p">Using the <samp class="ph codeph">sap.ui.support.RuleAnalyzer</samp> module (for example, from the
console or as part of OPA tests).</p>
</li>
</ul>We will take a closer look into these use cases in the following sections.</div>
</section></div>
<div class="section collapsible expanded" id="loioa34eb58aaf124f538a3ead23a6cab04a__section_n33_bky_zy"><section class="section collapsible expanded" type="Window Messaging API"><h2 class="section_title" style="font-size: 1.15em;">Window Messaging API</h2>

<p class="p">The window messaging API is an asynchronous API based on the browser low-level
<samp class="ph codeph">postMessage</samp>/<samp class="ph codeph">onMessage</samp> APIs. It is enabled by
using a custom generic communication bus component -
<samp class="ph codeph">WindowCommunicationBus</samp>, delivered with the Support Assistant.
The <samp class="ph codeph">WindowCommunicationBus</samp> is used for implementing the remote UI
interaction between the Support Assistant and the application
<samp class="ph codeph">iFrame</samp>. </p>
</section></div>
<div class="section collapsible expanded" id="loioa34eb58aaf124f538a3ead23a6cab04a__section_cgr_r3y_zy"><section class="section collapsible expanded" type="Programming API"><h2 class="section_title" style="font-size: 1.15em;">Programming API</h2><p class="p">This section illustrates how to use the Support Assistant programming
API through specific <span class="ph emphasis emphasis"><samp class="ph codeph">sap.ui.support.RuleAnalyzer</samp> API
examples</span>.</p><div class="sectiondiv subsection collapsible expanded">
<p class="p subsectiontitle">Add a Temporary Rule</p>
<p class="p">After the Support Assistant has been started, if in silent mode, you can add a
new temporary rule by using the <samp class="ph codeph">addRule</samp> method. Then you can
run an analysis with this rule.</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {
         var oRule = {
            id: &quot;Temp rule id&quot;,
            title: &quot;Temp rule title&quot;,
            ...
         };
         RuleAnalyzer.addRule(oRule);
});</pre>
<p class="p">For more information about rule properties, see <a class="xref" href="../../#/topic/eaeea19a991d46f29e6d8d8827317d0e.html" title="There are some general guidelines for writing succinct and meaningful rules to ensure high quality, consistency and better usability of the reported issues." target="_top">Guidelines and Best Practices</a>.</p>
</div><div class="sectiondiv subsection collapsible expanded">
<p class="p subsectiontitle">Run the Analysis</p>
<p class="p">The Support Assistant API allows you to:</p>
<ul class="ul" id="loioa34eb58aaf124f538a3ead23a6cab04a__ul_ifv_ll4_1fb">
<li class="li">
<p class="p">Run a complete analysis on all components and rules. This analysis
returns all issues.</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

   RuleAnalyzer.analyze().then(function() {
      var oHistory = RuleAnalyzer.getLastAnalysisHistory();
      ...
   });
});</pre>
</li>
<li class="li">
<p class="p">Run a complete analysis, using custom metadata. The analysis history will contain this metadata.</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {
	
var oMetadata = {
	&#x2026;
};
	
   RuleAnalyzer.analyze(null, null, oMetadata).then(function() {
      var oHistory = RuleAnalyzer.getLastAnalysisHistory();
      ...
   });
});</pre>
</li>
<li class="li">
<p class="p">Narrow down the analysis to a specific part of the app, for example only
a sub-tree.</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

         var oExecutionScope = {
            type: &quot;subtree&quot;,
            parentId: &quot;panelId&quot;
         };

         RuleAnalyzer.analyze(oExecutionScope).then(function() {
            var oHistory = RuleAnalyzer.getLastAnalysisHistory();
         ...
         });
});</pre>
<p class="p"> For more information, see <a class="xref" href="../../#/topic/e15067d976f24b11907f4c262bd749a0.html" title="OpenUI5 apps consist of multiple views, components and fragments. If you run the rules on the complete app with all loaded elements and components, you may not get the desired results. Therefore, the Support Assistant allows you to change the scope of an analysis run and thus narrow down your result set. This helps you focus on specific issues, components or controls within your app." target="_top">Execution Scope</a>.</p>
</li>
<li class="li">
<div class="p">Check for issues using specific
rules.<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

         var oExecutionScope = {
            type: &quot;subtree&quot;,
            parentId: &quot;panelId&quot;
         };

         var aRules = [{
            ruleId: &quot;inputNeedsLabel&quot;,
            libName: &quot;sap.m&quot;
         }];

         RuleAnalyzer.analyze(oExecutionScope, aRules).then(function() {
            var oHistory = RuleAnalyzer.getLastAnalysisHistory();
         ...
         });
      });</pre></div>
</li>
<li class="li">
<p class="p">Check for specific rules using rule presets.</p>
<p class="p">The rule presets are semantically grouped rules which can be custom or system defined. They
can be imported and exported as <span class="ph filepath">JSON</span> files. For
more information, see <a class="xref" href="../../#/topic/3fc864acf926406194744375aa464fe7.html" title="The user interface of the Support Assistant lets you choose which rules you can load for a library. It also allows you to organize your Rules view according to your preference and to import and export predefined rule selections." target="_top">Rules Management</a>.</p>
<ul class="ul" id="loioa34eb58aaf124f538a3ead23a6cab04a__ul_mxc_hns_gfb">
<li class="li">
<p class="p">Here is an example of running an analysis by using a
<span class="ph emphasis emphasis">custom preset</span>:</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

         var oExecutionScope = {
            type: &quot;subtree&quot;,
            parentId: &quot;panelId&quot;
         };

         var oCustomPreset = {
            id: &quot;CustomPreset&quot;,
            title: &quot;Custom&quot;,
            description: &quot;Custom rules&quot;,
            selections: [{
               ruleId: &quot;inputNeedsLabel&quot;,
               libName: &quot;sap.m&quot;
            }]
         };

         RuleAnalyzer.analyze(oExecutionScope, oCustomPreset).then(function() {
            var oHistory = RuleAnalyzer.getLastAnalysisHistory();
         ...
         });
      });</pre>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">You can get the preset definition from an available <span class="ph filepath">JSON</span> file and
pass it as a second parameter of the
<samp class="ph codeph">analyze</samp> function instead of defining it
in your code.</p></aside>
</li>
<li class="li">
<p class="p">Here is an example of running an analysis by using a
<span class="ph emphasis emphasis">system preset</span>:</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

         var oExecutionScope = {
            type: &quot;subtree&quot;,
            parentId: &quot;panelId&quot;
         };


         RuleAnalyzer.analyze(oExecutionScope, &quot;Accessibility&quot;).then(function() {
            var oHistory = RuleAnalyzer.getLastAnalysisHistory();
         ...
         });
      });</pre>
</li>
<li class="li">
<p class="p">Here is an example of running an analysis with system preset by accessing it through the
<span class="ph emphasis emphasis"><samp class="ph codeph">sap.ui.support.SystemPresets</samp></span>
enumeration:</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/support/RuleAnalyzer&quot;],
      function (RuleAnalyzer) {

         var oExecutionScope = {
            type: &quot;global&quot;
         };

         RuleAnalyzer.analyze(oExecutionScope, sap.ui.support.SystemPresets.Accessibility).then(function() {
            var oHistory = RuleAnalyzer.getLastAnalysisHistory();
         ...
         });
      });</pre>
</li>
</ul>
</li>
</ul>
</div><div class="sectiondiv subsection collapsible expanded">
<p class="p subsectiontitle">View the Results</p>
<ul class="ul" id="loioa34eb58aaf124f538a3ead23a6cab04a__ul_uvy_vg2_j1b">
<li class="li">
<p class="p"><samp class="ph codeph">RuleAnalyzer.getAnalysisHistory()</samp> - Returns all the
analysis history objects.</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">RuleAnalyzer.getLastAnalysisHistory()</samp> - Returns the last
analysis history.</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">RuleAnalyzer.getFormattedAnalysisHistory(sap.ui.support.HistoryFormats)</samp>
- Returns the history in the format that has been passed. The default
format is string.</p>
</li>
</ul>
</div></section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/cfabbd4dfc054936997d9d00916e1668.html" title="The Support Assistant can be used as part of an existing OPA test to cover more test aspects of the application." target="_top">Integrating the Rules in OPA Tests</a></div><div><a class="link" href="../../#/api/sap.ui.support" target="_top" alt="#/api/sap.ui.support" title="#/api/sap.ui.support">API Reference: <samp class="ph codeph">sap.ui.support</samp></a></div><div><a class="link" href="../../#/api/sap.ui.support.RuleAnalyzer" target="_top" alt="#/api/sap.ui.support.RuleAnalyzer" title="#/api/sap.ui.support.RuleAnalyzer">API Reference: <samp class="ph codeph">sap.ui.support.RuleAnalyzer</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>