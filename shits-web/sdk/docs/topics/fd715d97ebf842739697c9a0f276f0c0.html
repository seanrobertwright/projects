<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Additional Annotation Files</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="The OData V4 model supports loading of additional annotation files."><meta name="description" content="The OData V4 model supports loading of additional annotation files."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"c9723f8265f644af91c0ed941e114d46.html","previousTopicHref":"abd4d7c7548d4c29ab8364d3904a6d74.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loiofd715d97ebf842739697c9a0f276f0c0"><h1 class="title topictitle1" hidden>Additional Annotation Files</h1><div class="body conbody"><p class="shortdesc" hidden>The OData V4 model supports loading of additional annotation files.</p>
<p class="p">The annotation files have to be given during creation of an <samp class="ph codeph">ODataModel</samp>
instance. Adding annotation files at a later point in time is <span class="ph emphasis emphasis">not</span>
supported.</p>
<p class="p">The format of the annotation file has to be the same as the metadata file of the service.
Only XML files are supported. You can specify the annotation files in the descriptor for
applications, components, and libraries (<samp class="ph codeph">manifest.json</samp>).</p>
<p class="p">Annotation files are specified in <samp class="ph codeph">manifest.json</samp> as follows:</p>
<pre class="pre codeblock prettyprint lang-js">
&quot;dataSources&quot; : {
    &quot;default&quot; : {
        &quot;uri&quot; : &quot;/sap/opu/odata4/IWBEP/V4_SAMPLE/default/IWBEP/V4_GW_SAMPLE_BASIC/0001/&quot;,
        &quot;type&quot; : &quot;OData&quot;,
        &quot;settings&quot; : {
            &quot;annotations&quot;: [&quot;localAnnotations&quot;],
            &quot;odataVersion&quot; : &quot;4.0&quot;
        }
    },
    &quot;localAnnotations&quot;: {
        &quot;uri&quot;: &quot;data/annotations.xml&quot;,
        &quot;type&quot;: &quot;ODataAnnotation&quot;
    }
},</pre>
<p class="p">Annotation files are usually defined as data sources in <samp class="ph codeph">manifest.json</samp>. In the
example above, the annotation file is located relative to the component. In the
<samp class="ph codeph">dataSource</samp> definition of the OData service, you can reference these
annotation data sources in the <samp class="ph codeph">annotations</samp> setting. The content of the
annotation files are then merged into the service metadata in the given order (the last
one wins). Every (target, term, qualifier)-tuple must appear at most once within
<samp class="ph codeph">$metadata</samp> documents, but can be overwritten by annotation
files.</p>
<p class="p">Annotation terms are not merged, but replaced as a whole (&#x201C;PUT&#x201D; semantics). For example,
if you have defined the sort restriction annotation
<samp class="ph codeph">Org.OData.Capabilities.V1.SortRestrictions</samp> at the
<samp class="ph codeph">BusinessPartnerSet</samp> as shown in the example below, you have to
repeat the term in your annotation file if you want to add, for example, the additional
property <samp class="ph codeph">AscendingOnlyProperties</samp>.</p>
<p class="p">The annotation term is specified in the service metadata document:</p>
<pre class="pre codeblock prettyprint lang-js">
&lt;Annotations Target=&quot;GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/BusinessPartnerSet&quot;&gt;
    &lt;Annotation Term=&quot;Org.OData.Capabilities.V1.SortRestrictions&quot;&gt;
        &lt;Record&gt;
            &lt;PropertyValue Property=&quot;NonSortableProperties&quot;&gt;
                &lt;Collection&gt;
                    &lt;PropertyPath&gt;BusinessPartnerID&lt;/PropertyPath&gt;
                &lt;/Collection&gt;
            &lt;/PropertyValue&gt;
        &lt;/Record&gt;
    &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre>
<p class="p">If an additional property needs to be added, the term has to be repeated in the annotation
file:</p>
<pre class="pre codeblock prettyprint lang-js">
&lt;Annotations Target=&quot;GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/BusinessPartnerSet&quot;&gt;
    &lt;Annotation Term=&quot;Org.OData.Capabilities.V1.SortRestrictions&quot;&gt;
        &lt;Record&gt;
            &lt;PropertyValue Property=&quot;AscendingOnlyProperties&quot;&gt;
                &lt;Collection&gt;
                    &lt;PropertyPath&gt;AnyPropertyPath&lt;/PropertyPath&gt;
                &lt;/Collection&gt;
            &lt;/PropertyValue&gt;
            &lt;PropertyValue Property=&quot;NonSortableProperties&quot;&gt;
                &lt;Collection&gt;
                    &lt;PropertyPath&gt;BusinessPartnerID&lt;/PropertyPath&gt;
                &lt;/Collection&gt;
            &lt;/PropertyValue&gt;
        &lt;/Record&gt;
    &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>