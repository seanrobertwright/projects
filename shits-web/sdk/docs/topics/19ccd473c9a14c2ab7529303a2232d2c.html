<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 13: Testing User Interaction</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step we want to write a test that simulates user interaction with an icon tab bar. We want to change the tab and check if the correct content is shown."><meta name="description" content="In this step we want to write a test that simulates user interaction with an icon tab bar. We want to change the tab and check if the correct content is shown."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"6e9c6bd2054c4425b7f15cac31aa675c.html","previousTopicHref":"0c270b45dd904429ba634656e3a37a73.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/0c270b45dd904429ba634656e3a37a73.html" title="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial." target="_top">Step 12: Adding a Search</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/6e9c6bd2054c4425b7f15cac31aa675c.html" title="We want to display statistics for posts, for example, how many times it was viewed. To achieve this, we implement an icon tab bar with an Info tab and a Statistics tab. The existing content should be placed on the Info tab and the view count on the Statistics tab." target="_top">Step 14: Adding Tabs</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio19ccd473c9a14c2ab7529303a2232d2c"><h1 class="title topictitle1" hidden>Step 13: Testing User Interaction</h1><div class="body conbody"><p class="shortdesc" hidden>In this step we want to write a test that simulates user interaction with an icon tab bar. We want to change the tab and check if the correct
content is shown.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio19ccd473c9a14c2ab7529303a2232d2c__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio19ccd473c9a14c2ab7529303a2232d2c__image_shw_2md_jt" src="loioc76a7b50ffac42b29285d7f10fd605eb_LowRes.png">
</div><span class="figcap">Test interacting with an icon tab bar</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo Kit <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.testing.13/preview" target="_top" alt="#/sample/sap.m.tutorial.testing.13/preview" title="#/sample/sap.m.tutorial.testing.13/preview">Testing - Step 13</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="test/integration/journeys/PostJourney.js"><h2 class="section_title" style="font-size: 1.15em;">test/integration/journeys/PostJourney.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/test/opaQunit&quot;,
	&quot;./pages/Worklist&quot;,
	&quot;./pages/Browser&quot;,
	&quot;./pages/Post&quot;
], function (opaTest) {
	&quot;use strict&quot;;
	&#x2026;
	opaTest(&#x2026;) {
		// Actions
			When.onTheBrowser.iPressOnTheForwardButton();
			
			// Assertions
			Then.onThePostPage.theTitleShouldDisplayTheName(&quot;Jeans&quot;)<span class="ph emphasis emphasis">;
		});
		opaTest(&quot;Should select the statistics tab&quot;, function (Given, When, Then) {
			// Actions
			When.onThePostPage.iPressOnTheTabWithTheKey(&quot;statistics&quot;);
			// Assertions
			Then.onThePostPage.iShouldSeeTheViewCounter()
				.and.iTeardownMyApp();
		});</span></pre>
<p class="p">We extend the <span class="ph filepath">PostJourney.js</span> file with a new test. It is important to move the <samp class="ph codeph">Teardown</samp> to the last test,
otherwise our app would be removed and the test would not be able to find the <span class="ph uicontrol">Statistics</span> tab. </p>
<p class="p">Delete <samp class="ph codeph">.and.iTeardownMyApp();</samp> from the last test in the file and add the new test case</p>
</section></div>
<div class="section"><section class="section" type="test/integration/pages/Post.js"><h2 class="section_title" style="font-size: 1.15em;">test/integration/pages/Post.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&apos;sap/ui/test/Opa5&apos;,
	&apos;sap/ui/test/matchers/Properties&apos;,
	&apos;sap/ui/test/actions/Press&apos;
], function (Opa5, Properties, Press) {
	&quot;use strict&quot;;
 
		var sViewName = &quot;Post&quot;;
 
		Opa5.createPageObjects({
			onThePostPage: {
				actions: {
					iPressTheBackButton: function () {
						return this.waitFor({
							id: &quot;page&quot;,
							viewName: sViewName,
							actions: new Press(),
							errorMessage: &quot;Did not find the nav button on object page&quot;
						});
					}<span class="ph emphasis emphasis">,
					iPressOnTheTabWithTheKey: function (sKey) {
						return this.waitFor({
							controlType: &quot;sap.m.IconTabFilter&quot;,
							viewName : sViewName,
							matchers: new Properties({
								key: sKey
							}),
							actions: new Press(),
							errorMessage: &quot;Cannot find the icon tab bar&quot;
						});
 
					}</span>
				},
				assertions: {
					theTitleShouldDisplayTheName: function (sName) {
						return this.waitFor({
							id: &quot;objectHeader&quot;,
							viewName: sViewName,
							matchers: new Properties({
								title: sName
							}),
							success: function (oPage) {
								Opa5.assert.ok(true, &quot;was on the remembered detail page&quot;);
							},
							errorMessage: &quot;The Post &quot; + sName + &quot; is not shown&quot;
						});
					}<span class="ph emphasis emphasis">,
 
					iShouldSeeTheViewCounter: function () {
						return this.waitFor({
							id: &quot;viewCounter&quot;,
							viewName: sViewName,
							success: function () {
								Opa5.assert.ok(true, &quot;The view counter was visible&quot;);
							},
							errorMessage: &quot;The view counter could not be found&quot;
						});
					}
</span>
				}
			}
		});
	});</pre>
<p class="p">To change the selected tab, you set the selected key of the <samp class="ph codeph">sap.m.IconTabBar</samp>. We have looked up the
<samp class="ph codeph">setSelectedKey</samp> function in the API documentation of the control, so we know that we can write a <samp class="ph codeph">waitFor</samp>
statement that makes use of it.</p>
<p class="p">There is no uniform way of triggering user interactions with OPA. In most cases it is sufficient to use the API of the controls, e.g. setting a
value. Note however, that calling the API methods of a control might not trigger the same events as when pressing the control.</p>
<p class="p">In the <samp class="ph codeph">assert</samp> part we add a new assertion for checking the visibility of a control with the ID <samp class="ph codeph">viewCounter</samp>.
Each <samp class="ph codeph">waitFor</samp> statement checks if the control is rendered and visible unless you set <samp class="ph codeph">visible: false</samp>. Therefore,
we only use the <samp class="ph codeph">ok(true)</samp> assertion in the success handler of the <samp class="ph codeph">waitFor</samp> statement since QUnit expects at
least one assertion for a test.</p>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;"> Conventions</h2>

<ul class="ul" id="loio19ccd473c9a14c2ab7529303a2232d2c__ul_nh5_ybb_nr">
<li class="li">
<p class="p">Actions in OPA never contain a QUnit assertion</p>
</li>
</ul>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/0c270b45dd904429ba634656e3a37a73.html" title="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial." target="_top">Step 12: Adding a Search</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/6e9c6bd2054c4425b7f15cac31aa675c.html" title="We want to display statistics for posts, for example, how many times it was viewed. To achieve this, we implement an icon tab bar with an Info tab and a Statistics tab. The existing content should be placed on the Info tab and the view count on the Statistics tab." target="_top">Step 14: Adding Tabs</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.m.IconTabBar" target="_top" alt="#/api/sap.m.IconTabBar" title="#/api/sap.m.IconTabBar">API Reference: <samp class="ph codeph">sap.m.IconTabBar</samp></a></div><div><a class="link" href="../../#/entity/sap.m.IconTabBar" target="_top" alt="#/entity/sap.m.IconTabBar" title="#/entity/sap.m.IconTabBar">API Overview and Samples: <samp class="ph codeph">sap.m.IconTabBar</samp>
</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>