<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 24: Filtering</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we add a search field for our product list and define a filter that represents the search term. When searching, the list is automatically updated to show only the items that match the search term."><meta name="description" content="In this step, we add a search field for our product list and define a filter that represents the search term. When searching, the list is automatically updated to show only the items that match the search term."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"c4b2a32bb72f483faa173e890e48d812.html","previousTopicHref":"0f8626ed7b7542ffaa44601828db20de.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/0f8626ed7b7542ffaa44601828db20de.html" title="If we want to do a more complex logic for formatting properties of our data model, we can also write a custom formatting function. We will now add a localized status with a custom formatter, because the status in our data model is in a rather technical format." target="_top">Step 23: Custom Formatters</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/c4b2a32bb72f483faa173e890e48d812.html" title="To make our list of invoices even more user-friendly, we sort it alphabetically instead of just showing the order from the data model. Additionally, we introduce groups and add the company that ships the products so that the data is easier to consume." target="_top">Step 25: Sorting and Grouping</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio5295470d7eee46c1898ee46c1b9ad763"><h1 class="title topictitle1" hidden>Step 24: Filtering</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we add a search field for our product list and define a filter that
represents the search term. When searching, the list is automatically updated to show only
the items that match the search term.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio5295470d7eee46c1898ee46c1b9ad763__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio5295470d7eee46c1898ee46c1b9ad763__image_tzj_zf2_yr" src="loiob59b3ed9928549d4bf7e4d0f9f5b5dc8_HiRes.png">
</div><span class="figcap">A search field is displayed above the list</span></div>
</section></div>
<div class="section" id="loio5295470d7eee46c1898ee46c1b9ad763__section_qx5_wch_ycb"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.walkthrough.24/preview" target="_top" alt="#/sample/sap.m.tutorial.walkthrough.24/preview" title="#/sample/sap.m.tutorial.walkthrough.24/preview">Walkthrough - Step 24</a></span>.</p>
</section></div>
<div class="section" id="loio5295470d7eee46c1898ee46c1b9ad763__section_rx5_wch_ycb"><section class="section" type="webapp/view/InvoiceList.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/InvoiceList.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
   controllerName=&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;
   xmlns=&quot;sap.m&quot;
   xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
   &lt;List
      <span class="ph emphasis emphasis">id=&quot;invoiceList&quot;</span>
      class=&quot;sapUiResponsiveMargin&quot;
      width=&quot;auto&quot;
      items=&quot;{invoice&gt;/Invoices}&quot; &gt;
      <span class="ph emphasis emphasis">&lt;headerToolbar&gt;
         &lt;Toolbar&gt;
            &lt;Title text=&quot;{i18n&gt;invoiceListTitle}&quot;/&gt;
            &lt;ToolbarSpacer/&gt;
            &lt;SearchField width=&quot;50%&quot; search=&quot;.onFilterInvoices&quot;/&gt;
         &lt;/Toolbar&gt;
      &lt;/headerToolbar&gt;</span>
      &lt;items&gt;
         &lt;ObjectListItem&gt;
		&#x2026;
         &lt;/ObjectListItem/&gt;
      &lt;/items&gt;
   &lt;/List&gt;
&lt;/mvc:View&gt;</pre>
<p class="p">The view is extended by a search control that we add to the list of invoices. We also
need to specify an ID <samp class="ph codeph">invoiceList</samp> for the list control to be able
to identify the list from the event handler function
<samp class="ph codeph">onFilterInvoices</samp> that we add to the search field. In addition,
the search field is part of the list header and therefore, each change on the list
binding will trigger a rerendering of the whole list, including the search
field.</p>
<p class="p">The <samp class="ph codeph">headerToolbar</samp> aggregation replaces the simple
<samp class="ph codeph">title</samp> property that we used before for our list header. A
toolbar control is way more flexible and can be adjusted as you like. We are now
displaying the title on the left side with a <samp class="ph codeph">sap.m.Title</samp> control, a
spacer, and the <samp class="ph codeph">sap.m.SearchField</samp> on the right.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/InvoiceList.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/InvoiceList.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
	&quot;sap/ui/model/json/JSONModel&quot;,
	&quot;../model/formatter&quot;<span class="ph emphasis emphasis">,
	&quot;sap/ui/model/Filter&quot;,
	&quot;sap/ui/model/FilterOperator&quot;</span>
], function (Controller, JSONModel, formatter<span class="ph emphasis emphasis">, Filter, FilterOperator</span>) {
	&quot;use strict&quot;;
	return Controller.extend(&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;, {
		formatter: formatter, 
		onInit : function () {
			var oViewModel = new JSONModel({
				currency: &quot;EUR&quot;
			});
			this.getView().setModel(oViewModel, &quot;view&quot;);
		}<span class="ph emphasis emphasis">,
		onFilterInvoices : function (oEvent) {

			// build filter array
			var aFilter = [];
			var sQuery = oEvent.getParameter(&quot;query&quot;);
			if (sQuery) {
				aFilter.push(new Filter(&quot;ProductName&quot;, FilterOperator.Contains, sQuery));
			}

			// filter binding
			var oList = this.byId(&quot;invoiceList&quot;);
			var oBinding = oList.getBinding(&quot;items&quot;);
			oBinding.filter(aFilter);
		}</span>
	});
});</pre>
<p class="p">We load two new dependencies for the filtering. The filter object will hold our
configuration for the filter action and the <samp class="ph codeph">FilterOperator</samp> is a
helper type that we need in order to specify the filter.</p>
<p class="p">In the <samp class="ph codeph">onFilterInvoices</samp> function we construct a filter object from
the search string that the user has typed in the search field. Event handlers always
receive an event argument that can be used to access the parameters that the event
provides. In our case the search field defines a parameter <samp class="ph codeph">query</samp>
that we access by calling <samp class="ph codeph">getParameter(&#x201C;query&#x201D;)</samp> on the
<samp class="ph codeph">oEvent</samp> parameter.</p>
<p class="p">If the query is not empty, we add a new filter object to the still empty array of filters.
However, if the query is empty, we filter the binding with an empty array. This
makes sure that we see all list elements again. We could also add more filters to
the array, if we wanted to search more than one data field. In our example, we just
search in the <samp class="ph codeph">ProductName</samp> path and specify a filter operator that
will search for the given query string.</p>
<p class="p">The list is accessed with the ID that we have specified in the view, because the control is
automatically prefixed by the view ID, we need to ask the view for the control with
the helper function <samp class="ph codeph">byId</samp>. On the list control we access the binding
of the aggregation <samp class="ph codeph">items</samp> to filter it with our newly constructed
filter object. This will automatically filter the list by our search string so that
only the matching items are shown when the search is triggered. The filter operator
<samp class="ph codeph">FilterOperator.Contains</samp> is <span class="ph emphasis emphasis">not</span>
case-sensitive.</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/0f8626ed7b7542ffaa44601828db20de.html" title="If we want to do a more complex logic for formatting properties of our data model, we can also write a custom formatting function. We will now add a localized status with a custom formatter, because the status in our data model is in a rather technical format." target="_top">Step 23: Custom Formatters</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/c4b2a32bb72f483faa173e890e48d812.html" title="To make our list of invoices even more user-friendly, we sort it alphabetically instead of just showing the order from the data model. Additionally, we introduce groups and add the company that ships the products so that the data is easier to consume." target="_top">Step 25: Sorting and Grouping</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.model.Filter" target="_top" alt="#/api/sap.ui.model.Filter" title="#/api/sap.ui.model.Filter">API Reference: <samp class="ph codeph">sap.ui.model.Filter</samp></a></div><div><a class="link" href="../../#/api/sap.ui.model.FilterOperator" target="_top" alt="#/api/sap.ui.model.FilterOperator" title="#/api/sap.ui.model.FilterOperator">API Reference: <samp class="ph codeph">sap.ui.model.FilterOperator</samp></a></div><div><a class="link" href="../../#/api/sap.m.SearchField" target="_top" alt="#/api/sap.m.SearchField" title="#/api/sap.m.SearchField">API Reference: <samp class="ph codeph">sap.m.SearchField</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>