<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 12: Aggregation Binding Using Templates</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="Aggregation binding (or &quot;list binding&quot;) allows a control to be bound to a list within the model data and allows relative binding to the list entries by its child controls."><meta name="description" content="Aggregation binding (or &quot;list binding&quot;) allows a control to be bound to a list within the model data and allows relative binding to the list entries by its child controls."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"6c7c5c266b534e7ea9a28f861dc515f5.html","previousTopicHref":"b8c4e534cdb440e9a5bbff86f9572bd6.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/e5310932a71f42daa41f3a6143efca9c.html" title="In this tutorial, we will explain the concepts of data binding in OpenUI5." target="_top">Data Binding</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/b8c4e534cdb440e9a5bbff86f9572bd6.html" title="So far, we have created a currency field that can format itself correctly. The currency data type also has the ability to validate that user input adheres to to the requirements of a currency; however, data type validation functions are managed by OpenUI5, which of itself has no mechanism for reporting error messages back to the UI; therefore, we need a mechanism for reporting error messages raised by validation functions back to the user. In this step, we will connect the entire view to a feature known as the &quot;Message Manager&quot;. Once this connection is established, any validation error messages generated based on the user input will be passed to the message manager which in turn will connect them to the appropriate view and control that caused the error." target="_top">Step 11: Validation Using the Message Manager</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/6c7c5c266b534e7ea9a28f861dc515f5.html" title="Now we want to do something with that newly generated list. In most cases you will use a list to allow the selection of an item and then show the details of that item elsewhere. In order to achieve this, we use a form with relatively bound controls and bind it to the selected entity via element binding." target="_top">Step 13: Element Binding</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio97830de2d7314e93b5c1ee3878a17be9"><h1 class="title topictitle1" hidden>Step 12: Aggregation Binding Using Templates</h1><div class="body conbody"><p class="shortdesc" hidden>Aggregation binding (or &quot;list binding&quot;) allows a control to be bound to a list within
the model data and allows relative binding to the list entries by its child controls. </p>
<div class="p">It will automatically create as many child controls as are needed to display the data in the
model using one of the following two approaches:<ul class="ul" id="loio97830de2d7314e93b5c1ee3878a17be9__ul_l1c_xxr_vs">
<li class="li">
<p class="p">Use template control that is cloned as many times as needed to display the data.</p>
</li>
<li class="li">
<p class="p">Use a factory function to generate the correct control per bound list entry based on
the data received at runtime.</p>
</li>
</ul></div>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio97830de2d7314e93b5c1ee3878a17be9__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio97830de2d7314e93b5c1ee3878a17be9__image_yzp_cyr_vs" src="loio16424336ab62402e8c27d5d7dac069b1_HiRes.png">
</div><span class="figcap">List with aggregation binding</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the Demo
Kit <span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.databinding.12/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.databinding.12/preview" title="#/sample/sap.ui.core.tutorial.databinding.12/preview">Data Binding - Step 12</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/index.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/index.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.require([
	&quot;sap/ui/model/json/JSONModel&quot;,
	&quot;sap/ui/core/mvc/XMLView&quot;,
	&quot;sap/ui/model/resource/ResourceModel&quot;
], function (JSONModel, XMLView, ResourceModel) {
	&quot;use strict&quot;;

	// Attach an anonymous function to the SAPUI5 &apos;init&apos; event
	sap.ui.getCore().attachInit(function () {
<span class="ph emphasis emphasis">		var oProductModel = new JSONModel();
		oProductModel.loadData(&quot;./model/Products.json&quot;);
		sap.ui.getCore().setModel(oProductModel, &quot;products&quot;);
</span>

		var oModel = new JSONModel({
			firstName: &quot;Harry&quot;,
			lastName: &quot;Hawk&quot;,
			enabled: true,
			address: {
				street: &quot;Dietmar-Hopp-Allee 16&quot;,
				city: &quot;Walldorf&quot;,
				zip: &quot;69190&quot;,
				country: &quot;Germany&quot;
			},
			&quot;salesToDate&quot;: 12345.6789,
			&quot;currencyCode&quot;: &quot;EUR&quot;
		});

		// Assign the model object to the SAPUI5 core
		sap.ui.getCore().setModel(oModel);

		var oResourceBundle = new ResourceModel({
			bundleName: &quot;sap.ui.demo.db.i18n.i18n&quot;
		});

		sap.ui.getCore().setModel(oResourceBundle, &quot;i18n&quot;);

		// Create the XML view called &quot;App&quot;
		var oView = new XMLView({
			viewName: &quot;sap.ui.demo.db.view.App&quot;
		});

		// Register the view with the message manager
		sap.ui.getCore().getMessageManager().registerObject(oView, true);

		// Display the view
		oView.placeAt(&quot;content&quot;);
	});
});
</pre>
</section></div>
<div class="section"><section class="section" type="webapp/view/App.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/App.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">...
					&lt;Input width=&quot;200px&quot; enabled=&quot;{/enabled}&quot; description=&quot;{/currencyCode}&quot;
						value=&quot;{
							parts: [
								{path: &apos;/salesToDate&apos;},
								{path: &apos;/currencyCode&apos;}
							],
							type: &apos;sap.ui.model.type.Currency&apos;,
							formatOptions: {showMeasure: false}
						}&quot;/&gt;
				&lt;/l:VerticalLayout&gt;
			&lt;/l:HorizontalLayout&gt;
		&lt;/content&gt;
	&lt;/Panel&gt;
<span class="ph emphasis emphasis">	&lt;Panel headerText=&quot;{i18n&gt;panel3HeaderText}&quot; class=&quot;sapUiResponsiveMargin&quot; width=&quot;auto&quot;&gt;
		&lt;content&gt;
			&lt;List headerText=&quot;{i18n&gt;productListTitle}&quot; items=&quot;{products&gt;/Products}&quot;&gt;
				&lt;items&gt;
					&lt;ObjectListItem title=&quot;{products&gt;ProductName}&quot;
						number=&quot;{
							parts: [
								{path: &apos;products&gt;UnitPrice&apos;},
								{path: &apos;/currencyCode&apos;}
							],
							type: &apos;sap.ui.model.type.Currency&apos;,
							formatOptions: { showMeasure: false }
						}&quot;
						numberUnit=&quot;{/currencyCode}&quot;&gt;
						&lt;attributes&gt;
							&lt;ObjectAttribute text=&quot;{products&gt;QuantityPerUnit}&quot;/&gt;
							&lt;ObjectAttribute title=&quot;{i18n&gt;stockValue}&quot;
								text=&quot;{
									parts: [
										{path: &apos;products&gt;UnitPrice&apos;},
										{path: &apos;products&gt;UnitsInStock&apos;},
										{path: &apos;/currencyCode&apos;}
									],
									formatter: &apos;.formatStockValue&apos;
								}&quot;/&gt;
						&lt;/attributes&gt;
					&lt;/ObjectListItem&gt;
				&lt;/items&gt;
			&lt;/List&gt;
		&lt;/content&gt;
	&lt;/Panel&gt;</span>
...</pre>
<p class="p">We add a new panel to the view.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/App.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/App.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
<span class="ph emphasis emphasis">	&quot;sap/m/library&quot;,
	&quot;sap/ui/core/Locale&quot;,
	&quot;sap/ui/core/LocaleData&quot;,
	&quot;sap/ui/model/type/Currency&quot;
</span>
], function (Controller, mobileLibrary<span class="ph emphasis emphasis">, Locale, LocaleData, Currency</span>) {
	&quot;use strict&quot;;
	return Controller.extend(&quot;sap.ui.demo.db.controller.App&quot;, {
		formatMail: function(sFirstName, sLastName) {
			var oBundle = this.getView().getModel(&quot;i18n&quot;).getResourceBundle();
			return mobileLibrary.URLHelper.normalizeEmail(
				sFirstName + &quot;.&quot; + sLastName + &quot;@example.com&quot;,
				oBundle.getText(&quot;mailSubject&quot;, [sFirstName]),
				oBundle.getText(&quot;mailBody&quot;));
		}<span class="ph emphasis emphasis">,
		formatStockValue: function(fUnitPrice, iStockLevel, sCurrCode) {
			var sBrowserLocale = sap.ui.getCore().getConfiguration().getLanguage();
			var oLocale = new Locale(sBrowserLocale);
			var oLocaleData = new LocaleData(oLocale);
			var oCurrency = new Currency(oLocaleData.mData.currencyFormat);
			return oCurrency.formatValue([fUnitPrice * iStockLevel, sCurrCode], &quot;string&quot;);
</span>
		}
	});
});
</pre>
</section></div>
<div class="section"><section class="section" type="webapp/model/Products.json (New)"><h2 class="section_title" style="font-size: 1.15em;">webapp/model/Products.json (New)</h2>

<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">{ &quot;Products&quot;: [ {
     &quot;ProductID&quot;: 1,
     &quot;ProductName&quot;: &quot;Chai&quot;,
     &quot;SupplierID&quot;: 1,
     &quot;CategoryID&quot;: 1,
     &quot;QuantityPerUnit&quot;: &quot;10 boxes x 20 bags&quot;,
     &quot;UnitPrice&quot;: &quot;18.0000&quot;,
     &quot;UnitsInStock&quot;: 39,
     &quot;UnitsOnOrder&quot;: 0,
     &quot;ReorderLevel&quot;: 10,
     &quot;Discontinued&quot;: false
    }, {
     &quot;ProductID&quot;: 2,
     &quot;ProductName&quot;: &quot;Chang&quot;,
     &quot;SupplierID&quot;: 1,
     &quot;CategoryID&quot;: 1,
     &quot;QuantityPerUnit&quot;: &quot;24 - 12 oz bottles&quot;,
     &quot;UnitPrice&quot;: &quot;19.0000&quot;,
     &quot;UnitsInStock&quot;: 17,
     &quot;UnitsOnOrder&quot;: 40,
     &quot;ReorderLevel&quot;: 25,
     &quot;Discontinued&quot;: true
    }, {
     &quot;ProductID&quot;: 3,
     &quot;ProductName&quot;: &quot;Aniseed Syrup&quot;,
     &quot;SupplierID&quot;: 1,
     &quot;CategoryID&quot;: 2,
     &quot;QuantityPerUnit&quot;: &quot;12 - 550 ml bottles&quot;,
     &quot;UnitPrice&quot;: &quot;10.0000&quot;,
     &quot;UnitsInStock&quot;: 0,
     &quot;UnitsOnOrder&quot;: 70,
     &quot;ReorderLevel&quot;: 25,
     &quot;Discontinued&quot;: false
    }, {
     &quot;ProductID&quot;: 4,
     &quot;ProductName&quot;: &quot;Chef Anton&apos;s Cajun Seasoning&quot;,
     &quot;SupplierID&quot;: 2,
     &quot;CategoryID&quot;: 2,
     &quot;QuantityPerUnit&quot;: &quot;48 - 6 oz jars&quot;,
     &quot;UnitPrice&quot;: &quot;22.0000&quot;,
     &quot;UnitsInStock&quot;: 53,
     &quot;UnitsOnOrder&quot;: 0,
     &quot;ReorderLevel&quot;: 0,
     &quot;Discontinued&quot;: false
    }, {
     &quot;ProductID&quot;: 5,
     &quot;ProductName&quot;: &quot;Chef Anton&apos;s Gumbo Mix&quot;,
     &quot;SupplierID&quot;: 2,
     &quot;CategoryID&quot;: 2,
     &quot;QuantityPerUnit&quot;: &quot;36 boxes&quot;,
     &quot;UnitPrice&quot;: &quot;21.3500&quot;,
     &quot;UnitsInStock&quot;: 0,
     &quot;UnitsOnOrder&quot;: 0,
     &quot;ReorderLevel&quot;: 0,
     &quot;Discontinued&quot;: true
    }]
  }</span></pre>
<p class="p">We now use a new JSON model file for product data.</p>
</section></div>
<div class="section"><section class="section" type="webapp/i18n/i18n.properties"><h2 class="section_title" style="font-size: 1.15em;">webapp/i18n/i18n.properties</h2>

<pre class="pre codeblock prettyprint lang-prefs">... 
# Screen titles
panel1HeaderText=Data Binding Basics
panel2HeaderText=Address Details
<span class="ph emphasis emphasis">panel3HeaderText=Aggregation Binding</span>

# Invoice List
invoiceListTitle=Invoices
statusA=New
statusB=In Progress
statusC=Done

<span class="ph emphasis emphasis"># Product list
productListTitle=Product List
stockValue=Current Stock Value</span></pre>
</section></div>
<div class="section"><section class="section" type="webapp/i18n/i18n_de.properties"><h2 class="section_title" style="font-size: 1.15em;">webapp/i18n/i18n_de.properties</h2>

<pre class="pre codeblock prettyprint lang-prefs">...
# Screen titles
panel1HeaderText=Data Binding Basics
panel2HeaderText=Adressdetails
<span class="ph emphasis emphasis">panel3HeaderText=Aggregation Binding</span>

# Invoice List
invoiceListTitle=Rechnungen
statusA=Neu
statusB=Laufend
statusC=Abgeschlossen

<span class="ph emphasis emphasis"># Product list
productListTitle=Artikelliste
stockValue=Lagerbestand Wert</span></pre>
<p class="p">We add the missing texts.</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/e5310932a71f42daa41f3a6143efca9c.html" title="In this tutorial, we will explain the concepts of data binding in OpenUI5." target="_top">Data Binding</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/b8c4e534cdb440e9a5bbff86f9572bd6.html" title="So far, we have created a currency field that can format itself correctly. The currency data type also has the ability to validate that user input adheres to to the requirements of a currency; however, data type validation functions are managed by OpenUI5, which of itself has no mechanism for reporting error messages back to the UI; therefore, we need a mechanism for reporting error messages raised by validation functions back to the user. In this step, we will connect the entire view to a feature known as the &quot;Message Manager&quot;. Once this connection is established, any validation error messages generated based on the user input will be passed to the message manager which in turn will connect them to the appropriate view and control that caused the error." target="_top">Step 11: Validation Using the Message Manager</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/6c7c5c266b534e7ea9a28f861dc515f5.html" title="Now we want to do something with that newly generated list. In most cases you will use a list to allow the selection of an item and then show the details of that item elsewhere. In order to achieve this, we use a form with relatively bound controls and bind it to the selected entity via element binding." target="_top">Step 13: Element Binding</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/91f057786f4d1014b6dd926db0e91070.html" title="List binding (or aggregation binding) is used to automatically create child controls according to model data." target="_top">List Binding (Aggregation Binding)</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>