<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 2: Creating a Mock Server to Simulate Data</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we use the mock server to add data to our app without dependency to any remote server or system."><meta name="description" content="In this step, we use the mock server to add data to our app without dependency to any remote server or system."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"46c1ca4eb2804af6bfa371ad51c9b887.html","previousTopicHref":"7a78f1b707c248fd9ec53dcb5f10814c.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3a9728ec31f94ca18a7d543ce419d85d.html" title="In this tutorial, we will explore some advanced features of the mock server." target="_top">Mock Server</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/7a78f1b707c248fd9ec53dcb5f10814c.html" title="We start with a simple app scenario with a list of items bound to an OData service. Since the OData service is not available yet on a real server, we will use the mock server to simulate both data and data calls." target="_top">Step 1: Initial App Without Data</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/46c1ca4eb2804af6bfa371ad51c9b887.html" title="In this step, we add the functionality to interpret URL parameters in our local mock server configuration." target="_top">Step 3: Handling Custom URL Parameters</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio50897decc9504b2a875fb41d89fd254a"><h1 class="title topictitle1" hidden>Step 2: Creating a Mock Server to Simulate Data</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we use the mock server to add data to our app without dependency to any remote server or system.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio50897decc9504b2a875fb41d89fd254a__fig_qwx_h2q_st"><div class="figbody">

<img class="inline" id="loio50897decc9504b2a875fb41d89fd254a__image_dyv_r3q_st" src="loio55edd9fa2cc24f398a9373d6d497d3e4_HiRes.png">
</div><span class="figcap">The app now contains data</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the Demo Kit <span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.mockserver.02/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.mockserver.02/preview" title="#/sample/sap.ui.core.tutorial.mockserver.02/preview">Mock Server - Step 2</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/test/mockServer.html"><h2 class="section_title" style="font-size: 1.15em;">webapp/test/mockServer.html</h2>

<pre class="pre codeblock prettyprint lang-html">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset=&quot;utf-8&quot;&gt;
	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
	&lt;title&gt;Mock Server Tutorial&lt;/title&gt;
	&lt;script id=&quot;sap-ui-bootstrap&quot;
		src=&quot;resources/sap-ui-core.js&quot;
		data-sap-ui-theme=&quot;sap_belize&quot;
		data-sap-ui-resourceroots=&apos;{
			&quot;sap.ui.demo.MockServer&quot;: &quot;../&quot;
		}&apos;
		data-sap-ui-oninit=&quot;module:sap/ui/<span class="ph emphasis emphasis">demo/MockServer/test/initMockServer</span>&quot;
		data-sap-ui-compatVersion=&quot;edge&quot;
		data-sap-ui-async=&quot;true&quot;&gt;
	&lt;/script&gt;
&lt;/head&gt;
&lt;body class=&quot;sapUiBody&quot;&gt;
	&lt;div data-sap-ui-component data-name=&quot;sap.ui.demo.MockServer&quot; data-id=&quot;container&quot; data-settings=&apos;{&quot;id&quot; : &quot;MockServer&quot;}&apos;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<div class="p">We use this file to run our app in test mode with mock data. The new artifact <samp class="ph codeph">initMockServer</samp> performs the required set up steps
before the application component is instantiated. By doing so, we can catch all requests that would go to the real service and process
it locally with our mock server when the app is launched with the <samp class="ph codeph">webapp/test/mockServer.html</samp>.<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">A productive application does not contain the mock server code and thus connects to the real service instead. The HTML page
above is defined only for local testing and to be called in automated tests. The application coding itself is unchanged and
does not know the difference between the real and the mocked back-end service.</p><p class="p">The mock server does not need to be called from anywhere else in our code so we use <samp class="ph codeph">sap.ui.require</samp> to load
dependencies asynchronously without defining a global namespace.</p></aside></div>
</section></div>
<div class="section" id="loio50897decc9504b2a875fb41d89fd254a__section_e1t_y11_hhb"><section class="section" type="webapp/test/initMockServer.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/test/initMockServer.js</h2><pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/MockServer/localService/mockserver&quot;
], function (mockserver) {
	&quot;use strict&quot;;

	// initialize the mock server
	mockserver.init();

	// initialize the embedded component on the HTML page
	sap.ui.require([&quot;sap/ui/core/ComponentSupport&quot;]);
});</pre>We
load a dependency to a file called <samp class="ph codeph">mockserver.js</samp> that is located in the <samp class="ph codeph">webapp/localService</samp> folder. This
file contains our local mock server. It is immediately called with the <samp class="ph codeph">init</samp> method before we initialize the application
component.</section></div>
<div class="section"><section class="section" type="webapp/localService/metadata.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/localService/metadata.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;edmx:Edmx Version=&quot;1.0&quot;
    xmlns:edmx=&quot;http://schemas.microsoft.com/ado/2007/06/edmx&quot;&gt;
    &lt;edmx:DataServices
        xmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot; m:DataServiceVersion=&quot;1.0&quot;&gt;
        &lt;Schema Namespace=&quot;NerdMeetup.Models&quot;
            xmlns:d=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;
            xmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;
            xmlns=&quot;http://schemas.microsoft.com/ado/2006/04/edm&quot;&gt;
            &lt;EntityType Name=&quot;Meetup&quot;&gt;
                &lt;Key&gt;
                    &lt;PropertyRef Name=&quot;MeetupID&quot; /&gt;
                &lt;/Key&gt;
                &lt;Property Name=&quot;MeetupID&quot; Type=&quot;Edm.Int32&quot; Nullable=&quot;false&quot; /&gt;
                &lt;Property Name=&quot;Title&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;EventDate&quot; Type=&quot;Edm.DateTime&quot; Nullable=&quot;false&quot; /&gt;
                &lt;Property Name=&quot;Description&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;HostedBy&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;ContactPhone&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;Address&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;Country&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;Latitude&quot; Type=&quot;Edm.Double&quot; Nullable=&quot;false&quot; /&gt;
                &lt;Property Name=&quot;Longitude&quot; Type=&quot;Edm.Double&quot; Nullable=&quot;false&quot; /&gt;
                &lt;Property Name=&quot;HostedById&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
                &lt;Property Name=&quot;Location&quot; Type=&quot;NerdMeetup.Models.LocationDetail&quot; Nullable=&quot;false&quot; /&gt;
            &lt;/EntityType&gt;
            &lt;ComplexType Name=&quot;LocationDetail&quot; /&gt;
            &lt;EntityContainer Name=&quot;NerdMeetups&quot; m:IsDefaultEntityContainer=&quot;true&quot;&gt;
                &lt;EntitySet Name=&quot;Meetups&quot; EntityType=&quot;NerdMeetup.Models.Meetup&quot; /&gt;
                &lt;FunctionImport Name=&quot;FindUpcomingMeetups&quot; EntitySet=&quot;Meetups&quot; ReturnType=&quot;Collection(NerdMeetup.Models.Meetup)&quot; m:HttpMethod=&quot;GET&quot; /&gt;
            &lt;/EntityContainer&gt;
        &lt;/Schema&gt;
    &lt;/edmx:DataServices&gt;
&lt;/edmx:Edmx&gt;</pre>
<p class="p">The <span class="ph filepath">metadata</span> file contains information about the service
interface and does not need to be written manually. It defines a
<samp class="ph codeph">Meetup</samp> entity, a <samp class="ph codeph">Meetups</samp> entity set and a
function import definition.</p>
</section></div>
<div class="section"><section class="section" type="webapp/localService/mockdata/Meetups.json (New)"><h2 class="section_title" style="font-size: 1.15em;">webapp/localService/mockdata/Meetups.json (New)</h2>

<pre class="pre codeblock prettyprint lang-json"><span class="ph emphasis emphasis">[{
	&quot;MeetupID&quot;: 1,
	&quot;Title&quot;: &quot;Toronto Tech Meet-Up&quot;,
	&quot;EventDate&quot;: &quot;/Date(1593810000000)/&quot;,
	&quot;Description&quot;: &quot;The best way to expand your knowledge and network of the Toronto technology community&quot;
},
{
	&quot;MeetupID&quot;: 2,
	&quot;Title&quot;: &quot;Los Angeles redditors&quot;,
	&quot;EventDate&quot;: &quot;/Date(1572779994000)/&quot;,
	&quot;Description&quot;: &quot;This is a meet-up group specifically for redditors of r/LosAngeles. If you don&apos;t know what that is, this isn&apos;t the meet-up you&apos;re looking for&quot;
}, {
	&quot;MeetupID&quot;: 3,
	&quot;Title&quot;: &quot;San Francisco UI5 Lovers&quot;,
	&quot;EventDate&quot;: &quot;/Date(1642122807784)/&quot;,
	&quot;Description&quot;: &quot;Meet the bay area UI5 community and spread the love for UI5 technology&quot;
}, {
	&quot;MeetupID&quot;: 4,
	&quot;Title&quot;: &quot;Designers + Geeks New York&quot;,
	&quot;EventDate&quot;: &quot;/Date(1575544794000)/&quot;,
	&quot;Description&quot;: &quot;Bringing designers + geeks together to talk shop, startups, and do some knowledge sharing. All types of designers + geeks welcome&quot;
}, {
	&quot;MeetupID&quot;: 5,
	&quot;Title&quot;: &quot;New York City Geek Adventure Group&quot;,
	&quot;EventDate&quot;: &quot;/Date(1539339594000)/&quot;,
	&quot;Description&quot;: &quot;Are you looking to have fun and go on random adventures?&quot;
}]
</span></pre>
<p class="p">The <span class="ph filepath">Meetups.json</span> file is automatically read by the mock server
later in this step. It represents a flat array of <samp class="ph codeph">Meetup</samp> items.</p>
</section></div>
<div class="section"><section class="section" type="webapp/localService/mockserver.js (New)"><h2 class="section_title" style="font-size: 1.15em;">webapp/localService/mockserver.js (New)</h2><pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">sap.ui.define([
	&quot;sap/ui/core/util/MockServer&quot;,
	&quot;sap/base/Log&quot;
], function(MockServer, Log) {
	&quot;use strict&quot;;

	return {
		/**
		 * Initializes the mock server.
		 * You can configure the delay with the URL parameter &quot;serverDelay&quot;.
		 * The local mock data in this folder is returned instead of the real data for testing.
		 * @public
		 */
		init: function() {
			// create
			var oMockServer = new MockServer({
				rootUri: &quot;/&quot;
			});

			// simulate against the metadata and mock data
			oMockServer.simulate(&quot;../localService/metadata.xml&quot;, {
				sMockdataBaseUrl: &quot;../localService/mockdata&quot;,
				bGenerateMissingMockData: true
			});

			// start
			oMockServer.start();

			Log.info(&quot;Running the app with mock data&quot;);
		}

	};

});</span></pre><p class="p">Now
we can write the code to initialize the mock server that will simulate the requests instead of the real server. We load the
<samp class="ph codeph">MockServer</samp> module as a dependency and create a helper object that defines an <samp class="ph codeph">init</samp> method to
start the server. This method is called before the Component initialization in the <span class="ph filepath">mockServer.html</span> file above.
The <samp class="ph codeph">init</samp> method creates a <samp class="ph codeph">MockServer</samp> instance with the same URL as the real service. The URL in
configuration parameter <samp class="ph codeph">rootURI</samp> is now served by our test server instead of the real service. </p><p class="p">Next, we set two
global configuration settings for all <samp class="ph codeph">MockServer</samp> instances that tell the server to respond automatically and
introduce a delay of one second to imitate a typical server response time.</p><div class="p">In order to simulate a manual back-end call we can
simply call the <samp class="ph codeph">simulate</samp> method on the <samp class="ph codeph">MockServer</samp> instance with the path to our newly
created<span class="ph filepath"> metadata.xml</span> file. This will read the test data from our local file system and set up the URL
patterns that will mimic the real service. The first parameter is the path to the service <span class="ph filepath">metadata.xml</span> document.
The second parameter is an object with the following properties:<ul class="ul" id="loio50897decc9504b2a875fb41d89fd254a__ul_hxm_2hq_st">
<li class="li">
<p class="p"><samp class="ph codeph">sMockdataBaseUrl</samp>: path where to look for mock data files in JSON format</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">bGenerateMissingMockData</samp>: Boolean property to tell the <samp class="ph codeph">MockServer</samp> to use auto-generated
mock data in case no JSON files are found.</p>
</li>
</ul>We call the function <samp class="ph codeph">start</samp> on the mock server instance. From this point on, each request matching the URL
pattern <samp class="ph codeph">rootURI</samp> will be processed by the <samp class="ph codeph">MockServer</samp>.</div><p class="p">Finally, we add a message toast to
indicate for the user that the app runs with mock data.</p><p class="p">This approach is perfect for local and automated testing, even without
any network connection. Your development does not depend on the availability of a remote server, i.e. to run your tests independently
from the back-end service. You can control the mocked data so the requests will return reliable and predictable results.</p><p class="p">If the
real service connection cannot be established, for example, when there is no network connection, you can always fall back to the local
test page and run the app with mock data.</p>Just run the app now again with the <span class="ph filepath">mockServer.html</span> file.. The list
should now be populated with meet-ups from our mock data. You can also choose the button and see data.</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3a9728ec31f94ca18a7d543ce419d85d.html" title="In this tutorial, we will explore some advanced features of the mock server." target="_top">Mock Server</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/7a78f1b707c248fd9ec53dcb5f10814c.html" title="We start with a simple app scenario with a list of items bound to an OData service. Since the OData service is not available yet on a real server, we will use the mock server to simulate both data and data calls." target="_top">Step 1: Initial App Without Data</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/46c1ca4eb2804af6bfa371ad51c9b887.html" title="In this step, we add the functionality to interpret URL parameters in our local mock server configuration." target="_top">Step 3: Handling Custom URL Parameters</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/69d3cbd4150c4ffb884e788f7f60fd93.html" title="Mock server is a mocking framework for HTTP and HTTPS that is used to simplify integration testing and to decouple development teams by allowing to develop against a service that is not complete or unstable." target="_top">Mock Server</a></div><div><a class="link" href="../../#/api/sap.ui.core.util.MockServer" target="_top" alt="#/api/sap.ui.core.util.MockServer" title="#/api/sap.ui.core.util.MockServer">API Reference: <samp class="ph codeph">sap.ui.core.util.MockServer</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>