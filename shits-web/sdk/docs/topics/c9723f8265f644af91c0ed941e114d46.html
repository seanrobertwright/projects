<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Creating an Entity</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="The sap.ui.model.odata.v4.ODataListBinding#create method creates a new entity. Users can interact with a newly created entity even before it has been sent to the server."><meta name="description" content="The sap.ui.model.odata.v4.ODataListBinding#create method creates a new entity. Users can interact with a newly created entity even before it has been sent to the server."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"2613ebc835764abd9aefd2e6fa8b7392.html","previousTopicHref":"fd715d97ebf842739697c9a0f276f0c0.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loioc9723f8265f644af91c0ed941e114d46"><h1 class="title topictitle1" hidden>Creating an Entity</h1><div class="body conbody"><p class="shortdesc" hidden>The <samp class="ph codeph">sap.ui.model.odata.v4.ODataListBinding#create</samp> method creates a
new entity. Users can interact with a newly created entity even before it has been sent to
the server.</p>
<p class="p">To create new entities, <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create"><samp class="ph codeph">ODataListBinding#create</samp></a></span> uses the
list binding&apos;s update group ID as group ID. For more information how this group ID is
determined, see the documentation for the binding-specific parameter
<samp class="ph codeph">$$updateGroupID</samp> of <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataModel/methods/bindList" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel/methods/bindList" title="#/api/sap.ui.model.odata.v4.ODataModel/methods/bindList"><samp class="ph codeph">ODataModel#bindList</samp></a></span>.</p>
<p class="p">A newly created entity can be inserted at the start or at the end of the list. This new
entity is transient until it is successfully submitted, see <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/isTransient" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/isTransient" title="#/api/sap.ui.model.odata.v4.Context/methods/isTransient"><samp class="ph codeph">Context#isTransient</samp></a></span>. The initial
data for the created entity can be supplied via the parameter
<samp class="ph codeph">oInitialData</samp> and modified via property bindings. Properties that
are not part of the initial data show the default value from the service metadata on the
UI, but they are not sent to the server. If there is no default value, null is used
instead, even if the property is not nullable. Updates for the transient entity are
collected and added to the POST request which creates the entity on the server.</p>
<p class="p">Inserting an entity at the end of the list is done via the <samp class="ph codeph">bAtEnd</samp>
parameter in the <samp class="ph codeph">create</samp> call. This is only possible, if the list&apos;s
length has been requested via the system query option <samp class="ph codeph">$count</samp>.</p>
<p class="p">To delete transient entities, use <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/delete" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/delete" title="#/api/sap.ui.model.odata.v4.Context/methods/delete"><samp class="ph codeph">Context#delete</samp></a></span>. Transient entities
are also deleted when you reset the changes for the list binding on which the entity has
been created, see <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/resetChanges" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/resetChanges" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/resetChanges"><samp class="ph codeph">ODataListBinding#resetChanges</samp></a></span> and
<span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataModel/methods/resetChanges" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel/methods/resetChanges" title="#/api/sap.ui.model.odata.v4.ODataModel/methods/resetChanges"><samp class="ph codeph">ODataModel#resetChanges</samp></a></span>. The
promise returned by <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/created" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/created" title="#/api/sap.ui.model.odata.v4.Context/methods/created"><samp class="ph codeph">Context#created</samp></a></span>
is rejected in all
cases where the created entity is deleted before it is created in the backend. As long
as the list binding has a transient entity, <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/hasPendingChanges" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/hasPendingChanges" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/hasPendingChanges"><samp class="ph codeph">ODataListBinding#hasPendingChanges</samp></a></span>
returns <samp class="ph codeph">true</samp> and the following methods of <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding" title="#/api/sap.ui.model.odata.v4.ODataListBinding"><samp class="ph codeph">ODataListBinding</samp></a></span> raise an error:
<samp class="ph codeph">refresh</samp>, <samp class="ph codeph">filter</samp>, and <samp class="ph codeph">sort</samp>. The
deletion of another entity of the same list binding is possible.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p>The position of the created entity may change after the methods
<samp class="ph codeph">refresh</samp>, <samp class="ph codeph">filter</samp>, or <samp class="ph codeph">sort</samp> of an
<span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding" title="#/api/sap.ui.model.odata.v4.ODataListBinding"><samp class="ph codeph">ODataListBinding</samp></a></span>.</p></aside>
<p class="p">If you have called <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create"><samp class="ph codeph">ODataListBinding#create</samp></a></span> on a list
binding where the update group ID has <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.SubmitMode" target="_top" alt="#/api/sap.ui.model.odata.v4.SubmitMode" title="#/api/sap.ui.model.odata.v4.SubmitMode"><samp class="ph codeph">SubmitMode.API</samp></a></span> and the creation of
the entity on the server fails, the creation is repeated with the next call of <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" title="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch"><samp class="ph codeph">submitBatch</samp></a></span> for this
group. If the update group ID has <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.SubmitMode" target="_top" alt="#/api/sap.ui.model.odata.v4.SubmitMode" title="#/api/sap.ui.model.odata.v4.SubmitMode"><samp class="ph codeph">SubmitMode.Auto</samp></a></span> or <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.SubmitMode" target="_top" alt="#/api/sap.ui.model.odata.v4.SubmitMode" title="#/api/sap.ui.model.odata.v4.SubmitMode"><samp class="ph codeph">SubmitMode.Direct</samp></a></span> and the creation
fails, the creation is repeated automatically with the next update for the entity.
<samp class="ph codeph">submitBatch</samp> can also be used for update group IDs with
<samp class="ph codeph">SubmitMode.Auto</samp> to repeat, independently of an update. The error
returned by the server is passed to the <span class="ph"><a class="xref" href="../../#/api/sap.ui.core.message.MessageManager" target="_top" alt="#/api/sap.ui.core.message.MessageManager" title="#/api/sap.ui.core.message.MessageManager"><samp class="ph codeph">MessageManager</samp></a></span>
and the promise you get via <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/created" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/created" title="#/api/sap.ui.model.odata.v4.Context/methods/created"><samp class="ph codeph">Context.created</samp></a></span>
is not rejected. Each time the data for the created entity is sent to the server, a <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/createSent" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/createSent" title="#/api/sap.ui.model.odata.v4.Context/methods/createSent"><samp class="ph codeph">Context.createSent</samp></a></span> event is fired. Each time the client
receives a response for the creation, a <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/createCompleted" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/createCompleted" title="#/api/sap.ui.model.odata.v4.Context/methods/createCompleted"><samp class="ph codeph">Context.creatCompleted</samp></a></span> event is fired, independent of
whether the creation was successful, or not.</p>
<p class="p">If you have called <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create"><samp class="ph codeph">ODataListBinding#create</samp></a></span> on a list
binding with an application group ID, and the creation of the entity on the server
fails, the creation is repeated with the next call of <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" title="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch"><samp class="ph codeph">ODataModel#submitBatch</samp></a></span> for this
group. If the update group ID is <samp class="ph codeph">$auto</samp> or <samp class="ph codeph">$direct</samp>, and
the creation fails, the creation is repeated automatically with the next update for the
entity. The error is passed to the <span class="ph"><a class="xref" href="../../#/api/sap.ui.core.message.MessageManager" target="_top" alt="#/api/sap.ui.core.message.MessageManager" title="#/api/sap.ui.core.message.MessageManager"><samp class="ph codeph">MessageManager</samp></a></span>
and the promise you
get via <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/created" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/created" title="#/api/sap.ui.model.odata.v4.Context/methods/created"><samp class="ph codeph">Context#created</samp></a></span>
is not rejected.
Each time the data for the created entity is sent to the server, a <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/createSent" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/createSent" title="#/api/sap.ui.model.odata.v4.Context/methods/createSent"><samp class="ph codeph">createSent</samp></a></span>
event
is fired. Each time the client receives a response for the creation, a <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/events/createCompleted" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/events/createCompleted" title="#/api/sap.ui.model.odata.v4.ODataListBinding/events/createCompleted"><samp class="ph codeph">createCompleted</samp></a></span>
event is fired, independent of whether the creation was successful, or not.</p>
<aside class="note sap-recommendation recommendation" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Recommendation</strong></div>
<p class="p">Lock the UI each time the (<samp class="ph codeph">POST</samp>) request for the creation is sent to the server and unlock it, when the response from the
server for that (<samp class="ph codeph">POST</samp>) request is processed, because updates in between result in errors. If the update group ID is
<span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.SubmitMode" target="_top" alt="#/api/sap.ui.model.odata.v4.SubmitMode" title="#/api/sap.ui.model.odata.v4.SubmitMode"><samp class="ph codeph">SubmitMode.API</samp></a></span>, you can lock the UI when calling <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch" title="#/api/sap.ui.model.odata.v4.ODataModel/methods/submitBatch"><samp class="ph codeph">ODataModel#submitBatch</samp></a></span> and unlock it again when the promise returned by
<samp class="ph codeph">ODataModel#submitBatch</samp> is resolved or rejected. However, if the update group ID is
<samp class="ph codeph">SubmitMode.Auto</samp> or <samp class="ph codeph">SubmitMode.Direct</samp>, use the <samp class="ph codeph">createSent</samp> event to lock the
related UI and the <samp class="ph codeph">createCompleted</samp> event to unlock it.</p></aside>
<pre class="pre codeblock prettyprint">// suppose this list binding has no own update group; it uses the model&apos;s update group instead (an application group)
...
        onCreateSalesOrder : function (oEvent) {
            var oContext = this.getView().byId(&quot;SalesOrders&quot;).getBinding(&quot;items&quot;)
                    .create({
                        &quot;Note&quot; : &quot;My new Sales Order&quot;,
                        &quot;NoteLanguage&quot; : &quot;E&quot;,
                        &quot;BuyerID&quot; : &quot;0100000000&quot;,
                        &quot;CurrencyCode&quot; : &quot;EUR&quot;
                    });
 
            // Note: This promise fails only if the transient entity is deleted
            oContext.created().then(function () {
                    // sales order successfully created
                }, function (oError) {
                    // handle rejection of entity creation; if oError.canceled === true then the transient entity has been deleted 
                });
        },
 
        onDeleteSalesOrder : function () {
            var oSalesOrderContext = this.getView().byId(&quot;SalesOrders&quot;).getSelectedItem().getBindingContext();
 
            oSalesOrderContext.delete(&quot;$auto&quot;).then(function () {
                    // sales order successfully deleted
               }, function (oError) {
                    // do error handling
               });
        },
 
        onSaveSalesOrder : function () {
            var oView = this.getView();
 
            function resetBusy() {
                oView.setBusy(false);
            }
 
            // lock UI until submitBatch is resolved, to prevent errors caused by updates while submitBatch is pending
            oView.setBusy(true);
             
            oView.getModel().submitBatch(oView.getModel().getUpdateGroupId()).then(resetBusy, resetBusy);
        },
...</pre>
<aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p class="p">To ensure that for a list binding all expanded data is available as soon as the
promise returned by <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/created" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/created" title="#/api/sap.ui.model.odata.v4.Context/methods/created"><samp class="ph codeph">Context#created</samp></a></span>
is resolved, an
additional single <samp class="ph codeph">GET</samp> request for the newly created entity is sent
automatically once the <samp class="ph codeph">POST</samp> request has arrived.</p><p class="p">If you want to skip this additional single <samp class="ph codeph">GET</samp> request, call <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create" title="#/api/sap.ui.model.odata.v4.ODataListBinding/methods/create"><samp class="ph codeph">ODataListBinding#create</samp></a></span> with
parameter <samp class="ph codeph">bSkipRefresh=true</samp>.</p></aside>
<p class="p">The <samp class="ph codeph">promise</samp> returned by <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/created" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/created" title="#/api/sap.ui.model.odata.v4.Context/methods/created"><samp class="ph codeph">Context#created</samp></a></span>
is resolved when
the entity represented by this context has been created in the backend. Once the promise
is resolved, <span class="ph"><a class="xref" href="../../#/api/sap.ui.model.odata.v4.Context/methods/getPath" target="_top" alt="#/api/sap.ui.model.odata.v4.Context/methods/getPath" title="#/api/sap.ui.model.odata.v4.Context/methods/getPath"><samp class="ph codeph">Context#getPath</samp></a></span>
returns a path
including the key predicate of the new entity. For returning the path including the key
predicates, all key properties need to be available.</p>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.model.odata.v4.ODataListBinding" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataListBinding" title="#/api/sap.ui.model.odata.v4.ODataListBinding">sap.ui.model.odata.v4.ODataListBinding</a></div><div><a class="link" href="../../#/api/sap.ui.model.odata.v4.ODataModel" target="_top" alt="#/api/sap.ui.model.odata.v4.ODataModel" title="#/api/sap.ui.model.odata.v4.ODataModel">sap.ui.model.odata.v4.ODataModel</a></div><div><a class="link" href="../../#/api/sap.ui.model.odata.v4.Context" target="_top" alt="#/api/sap.ui.model.odata.v4.Context" title="#/api/sap.ui.model.odata.v4.Context">sap.ui.model.odata.v4.Context</a></div><div><a class="link" href="../../#/api/sap.ui.core.message.MessageManager" target="_top" alt="#/api/sap.ui.core.message.MessageManager" title="#/api/sap.ui.core.message.MessageManager">sap.ui.core.message.MessageManager</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>