<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Replacement of Bindings</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="For attributes, OpenUI5 binding expressions are used instead of preprocessing instructions. If the value of an XML attribute represents a valid OpenUI5 binding which refers to currently available model (= variable) names only, the binding is evaluated and the result is written back into the XML attribute."><meta name="description" content="For attributes, OpenUI5 binding expressions are used instead of preprocessing instructions. If the value of an XML attribute represents a valid OpenUI5 binding which refers to currently available model (= variable) names only, the binding is evaluated and the result is written back into the XML attribute."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"65da02badf704e03a4fd6bd4c5aba8f4.html","previousTopicHref":"263f6e5a915f430894ee290040e7e220.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio604b1eb50e47483ebaf97a27fb065e95"><h1 class="title topictitle1" hidden>Replacement of Bindings</h1><div class="body conbody"><p class="shortdesc" hidden>For attributes, <span class="ph"><span class="ph pname">OpenUI5</span></span>
binding expressions are used instead of preprocessing instructions. If the value of an XML
attribute represents a valid <span class="ph"><span class="ph pname">OpenUI5</span></span> binding which refers to
currently available model (= <var class="keyword varname">&lt;variable&gt;</var>) names only, the binding is
evaluated and the result is written back into the XML attribute.</p>
<p class="p">The <samp class="ph codeph">sap.ui.model.odata.AnnotationHelper.format</samp> method can be used as a
formatter which properly interprets OData Version 4.0 annotations from the OData meta
model. You can use the same formatter for labels and values. For more information, see
<a class="xref" href="http://www.sap.com/Protocols/SAPData" target="_blank" alt="http://www.sap.com/Protocols/SAPData" title="http://www.sap.com/Protocols/SAPData">SAP Annotations for OData Version 2.0</a>.</p>
<p class="p">Formatters for labels are usually not needed. Instead, pointing to
<samp class="ph codeph">&apos;badge&gt;MainInfo/Label/String&apos;</samp> could be used, but this does not
take care of escaping and works only for string constants. The
<samp class="ph codeph">sap.ui.model.odata.AnnotationHelper.format</samp> inserts references to
translatable texts in case the preprocessor has been called with <samp class="ph codeph">bindTexts : true</samp>. This is important for design-time templating.</p>
<p class="p">The following example shows a template with binding:</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;Label text=&quot;{path: &apos;badge&gt;MainInfo/Label&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.format&apos;}&quot;/&gt;
&lt;Text text=&quot;{path: &apos;field&gt;Value&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.format&apos;}&quot; /&gt;</pre>
<p class="p">At the time the binding is resolved, <samp class="ph codeph">field&gt;Value</samp> refers to
<samp class="ph codeph">meta&gt;/dataServices/schema/0/entityType/0/com.sap.vocabularies.UI.v1.Badge/MainInfo/Value</samp>.
In the resulting <samp class="ph codeph">XML DOM</samp>, the references to the meta model are gone and
the type information including the constraints is inserted in the binding. This is shown
in the following example:</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;Label text=&quot;Phone&quot;/&gt;
&lt;Text text=&quot;{path : &apos;PhoneNumber&apos;, type : &apos;sap.ui.model.odata.type.String&apos;, constraints : {&apos;maxLength&apos;:&apos;30&apos;}}&quot; /&gt;
Custom Formatter Functions</pre>
<div class="section"><section class="section" type="Custom Formatter Functions"><h2 class="section_title" style="font-size: 1.15em;">Custom Formatter Functions</h2>

<p class="p">You can also write your own custom formatter functions. For information how you
access the model and path related to the current formatter call, see <span class="ph"><a class="xref" href="../../#/api/sap.ui.core.util.XMLPreprocessor.IContext" target="_top" alt="#/api/sap.ui.core.util.XMLPreprocessor.IContext" title="#/api/sap.ui.core.util.XMLPreprocessor.IContext">sap.ui.core.util.XMLPreprocessor.IContext</a></span>.</p>
<p class="p">The following code snippet shows a composite binding example. It assumes that the
structure of the meta model that is used corresponds to the structure in the example
and that <samp class="ph codeph">title&gt;</samp> refers to the header info&apos;s title property (line
2 in the code snippet):</p>
<pre class="pre codeblock prettyprint lang-js">                    
1   &quot;com.sap.vocabularies.UI.v1.HeaderInfo&quot;: {
2       &quot;Title&quot;: {
3           &quot;Label&quot;: {
4               &quot;String&quot;: &quot;Customer&quot;
5           },
6           &quot;Value&quot;: {
7               &quot;Path&quot;: &quot;CustomerName&quot;
8           }
9       }
10  }</pre>
<p class="p">The following code snippet shows a formatter function that can be used in composite
bindings either at root level (line 1), or for individual parts (Line 2). You can
also use it for a simple binding. In this case, it behaves in the same way as a
single part.</p>
<pre class="pre codeblock prettyprint">1   &lt;Text text=&quot;{path: &apos;title&gt;Label&apos;, formatter: &apos;formatParts&apos;}: {path: &apos;title&gt;Value&apos;, formatter: &apos;formatParts&apos;}&quot;/&gt;
2   &lt;Text text=&quot;{parts: [{path: &apos;title&gt;Label&apos;, formatter: &apos;formatParts&apos;}: {path: &apos;title&gt;Value&apos;}], formatter: &apos;formatParts&apos;}&quot;/&gt;</pre>
<p class="p">The following code snippet shows an example formatter function.</p>
<pre class="pre codeblock prettyprint lang-js">
1   /*
2    * Custom formatter function for complex bindings to demonstrate access to ith part of binding.
3    * Delegates to {@link sap.ui.model.odata.AnnotationHelper#format} and wraps label texts in
4    * square brackets. Joins parts together, separated by a space.
5    *
6    * @param {sap.ui.core.util.XMLPreprocessor.IContext} oInterface
7    *   the callback interface related to the current formatter call
8    * @param {...any} [vRawValue]
9    *   the raw value(s) from the meta model
10   * @returns {string}
11   *   the resulting string value to write into the processed XML
12   */
13  window.formatParts = function(oInterface, vRawValue) {
14      var i, aResult;
15
16      /*
17       * Delegates to {@link sap.ui.model.odata.AnnotationHelper#format} and wraps label texts
18       * in square brackets.
19       *
20       * @param {sap.ui.core.util.XMLPreprocessor.IContext|sap.ui.model.Context} oInterface
21       *   the callback interface related to the current formatter call
22       * @param {any} [vRawValue]
23       *   the raw value from the meta model
24       * @returns {string}
25       */
26      function formatLabelValue(oInterface, vRawValue) {
27        var sResult = sap.ui.model.odata.AnnotationHelper.format(oInterface, vRawValue);
28        return sMyString.endsWith(oInterface.getPath(), &quot;/Label&quot;)
29             ? &quot;[&quot;+ sResult + &quot;]&quot;
30             : sResult;
31      }
32  
33       try {
34          if(oInterface.getModel()) {
35              returnformatLabelValue(oInterface, vRawValue);
36          } else {
37              // root formatter for a composite binding
38              aResult = [];
39              // &quot;probe for the smallest non-negative integer&quot;
40              for (i = 0; oInterface.getModel(i); i += 1) {               
41                  aResult.push(
42                      // Note: arguments[i + 1] is the raw value of the ith part!
43                      formatLabelValue(oInterface.getInterface(i), arguments[i + 1])
44                  );
45              }
46              return aResult.join(&quot; &quot;);
47          }
48      } catch (e) {
49          return e.message;
50      }
51  }
52  window.formatParts.requiresIContext = true;</pre>
<p class="p">This example formatter opts to the extended signature (see line 51), which provides a
context interface as the first parameter. It distinguishes between root level calls
and others (see line 34), delegates to
<samp class="ph codeph">sap.ui.model.odata.AnnotationHelper#format</samp> (see line 27), and
wraps label texts in square brackets for demo purposes (see line 29). For root level
calls, it loops over all available parts (see line 40) and accesses each part (see
line 43). The demo code handles each part individually and joins the result, but in
practice some more complicated dependency between parts would be realistic.</p>
<p class="p">The delegation to <samp class="ph codeph">sap.ui.model.odata.AnnotationHelper#format</samp>
provides the raw value we already have at hand, even for root level calls (see
comment in line 42).</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">The custom formatter function needs to be accessible globally, because XML
templating cannot call formatter functions inside the view&apos;s controller. This
controller does not yet exist at the time of preprocessing. However, it is not
sufficient to simply put it into window (see line 8). You must put it into your
own namespace.</p></aside>
<p class="p">The example formatter has the following output:</p>
<pre class="pre codeblock prettyprint lang-js">
&lt;Text text=&quot;[Customer]: {CustomerName}&quot;/&gt;
&lt;Text text=&quot;[Customer] {CustomerName}&quot;/&gt;</pre>
<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p class="p">The colon (&quot;:&quot;) is taken over literally from the first composite binding which
consists of two bindings separated by a string literal.</p></aside>
</section></div>
<div class="section"><section class="section" type="Mixing Runtime Data and Meta Data Within a Single Binding"><h2 class="section_title" style="font-size: 1.15em;">Mixing Runtime Data and Meta Data Within a Single Binding</h2>

<p class="p">The following code snippet shows a single binding that mixes runtime data and meta
data. This will not work: The binding refers to the runtime and as runtime is not
available ar this point, XML templating cannot replace the binding. (In the example,
&quot;runtime&quot; stands for the name of the model at runtime. This would typically be the
default model and thus has no name.)</p>
<pre class="pre codeblock prettyprint">{= ${runtime&gt;value} &gt; ${meta&gt;threshold} }</pre>
<p class="p"><samp class="ph codeph">meta</samp> will no longer be available anymore, so this binding cannot
work as expected, but it will be evaluated every time the value changes and will
compare the value to <samp class="ph codeph">undefined</samp>.</p>
<p class="p">To solve this, a clear separation is required: One expression binding that refers to
meta data only and can be replaced by XML templating, and another expression binding
that refers to runtime data only and can be evaluated later on. These two bindings
need to be nested as follows:</p>
<pre class="pre codeblock prettyprint">{= &apos;{= ${runtime&lt;value} &gt; &apos; + ${meta&gt;threshold} + &apos; }&apos; }</pre>
<p class="p">XML templating replaces this with a kind of a partial evaluation of the original
mixed binding. By carefully putting the pieces into string literals and by taking
care of escaping, you have full control over this process of partial evaluation.
This is shown in the following examples, where the threshold value is assumed to be
a number:</p>
<p class="p">Expression binding with runtime data only:</p>
<pre class="pre codeblock prettyprint">{= ${runtime&gt;value} &gt; 42 }</pre>
<p class="p">Escaping for string constants:</p>
<pre class="pre codeblock prettyprint">{= &apos;{= \&apos;&apos; + ${meta&gt;A} + &apos;\&apos; + ${/B} } // --&gt; {= &apos;A&apos; + ${/B} }</pre>
<p class="p">Using the annotation helper:</p>
<pre class="pre codeblock prettyprint">{= &apos;{= $&apos; + ${path : &apos;meta&gt;value, formatter :
&apos;sap.ui.model.odata.AnnotationHelper.format&apos;} + &apos; &gt; &apos; + ${path : &apos;meta&gt;threshold&apos;,
formatter : &apos;sap.ui.model.odata.AnnotationHelper.format&apos;} + &apos; }&apos; }
// --&gt; {= ${path : &apos;path/to/property/value&apos;, type : &apos;sap.ui.model.odata.type.Int16&apos;} &gt; 42 }</pre>
</section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div></div><div class="linklist linklist"><div><div><a class="link" href="../../#/api/sap.ui.model.odata.AnnotationHelper" target="_top" alt="#/api/sap.ui.model.odata.AnnotationHelper" title="#/api/sap.ui.model.odata.AnnotationHelper"><samp class="ph codeph">sap.ui.model.odata.AnnotationHelper.format</samp></a></div></div><div><div><a class="link" href="../../#/api/sap.ui.core.util.XMLPreprocessor.IContext" target="_top" alt="#/api/sap.ui.core.util.XMLPreprocessor.IContext" title="#/api/sap.ui.core.util.XMLPreprocessor.IContext"><samp class="ph codeph">sap.ui.core.util.XML.Preprocessor.IContext</samp></a></div></div><div><a class="link" href="../../#/topic/5ee619fc1370463ea674ee04b65ed83b.html" title="The XML templating concept enables you to use an XML view as a template. This template is transformed by an XML preprocessor on the source level, the XML DOM, at runtime just before an OpenUI5 control tree is created from the XML source." target="_top">XML Templating</a></div><div><a class="link" href="../../#/topic/07e4b920f5734fd78fdaa236f26236d8.html" title="Data that is presented on the UI often has to be converted so that is human readable and fits to the locale of the user. On the other hand, data entered by the user has to be parsed and validated to be understood by the data source. For this purpose, you use formatters and data types." target="_top">Formatting, Parsing, and Validating Data</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>