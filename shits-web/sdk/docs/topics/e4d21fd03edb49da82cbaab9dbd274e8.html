<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 9: Adding a Detail-Detail Page</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we create a detail-detail page using sap.f.DynamicPage, which is opened by choosing a supplier from the detail page."><meta name="description" content="In this step, we create a detail-detail page using sap.f.DynamicPage, which is opened by choosing a supplier from the detail page."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"a59b3de038874f879cf20bfc3287bd7c.html","previousTopicHref":"e5ee491f69224f038a0c147480dbd436.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }
$('.collapsible').collapsify({"expandText":"Display Content","collapseText":"Hide Content","codeblockText":"Code Sample","codeblockCopyText":"Copy code to clipboard","codeblockSelectText":"Select code for copying to clipboard"});


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/c4de2df385174e58a689d9847c7553bd.html" title="In this tutorial, we showcase how to structure your OpenUI5 app using the layout patterns that comply with the latest SAP Fiori design guidelines." target="_top">SAP Fiori 2.0 App</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e5ee491f69224f038a0c147480dbd436.html" title="With routing implemented, the model of the detail page is updated for each product. In this step, we enhance the detail page to show information specific for the selected product." target="_top">Step 8: Enhancing the Detail Page</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/a59b3de038874f879cf20bfc3287bd7c.html" title="In this step, we create an additional page that is displayed in a separate fullscreen column." target="_top">Step 10: Adding More Pages</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loioe4d21fd03edb49da82cbaab9dbd274e8"><h1 class="title topictitle1" hidden>Step 9: Adding a Detail-Detail Page</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we create a detail-detail page using
<samp class="ph codeph">sap.f.DynamicPage</samp>, which is opened by choosing a supplier from the detail
page.</p>
<div class="section collapsible expanded" id="loioe4d21fd03edb49da82cbaab9dbd274e8__section_yfh_d31_12b"><section class="section collapsible expanded" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loioe4d21fd03edb49da82cbaab9dbd274e8__fig_zfh_d31_12b"><div class="figbody">

<img class="inline" id="loioe4d21fd03edb49da82cbaab9dbd274e8__image_agh_d31_12b" src="loio30466794b2164305a9693ccd23af0380_HiRes.gif">
</div><span class="figcap">Detail-detail page displaying the name of the selected supplier</span></div>
</section></div>
<div class="section" id="loioe4d21fd03edb49da82cbaab9dbd274e8__section_fd2_4dd_lbb">
<div class="section_title">Coding</div>
<p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.f.tutorial.fiori2.09/preview" target="_top" alt="#/sample/sap.f.tutorial.fiori2.09/preview" title="#/sample/sap.f.tutorial.fiori2.09/preview">SAP Fiori 2.0 App - Step 9</a></span>.</p>
<div class="section_title">webapp/view/DetailDetail.view.xml [NEW]</div>
<pre class="pre codeblock prettyprint lang-xml"><span class="ph emphasis emphasis">&lt;mvc:View
	controllerName=&quot;sap.ui.demo.fiori2.controller.DetailDetail&quot;
	xmlns=&quot;sap.f&quot;
	xmlns:m=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;DynamicPage toggleHeaderOnTitleClick=&quot;false&quot;&gt;
		&lt;title&gt;
			&lt;DynamicPageTitle&gt;
				&lt;heading&gt;
					&lt;m:FlexBox wrap=&quot;Wrap&quot; fitContainer=&quot;true&quot; alignItems=&quot;Center&quot;&gt;
						&lt;m:Title text=&quot;{products&gt;text}&quot; wrapping=&quot;true&quot; class=&quot;sapUiTinyMarginEnd&quot;/&gt;
					&lt;/m:FlexBox&gt;
				&lt;/heading&gt;
			&lt;/DynamicPageTitle&gt;
		&lt;/title&gt;
	&lt;/DynamicPage&gt;
&lt;/mvc:View&gt;</span></pre>
<p class="p">We create a detail-detail page view using <samp class="ph codeph">sap.f.DynamicPage</samp> with
only a title.</p>
<div class="section_title">webapp/controller/DetailDetail.controller.js [NEW]</div>
<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">sap.ui.define([
	&quot;sap/ui/model/json/JSONModel&quot;,
	&quot;sap/ui/core/mvc/Controller&quot;
], function (JSONModel, Controller) {
	&quot;use strict&quot;;

	return Controller.extend(&quot;sap.ui.demo.fiori2.controller.DetailDetail&quot;, {
		onInit: function () {
			var oOwnerComponent = this.getOwnerComponent();

			this.oRouter = oOwnerComponent.getRouter();
			this.oModel = oOwnerComponent.getModel();

			this.oRouter.getRoute(&quot;detailDetail&quot;).attachPatternMatched(this._onPatternMatch, this);
		},

		_onPatternMatch: function (oEvent) {
			this._supplier = oEvent.getParameter(&quot;arguments&quot;).supplier || this._supplier || &quot;0&quot;;
			this._product = oEvent.getParameter(&quot;arguments&quot;).product || this._product || &quot;0&quot;;

			this.getView().bindElement({
				path: &quot;/ProductCollectionStats/Filters/1/values/&quot; + this._supplier,
				model: &quot;products&quot;
			});
		},

		onExit: function () {
			this.oRouter.getRoute(&quot;detailDetail&quot;).detachPatternMatched(this._onPatternMatch, this);
		}
	});
});</span></pre>
<p class="p">We create the detail-detail page controller.</p>
<div class="section_title">webapp/manifest.json [MODIFY]</div>
<pre class="pre codeblock prettyprint lang-json">			...
			&quot;routes&quot;: [
				{
					&quot;pattern&quot;: &quot;:layout:&quot;,
					&quot;name&quot;: &quot;master&quot;,
					&quot;target&quot;: [
						&quot;master&quot;,
						&quot;detail&quot;
					]
				},
				{
					&quot;pattern&quot;: &quot;detail/{product}/{layout}&quot;,
					&quot;name&quot;: &quot;detail&quot;,
					&quot;target&quot;: [
						&quot;master&quot;,
						&quot;detail&quot;
					]
				}<span class="ph emphasis emphasis">,
				{
					&quot;pattern&quot;: &quot;detail/{product}/detailDetail/{supplier}/{layout}&quot;,
					&quot;name&quot;: &quot;detailDetail&quot;,
					&quot;target&quot;: [
						&quot;master&quot;,
						&quot;detail&quot;,
						&quot;detailDetail&quot;
					]
				}</span>
			],
			&quot;targets&quot;: {
				&quot;master&quot;: {
					&quot;viewName&quot;: &quot;Master&quot;,
					&quot;controlAggregation&quot;: &quot;beginColumnPages&quot;
				},
				&quot;detail&quot;: {
					&quot;viewName&quot;: &quot;Detail&quot;,
					&quot;controlAggregation&quot;: &quot;midColumnPages&quot;
				}<span class="ph emphasis emphasis">,
				&quot;detailDetail&quot;: {
					&quot;viewName&quot;: &quot;DetailDetail&quot;,
					&quot;controlAggregation&quot;: &quot;endColumnPages&quot;
				}</span>
			}
		}
	}
}</pre>
<p class="p">We add the detail-detail page to our existing routes in the
<span class="ph filepath">manifest.json</span>.</p>
<div class="section_title">webapp/view/Detail.view.xml [MODIFY]</div>
<pre class="pre codeblock prettyprint lang-xml">			...
			&lt;ObjectPageSection title=&quot;Suppliers&quot;&gt;
				&lt;subSections&gt;
					&lt;ObjectPageSubSection&gt;
						&lt;blocks&gt;
							&lt;m:Table
								id=&quot;suppliersTable&quot;
								items=&quot;{path : &apos;products&gt;/ProductCollectionStats/Filters/1/values&apos;}&quot;&gt;
								&lt;m:columns&gt;
									&lt;m:Column/&gt;
								&lt;/m:columns&gt;
								&lt;m:items&gt;
									&lt;m:ColumnListItem type=&quot;Navigation&quot;<span class="ph emphasis emphasis"> press=&quot;.onSupplierPress&quot;</span>&gt;
										&lt;m:cells&gt;
											&lt;m:ObjectIdentifier text=&quot;{products&gt;text}&quot;/&gt;
										&lt;/m:cells&gt;
									&lt;/m:ColumnListItem&gt;
								&lt;/m:items&gt;
							&lt;/m:Table&gt;
						&lt;/blocks&gt;
					&lt;/ObjectPageSubSection&gt;
				&lt;/subSections&gt;
			&lt;/ObjectPageSection&gt;
		&lt;/sections&gt;
		...</pre>
<p class="p">We add a <samp class="ph codeph">press</samp> event handler for each item in the
<span class="ph uicontrol">SUPPLIERS</span> table in the detail page.</p>
<div class="section_title">webapp/controller/Detail.controller.js [MODIFY]</div>
<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;<span class="ph emphasis emphasis">,
	&apos;sap/f/library&apos;</span>
], function (Controller<span class="ph emphasis emphasis">, fioriLibrary</span>) {
	&quot;use strict&quot;;

	return Controller.extend(&quot;sap.ui.demo.fiori2.controller.Detail&quot;, {
		onInit: function () {
			var oOwnerComponent = this.getOwnerComponent();

			this.oRouter = oOwnerComponent.getRouter();
			this.oModel = oOwnerComponent.getModel();

			this.oRouter.getRoute(&quot;master&quot;).attachPatternMatched(this._onProductMatched, this);
			this.oRouter.getRoute(&quot;detail&quot;).attachPatternMatched(this._onProductMatched, this);
<span class="ph emphasis emphasis">			this.oRouter.getRoute(&quot;detailDetail&quot;).attachPatternMatched(this._onProductMatched, this);</span>
		},

<span class="ph emphasis emphasis">		onSupplierPress: function (oEvent) {
			var supplierPath = oEvent.getSource().getBindingContext(&quot;products&quot;).getPath(),
				supplier = supplierPath.split(&quot;/&quot;).slice(-1).pop();

			this.oRouter.navTo(&quot;detailDetail&quot;, {layout: fioriLibrary.LayoutType.ThreeColumnsMidExpanded, supplier: supplier, product: this._product});
		},</span>

		_onProductMatched: function (oEvent) {
		...</pre>
<p class="p">We add an <samp class="ph codeph">onSupplierPress</samp> function in the detail page controller in order to
pass the data for the selected supplier and navigate to the detail-detail page.</p>
<div class="section_title">webapp/controller/App.controller.js [MODIFY]</div>
<pre class="pre codeblock prettyprint lang-js">		...
		onRouteMatched: function (oEvent) {
			var sRouteName = oEvent.getParameter(&quot;name&quot;),
				oArguments = oEvent.getParameter(&quot;arguments&quot;);

			// Save the current route name
			this.currentRouteName = sRouteName;
			this.currentProduct = oArguments.product;
<span class="ph emphasis emphasis">			this.currentSupplier = oArguments.supplier;</span>
		},

		onStateChanged: function (oEvent) {
			var bIsNavigationArrow = oEvent.getParameter(&quot;isNavigationArrow&quot;),
				sLayout = oEvent.getParameter(&quot;layout&quot;);

			// Replace the URL with the new layout if a navigation arrow was used
			if (bIsNavigationArrow) {
				this.oRouter.navTo(this.currentRouteName, {layout: sLayout, product: this.currentProduct<span class="ph emphasis emphasis">, supplier: this.currentSupplier</span>}, true);
			}
		},

		onExit: function () {
			this.oRouter.detachRouteMatched(this.onRouteMatched, this);
		}
	});
});</pre>
<p class="p">Finally, we pass data for the supplier in the detail-detail page.</p>
</div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/c4de2df385174e58a689d9847c7553bd.html" title="In this tutorial, we showcase how to structure your OpenUI5 app using the layout patterns that comply with the latest SAP Fiori design guidelines." target="_top">SAP Fiori 2.0 App</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e5ee491f69224f038a0c147480dbd436.html" title="With routing implemented, the model of the detail page is updated for each product. In this step, we enhance the detail page to show information specific for the selected product." target="_top">Step 8: Enhancing the Detail Page</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/a59b3de038874f879cf20bfc3287bd7c.html" title="In this step, we create an additional page that is displayed in a separate fullscreen column." target="_top">Step 10: Adding More Pages</a><br></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>