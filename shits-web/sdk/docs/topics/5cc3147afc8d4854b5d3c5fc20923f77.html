<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 14: Make Dialogs Bookmarkable</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we want to allow bookmarking of the dialog box that is opened when the user clicks the Sort button. The dialog should automatically open when the URL contains the query parameter showDialog."><meta name="description" content="In this step, we want to allow bookmarking of the dialog box that is opened when the user clicks the Sort button. The dialog should automatically open when the URL contains the query parameter showDialog."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"877d57e3b5654b19a2d2e5190dc43b0d.html","previousTopicHref":"39759878ae4f48dcad0cf34da1d299f0.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/39759878ae4f48dcad0cf34da1d299f0.html" title="In this step, we will create a button at the top of the table which will change the sorting of the table. When the current sorting state of the table is changed, the sorting state will be reflected in the URL. This illustrates how to make the table sorting bookmarkable." target="_top">Step 13: Make Table Sorting Bookmarkable</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/877d57e3b5654b19a2d2e5190dc43b0d.html" title="The Employees table displays employee data. However, the resumes of the employees are not accessible from this view yet. We could create a new route and a new view to visualize the resume again, but we could also simply reuse an existing route to cross-link the resume of a certain employee. In this step, we will add a feature that allows users to directly navigate to the resume of a certain employee. We will reuse the Resume page that we have created in an earlier step. This example illustrates that there can be multiple navigation paths that direct to the same page." target="_top">Step 15: Reuse an Existing Route</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio5cc3147afc8d4854b5d3c5fc20923f77"><h1 class="title topictitle1" hidden>Step 14: Make Dialogs Bookmarkable</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we want to allow bookmarking of the dialog box that is opened when the user clicks the <span class="ph uicontrol">Sort</span> button. The dialog
should automatically open when the URL contains the query parameter <samp class="ph codeph">showDialog</samp>. </p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio5cc3147afc8d4854b5d3c5fc20923f77__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio5cc3147afc8d4854b5d3c5fc20923f77__image_f13_zyc_4s" src="loioea8f2d0be1cf4582b2d637cd6d85eb63_LowRes.png">
</div><span class="figcap">Bookmark for a dialog</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo Kit
<span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.navigation.14/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.navigation.14/preview" title="#/sample/sap.ui.core.tutorial.navigation.14/preview">Routing and Navigation - Step
14</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="/controller/employee/overview/EmployeeOverviewContent.controller.js"><h2 class="section_title" style="font-size: 1.15em;">/controller/employee/overview/EmployeeOverviewContent.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/nav/controller/BaseController&quot;,
	&quot;sap/ui/model/Filter&quot;,
	&quot;sap/ui/model/FilterOperator&quot;,
	&quot;sap/ui/model/Sorter&quot;,
	&quot;sap/m/ViewSettingsDialog&quot;,
	&quot;sap/m/ViewSettingsItem&quot;
], function(
	BaseController,
	Filter,
	FilterOperator,
	Sorter,
	ViewSettingsDialog,
	ViewSettingsItem
) {
	&quot;use strict&quot;;
	return BaseController.extend(&quot;sap.ui.demo.nav.controller.employee.overview.EmployeeOverviewContent&quot;, {
		onInit: function () {
			...
		},
		_onRouteMatched: function (oEvent) {
			// save the current query state
			this._oRouterArgs = oEvent.getParameter(&quot;arguments&quot;);
			this._oRouterArgs[&quot;?query&quot;] = this._oRouterArgs[&quot;?query&quot;] || {};
			var oQueryParameter = this._oRouterArgs[&quot;?query&quot;];

			// search/filter via URL hash
			this._applySearchFilter(oQueryParameter.search);

			// sorting via URL hash
			this._applySorter(oQueryParameter.sortField, oQueryParameter.sortDescending);

			<span class="ph emphasis emphasis">// show dialog via URL hash
			if (oQueryParameter.showDialog) {
				this._oVSD.open();
			}</span>
			
		},
		onSortButtonPressed: function (oEvent) {
			<span class="ph emphasis emphasis">var oRouter = this.getRouter();
			this._oRouterArgs[&quot;?query&quot;].showDialog = 1;
			oRouter.navTo(&quot;employeeOverview&quot;, this._oRouterArgs);
</span>
		},
		...
		_initViewSettingsDialog: function () {
			var oRouter = this.getRouter();
			this._oVSD = new sap.m.ViewSettingsDialog(&quot;vsd&quot;, {
				confirm: function (oEvent) {
					var oSortItem = oEvent.getParameter(&quot;sortItem&quot;);
					this._oRouterArgs[&quot;?query&quot;].sortField = oSortItem.getKey();
					this._oRouterArgs[&quot;?query&quot;].sortDescending = oEvent.getParameter(&quot;sortDescending&quot;);
					delete this._oRouterArgs[&quot;?query&quot;].showDialog;
					oRouter.navTo(&quot;employeeOverview&quot;, this._oRouterArgs, true /*without history*/);
				}.bind(this)<span class="ph emphasis emphasis">,
				cancel: function (oEvent){
					delete this._oRouterArgs.query.showDialog;
					oRouter.navTo(&quot;employeeOverview&quot;, this._oRouterArgs, true /*without history*/);
				}.bind(this)</span>
			});
			...
		},
		...
	});
});</pre>
<p class="p">Once again we will update the <samp class="ph codeph">EmployeeOverviewContent</samp> controller to add support for the bookmarking of our sorting dialog. We
decide to choose a query parameter <samp class="ph codeph">showDialog</samp> that controls if the dialog is opened directly when we navigate to the
page with a deep link. Therefore, we extend the matched event handler for the <samp class="ph codeph">employeeOverview</samp> route. If the query
parameter <samp class="ph codeph">showDialog</samp> is set to <samp class="ph codeph">1</samp>, we open the dialog. We only have to make sure that the dialog does
not get closed again by the router as this behavior is the default when navigating.</p>
<p class="p">Next we change the <samp class="ph codeph">press</samp> handler of the sort button. In the <samp class="ph codeph">onSortButtonPressed</samp> function we set
<samp class="ph codeph">this._oRouterArgs[&quot;?query&quot;].showDialog = 1</samp> and call <samp class="ph codeph">navTo()</samp> to let the router do the job instead
of directly opening the dialog. Finally, we delete <samp class="ph codeph">this._oRouterArgs[&quot;?query&quot;].showDialog</samp> before calling
<samp class="ph codeph">navTo()</samp> in the <samp class="ph codeph">confirm</samp> and <samp class="ph codeph">cancel</samp> event handlers of the
<samp class="ph codeph">ViewSettingsDialog</samp>. This is important to make sure that the dialog does not open again by the matched
handler.</p>
<div class="p">We are now done with this step. Try to access the following pages:<ul class="ul" id="loio5cc3147afc8d4854b5d3c5fc20923f77__ul_lg2_dbd_4s">
<li class="li">
<p class="p"><samp class="ph codeph">webapp/index.html#/employees/overview?showDialog=1</samp></p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">webapp/index.html#/employees/overview?search=an&amp;sortField=EmployeeID&amp;sortDescending=true&amp;showDialog=1</samp></p>
</li>
</ul>As you can see, the dialog opens automatically if the parameter
<samp class="ph codeph">showDialog=1</samp> is added to the URL. That&#x2019;s exactly what we
wanted.</div>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/39759878ae4f48dcad0cf34da1d299f0.html" title="In this step, we will create a button at the top of the table which will change the sorting of the table. When the current sorting state of the table is changed, the sorting state will be reflected in the URL. This illustrates how to make the table sorting bookmarkable." target="_top">Step 13: Make Table Sorting Bookmarkable</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/877d57e3b5654b19a2d2e5190dc43b0d.html" title="The Employees table displays employee data. However, the resumes of the employees are not accessible from this view yet. We could create a new route and a new view to visualize the resume again, but we could also simply reuse an existing route to cross-link the resume of a certain employee. In this step, we will add a feature that allows users to directly navigate to the resume of a certain employee. We will reuse the Resume page that we have created in an earlier step. This example illustrates that there can be multiple navigation paths that direct to the same page." target="_top">Step 15: Reuse an Existing Route</a><br></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>