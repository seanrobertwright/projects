<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 14: Expression Binding</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="Expression binding allows you to display a value on the screen that has been calculated from values found in some model object. This way simple formatting or calculations can be inserted directly into the data binding string. In this example, we will change the color of the price depending on whether it is above or below some arbitrary threshold. The threshold value is also stored in the JSON model."><meta name="description" content="Expression binding allows you to display a value on the screen that has been calculated from values found in some model object. This way simple formatting or calculations can be inserted directly into the data binding string. In this example, we will change the color of the price depending on whether it is above or below some arbitrary threshold. The threshold value is also stored in the JSON model."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"284a036c8ff943238fb65bf5a2676fb7.html","previousTopicHref":"6c7c5c266b534e7ea9a28f861dc515f5.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/e5310932a71f42daa41f3a6143efca9c.html" title="In this tutorial, we will explain the concepts of data binding in OpenUI5." target="_top">Data Binding</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/6c7c5c266b534e7ea9a28f861dc515f5.html" title="Now we want to do something with that newly generated list. In most cases you will use a list to allow the selection of an item and then show the details of that item elsewhere. In order to achieve this, we use a form with relatively bound controls and bind it to the selected entity via element binding." target="_top">Step 13: Element Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/284a036c8ff943238fb65bf5a2676fb7.html" title="Instead of hard-coding a single template control, we use a factory function to generate different controls based on the data received at runtime. This approach is much more flexible and allows complex or heterogeneous data to be displayed." target="_top">Step 15: Aggregation Binding Using a Factory Function</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio5cff8d1c3fb84c5db7a00f2daca125af"><h1 class="title topictitle1" hidden>Step 14: Expression Binding</h1><div class="body conbody"><p class="shortdesc" hidden>Expression binding allows you to display a value on the screen that has been calculated
from values found in some model object. This way simple formatting or calculations can be
inserted directly into the data binding string. In this example, we will change the color of
the price depending on whether it is above or below some arbitrary threshold. The threshold
value is also stored in the JSON model. </p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio5cff8d1c3fb84c5db7a00f2daca125af__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio5cff8d1c3fb84c5db7a00f2daca125af__image_wgt_lxz_1t" src="loiob9fb758efb0a481cb88a412a0712972f_HiRes.png">
</div><span class="figcap">Values formatted</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the Demo Kit
<span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.databinding.14/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.databinding.14/preview" title="#/sample/sap.ui.core.tutorial.databinding.14/preview">Data Binding - Step 14</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/view/App.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/App.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">...
		&lt;/content&gt;
	&lt;/Panel&gt;
	&lt;Panel headerText=&quot;{i18n&gt;panel3HeaderText}&quot; class=&quot;sapUiResponsiveMargin&quot; width=&quot;auto&quot;&gt;
		&lt;content&gt;
			&lt;List headerText=&quot;{i18n&gt;productListTitle}&quot; items=&quot;{products&gt;/Products}&quot;&gt;
				&lt;items&gt;
					&lt;ObjectListItem
						press=&quot;.onItemSelected&quot;
						type=&quot;Active&quot;
						title=&quot;{products&gt;ProductName}&quot;
						number=&quot;{
							parts: [
								{path: &apos;products&gt;UnitPrice&apos;},
								{path: &apos;/currencyCode&apos;}
							],
							type: &apos;sap.ui.model.type.Currency&apos;,
							formatOptions: { showMeasure: false }
						}&quot;
						numberUnit=&quot;{/currencyCode}&quot;
<span class="ph emphasis emphasis">						numberState=&quot;{= ${products&gt;UnitPrice} &gt; ${/priceThreshold} ? &apos;Error&apos; : &apos;Success&apos; }&quot;&gt;
</span>
						&lt;attributes&gt;
							&lt;ObjectAttribute text=&quot;{products&gt;QuantityPerUnit}&quot;/&gt;
							&lt;ObjectAttribute title=&quot;{i18n&gt;stockValue}&quot;
								text=&quot;{
									parts: [
										{path: &apos;products&gt;UnitPrice&apos;},
										{path: &apos;products&gt;UnitsInStock&apos;},
										{path: &apos;/currencyCode&apos;}
									],
									formatter: &apos;.formatStockValue&apos;
								}&quot;/&gt;
						&lt;/attributes&gt;
					&lt;/ObjectListItem&gt;
				&lt;/items&gt;
			&lt;/List&gt;
		&lt;/content&gt;
	&lt;/Panel&gt;
...</pre>
<p class="p">In the XML view, we add a new <samp class="ph codeph">numberState</samp> property to the
<samp class="ph codeph">ObjectListItem</samp> element within the <samp class="ph codeph">List</samp>. The
value of this property is an expression that will be evaluated for each item.</p>
</section></div>
<div class="section"><section class="section" type="webapp/index.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/index.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.require([
	&quot;sap/ui/model/json/JSONModel&quot;,
	&quot;sap/ui/core/mvc/XMLView&quot;,
	&quot;sap/ui/model/resource/ResourceModel&quot;
], function (JSONModel, XMLView, ResourceModel) {
	&quot;use strict&quot;;

	// Attach an anonymous function to the SAPUI5 &apos;init&apos; event
	sap.ui.getCore().attachInit(function () {

		var oProductModel = new JSONModel();
		oProductModel.loadData(&quot;./model/Products.json&quot;);
		sap.ui.getCore().setModel(oProductModel, &quot;products&quot;);

		var oModel = new JSONModel({
			firstName: &quot;Harry&quot;,
			lastName: &quot;Hawk&quot;,
			enabled: true,
			address: {
				street: &quot;Dietmar-Hopp-Allee 16&quot;,
				city: &quot;Walldorf&quot;,
				zip: &quot;69190&quot;,
				country: &quot;Germany&quot;
			},
			&quot;salesToDate&quot;: 12345.6789,
<span class="ph emphasis emphasis">			&quot;priceThreshold&quot;: 20,</span>
			&quot;currencyCode&quot;: &quot;EUR&quot;
		});

		// Assign the model object to the SAPUI5 core
		sap.ui.getCore().setModel(oModel);

		var oResourceBundle = new ResourceModel({
			bundleName: &quot;sap.ui.demo.db.i18n.i18n&quot;
		});

		sap.ui.getCore().setModel(oResourceBundle, &quot;i18n&quot;);

		// Display the XML view called &quot;App&quot;
		var oView = new XMLView({
			viewName: &quot;sap.ui.demo.db.view.App&quot;
		}).placeAt(&quot;content&quot;);

		// Register the view with the message manager
		sap.ui.getCore().getMessageManager().registerObject(oView, true);

		// Insert the view into the DOM
		oView.placeAt(&quot;content&quot;);
	});
});
</pre>
<p class="p">We add a new property called <samp class="ph codeph">priceThreshold</samp> against which each
invoice value will be checked.</p>
<p class="p"> As a result of binding an expression to the <samp class="ph codeph">numberState</samp> property, the error
status (color) of the price field will change depending on the invoice value.</p>
<div class="p">Look at the following two expressions:<ul class="ul" id="loio5cff8d1c3fb84c5db7a00f2daca125af__ul_r51_lrr_vs">
<li class="li">
<p class="p"><samp class="ph codeph">numberState=&quot;{= ${products&gt;UnitPrice} &gt; ${/priceThreshold} ? &apos;Error&apos; :
&apos;Success&apos; }&quot;</samp></p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">numberState=&quot;{= ${products&gt;UnitPrice} &lt;= ${/priceThreshold} ? &apos;Success&apos; :
&apos;Error&apos; }&quot;</samp></p>
</li>
</ul> Can you see why one of these expressions will work, and the other will not? </div>
<p class="p">Logically, both expressions are identical; yet the first one works, and the second
does not: it produces only an empty screen and an &quot;Invalid XML&quot; message in the
browser&apos;s console&#x2026; Hmmm, what&apos;s going on here?</p>
<p class="p">In order to understand why this situation occurs, you must understand how XML files are
parsed.</p>
<p class="p">When an XML file is parsed, certain characters have a special (that is, high
priority) meaning to the XML parser. When such characters are encountered, they are
<span class="ph emphasis emphasis">always</span> interpreted to be part of the XML definition itself
and not part of any other content that might exist within the XML document.</p>
<p class="p">As soon as the XML parser encounters one of these high-priority characters (in this
case, a less-than (<samp class="ph codeph">&lt;</samp>) character), it will always be interpreted
as the start of a new XML tag &#x2013; irrespective of any other meaning that character
might have within the context of the expression. This is known as a <span class="ph emphasis emphasis">syntax
collision</span>. </p>
<p class="p">In this case, the collision occurs between the syntax of XML and the syntax of the
JavaScript-like expression language used by <span class="ph"><span class="ph pname">OpenUI5</span></span>.</p>
<p class="p">Therefore, this statement fails because the less-than character is interpreted as the start of
an XML tag: <samp class="ph codeph">numberState=&quot;{= ${products&gt;UnitPrice} &lt;=
${/priceThreshold} ? &apos;Success&apos; : &apos;Error&apos; }&quot;</samp></p>
<div class="p">This particular problem can be avoided in one of two ways:<ul class="ul" id="loio5cff8d1c3fb84c5db7a00f2daca125af__ul_ih1_bxr_vs">
<li class="li">
<p class="p">Reverse the logic of the condition (use &quot;greater than or equal to&quot;
instead of &quot;less than&quot;)</p>
</li>
<li class="li">
<p class="p"> Use the escaped value for the less-than character: <samp class="ph codeph">numberState=&quot;{=
${products&gt;UnitPrice} &amp;lt;= ${/priceThreshold} ? &apos;Success&apos; :
&apos;Error&apos; }&quot;</samp>
</p>
</li>
</ul>Since the use of an escaped character is not so easy to read, the preferred
approach is to reverse the logic of the condition and use a greater-than character
instead.</div>
<p class="p">The ampersand (<samp class="ph codeph">&amp;</samp>) character also has a high priority meaning to the XML parser. This character will always be interpreted to mean
&quot;The start of an escaped character&quot;. So if you wish to use the Boolean <samp class="ph codeph">AND</samp> operator (<samp class="ph codeph">&amp;&amp;</samp>) in a
condition, you must escape both ampersand characters (<samp class="ph codeph">&amp;amp;&amp;amp;</samp>).</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/e5310932a71f42daa41f3a6143efca9c.html" title="In this tutorial, we will explain the concepts of data binding in OpenUI5." target="_top">Data Binding</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/6c7c5c266b534e7ea9a28f861dc515f5.html" title="Now we want to do something with that newly generated list. In most cases you will use a list to allow the selection of an item and then show the details of that item elsewhere. In order to achieve this, we use a form with relatively bound controls and bind it to the selected entity via element binding." target="_top">Step 13: Element Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/284a036c8ff943238fb65bf5a2676fb7.html" title="Instead of hard-coding a single template control, we use a factory function to generate different controls based on the data received at runtime. This approach is much more flexible and allows complex or heterogeneous data to be displayed." target="_top">Step 15: Aggregation Binding Using a Factory Function</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/daf6852a04b44d118963968a1239d2c0.html" title="Expression binding is an enhancement of the OpenUI5 binding syntax, which allows for providing expressions instead of custom formatter functions." target="_top">Expression Binding</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>