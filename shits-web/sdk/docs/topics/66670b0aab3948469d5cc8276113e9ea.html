<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 4: Add a Back Button to Not Found Page</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="When we are on the Not Found page because of an invalid hash, we want to get back to our app to select another page. Therefore, we will add a Back button to the Not Found view and make sure that the user gets redirected to either the previous page or the overview page when the Back button is pressed."><meta name="description" content="When we are on the Not Found page because of an invalid hash, we want to get back to our app to select another page. Therefore, we will add a Back button to the Not Found view and make sure that the user gets redirected to either the previous page or the overview page when the Back button is pressed."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"d9efab307ecc42b180b12cc8956e22d7.html","previousTopicHref":"e047e0596e8a4a1db50f4a53c11f4276.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e047e0596e8a4a1db50f4a53c11f4276.html" title="Sometimes it is important to display an indication that the requested resource was not found. To give you an example: If a user tries to access an invalid pattern which does not match any of the configured routes, the user is notified that something went wrong. You might also know this as a &#x201C;404&#x201D; or Not Found Page from traditional web pages. In this step, we will implement a feature that detects invalid hashes and visualizes this in a nice way." target="_top">Step 3: Catch Invalid Hashes</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/d9efab307ecc42b180b12cc8956e22d7.html" title="In this step, you will learn more about targets and how to display a target from the routing configuration manually." target="_top">Step 5: Display a Target Without Changing the Hash</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio66670b0aab3948469d5cc8276113e9ea"><h1 class="title topictitle1" hidden>Step 4: Add a <span class="ph uicontrol">Back</span> Button to <span class="ph uicontrol">Not Found</span> Page</h1><div class="body conbody"><p class="shortdesc" hidden>When we are on the <span class="ph uicontrol">Not Found</span> page because of an invalid hash, we want to get back
to our app to select another page. Therefore, we will add a <span class="ph uicontrol">Back</span> button to the <span class="ph uicontrol">Not
Found</span> view and make sure that the user gets redirected to either the previous page
or the overview page when the <span class="ph uicontrol">Back</span> button is pressed.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio66670b0aab3948469d5cc8276113e9ea__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio66670b0aab3948469d5cc8276113e9ea__image_ofr_pbw_zs" src="loio1cbb1ebea9e242ffae22d7172b91e241_LowRes.png">
</div><span class="figcap"><span class="ph uicontrol">Not Found</span> page with <span class="ph uicontrol">Back</span>
button</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo Kit
<span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.navigation.04/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.navigation.04/preview" title="#/sample/sap.ui.core.tutorial.navigation.04/preview">Routing and Navigation - Step
4</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/view/NotFound.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/NotFound.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName=&quot;sap.ui.demo.nav.controller.NotFound&quot;
	xmlns=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;MessagePage
		title=&quot;{i18n&gt;NotFound}&quot;
		text=&quot;{i18n&gt;NotFound.text}&quot;
		description=&quot;{i18n&gt;NotFound.description}&quot;
		<span class="ph emphasis emphasis">showNavButton=&quot;true&quot;
		navButtonPress=&quot;onNavBack&quot;</span>/&gt;
&lt;/mvc:View&gt;</pre>
<p class="p">In the <samp class="ph codeph">NotFound</samp> view, we set the property
<samp class="ph codeph">showNavButton</samp> of the <samp class="ph codeph">MessagePage</samp> control to
<samp class="ph codeph">true</samp> to automatically display the <span class="ph uicontrol">Back</span> button. We also
add an event handler function <samp class="ph codeph">onNavBack</samp> to the
<samp class="ph codeph">navButtonPress</samp> event of the control. The
<samp class="ph codeph">onNavBack</samp> function will handle the actual back navigation. We
could directly add this function to the view&#x2019;s controller. However, we are smart
enough to anticipate that we might need the same handler function for different
views. DRY (<span class="q">&#x201C;Don&#x2019;t Repeat Yourself&#x201D;</span>) is the right approach for us, so let&#x2019;s
create a <samp class="ph codeph">BaseController</samp> from which all other controllers will
inherit. </p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/BaseController.js (New)"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/BaseController.js (New)</h2>

<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
	&quot;sap/ui/core/routing/History&quot;,
	&quot;sap/ui/core/UIComponent&quot;
], function(Controller, History, UIComponent) {
	&quot;use strict&quot;;

	return Controller.extend(&quot;sap.ui.demo.nav.controller.BaseController&quot;, {

		getRouter : function () {
			return UIComponent.getRouterFor(this);
		},

		onNavBack: function () {
			var oHistory, sPreviousHash;

			oHistory = History.getInstance();
			sPreviousHash = oHistory.getPreviousHash();

			if (sPreviousHash !== undefined) {
				window.history.go(-1);
			} else {
				this.getRouter().navTo(&quot;appHome&quot;, {}, true /*no history*/);
			}
		}

	});

});
</span></pre>
<p class="p">Create a new <samp class="ph codeph">BaseController.js</samp> file in the
<samp class="ph codeph">webapp/controller</samp> folder. The base controller implements a set
of functions that are reused by its subclasses. The <samp class="ph codeph">onNavBack</samp>
handler is a great example of code that we don&#x2019;t want to duplicate in our
controllers for each page that has a back navigation.</p>
<p class="p">The function checks if there is a previous hash value in the app history. If so, it redirects to the previous hash via the browser&#x2019;s native
<samp class="ph codeph">History</samp> API. In case there is no previous hash we simply use the router to navigate to the route <samp class="ph codeph">appHome</samp>
which is our home view.</p>
<p class="p">The third parameter of <samp class="ph codeph">navTo(&quot;appHome&quot;, {}, true /*no history*/);</samp> has the value <samp class="ph codeph">true</samp> and makes sure that the hash is
replaced. With the line <samp class="ph codeph">sap.ui.core.UIComponent.getRouterFor(this)</samp> you can easily access your component&#x2019;s router throughout the
app. To make it even more comfortable, we also add a handy shortcut <samp class="ph codeph">getRouter</samp> to the base controller. This function is now
available in each subclass as well. It is also used in the <samp class="ph codeph">onNavBack</samp> handler to get a reference to the router before calling
<samp class="ph codeph">navTo</samp>. We now have to implement the reuse in all other controllers.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">In <span class="ph"><span class="ph pname">OpenUI5</span></span> there are multiple options to reuse code. We recommend to use a base controller
for such helper methods because this allows us to decoratively use the <samp class="ph codeph">onNavBack</samp> handler directly in any XML view without
adding additional code to the controller. Our base controller is an abstract controller that will not be instantiated in any view.
Therefore, the naming convention <samp class="ph codeph">*.controller.js</samp> does not apply, and we can just call the file
<samp class="ph codeph">BaseController.js</samp>. By not using the naming convention <samp class="ph codeph">*.controller.js</samp> we can even prevent any usage in
views.</p></aside>
</section></div>
<div class="section"><section class="section" type="webapp/controller/NotFound.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/NotFound.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	<span class="ph emphasis emphasis">&quot;sap/ui/demo/nav/controller/BaseController&quot;
</span>
], function (<span class="ph emphasis emphasis">BaseController</span>) {
	&quot;use strict&quot;;
	return <span class="ph emphasis emphasis">BaseController</span>.extend(&quot;sap.ui.demo.nav.controller.NotFound&quot;, {
		onInit: function () {
		}
	});
});</pre>
<p class="p">In order to reuse the base controller implementation, we have to change the
dependency from <samp class="ph codeph">sap/ui/core/mvc/Controller</samp> to
<samp class="ph codeph">sap/ui/demo/nav/controller/BaseController</samp> and directly extend
the base controller.</p>
<p class="p">At this point you can open <samp class="ph codeph">index.html#/thisIsInvalid</samp> in your browser
and press the <span class="ph uicontrol">Back</span> button to see what happens. You will be redirected to the
app&#x2019;s home page that is matched by the route <samp class="ph codeph">appHome</samp> as you opened
the <span class="ph uicontrol">Not Found</span> page with an invalid hash. If you change the hash to something
invalid when you are on the home page of the app, you will also go to the <span class="ph uicontrol">Not
Found</span> page but with a history entry. When you press back, you will get to
the home page again, but this time with a native history navigation.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/App.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/App.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	<span class="ph emphasis emphasis">&quot;sap/ui/demo/nav/controller/BaseController&quot;
</span>
], function (<span class="ph emphasis emphasis">BaseController</span>) {
	&quot;use strict&quot;;
	return <span class="ph emphasis emphasis">BaseController</span>.extend(&quot;sap.ui.demo.nav.controller.App&quot;, {
		onInit: function () {
		}
	});
});</pre>
<p class="p">To be consistent, we will now extend all of our controllers with the base controller.
Change the app controller as described above.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/Home.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/Home.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	<span class="ph emphasis emphasis">&quot;sap/ui/demo/nav/controller/BaseController&quot;
</span>
], function (<span class="ph emphasis emphasis">BaseController</span>) {
	&quot;use strict&quot;;
	return <span class="ph emphasis emphasis">BaseController</span>.extend(&quot;sap.ui.demo.nav.controller.Home&quot;, {
	});
});</pre>
<p class="p">The same applies to our home controller, we also extend it with the base controller
now.</p>
<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p class="p">In this step we have added the <span class="ph uicontrol">Back</span> button. The user can always use the
browser&#x2019;s native <span class="ph uicontrol">Back</span> button as well. Each app can freely configure the
behavior of the <span class="ph uicontrol">Back</span> button. However, there is no clean way to apply the
same logic for the browser&#x2019;s <span class="ph uicontrol">Back</span> button in single-page applications.
Tweaking the browser history or using other quirks for cancelling backward or
forward navigation is not recommended due to the implementation details of the
browsers. The browser&#x2019;s <span class="ph uicontrol">Back</span> button always uses the browser history while
the <span class="ph uicontrol">Back</span> button of the app can make use of the browser history
<span class="ph emphasis emphasis">or</span> can implement its own navigation logic. Make sure to
understand this difference and only control the <span class="ph uicontrol">Back</span> button inside the
app.</p></aside>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;"> Conventions</h2>

<ul class="ul" id="loio66670b0aab3948469d5cc8276113e9ea__ul_nh5_ybb_nr">
<li class="li">
<p class="p">Implement a global <samp class="ph codeph">onNavBack</samp> handler for back navigation in
your app</p>
</li>
<li class="li">
<p class="p">Query the history and go to the home page if there is no history available
for the current app</p>
</li>
</ul>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e047e0596e8a4a1db50f4a53c11f4276.html" title="Sometimes it is important to display an indication that the requested resource was not found. To give you an example: If a user tries to access an invalid pattern which does not match any of the configured routes, the user is notified that something went wrong. You might also know this as a &#x201C;404&#x201D; or Not Found Page from traditional web pages. In this step, we will implement a feature that detects invalid hashes and visualizes this in a nice way." target="_top">Step 3: Catch Invalid Hashes</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/d9efab307ecc42b180b12cc8956e22d7.html" title="In this step, you will learn more about targets and how to display a target from the routing configuration manually." target="_top">Step 5: Display a Target Without Changing the Hash</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/3d18f20bd2294228acb6910d8e8a5fb5.html" title="OpenUI5 offers hash-based navigation, which allows you to build single-page apps where the navigation is done by changing the hash. In this way the browser does not have to reload the page; instead there is a callback to which the app and especially the affected view can react. A hash string is parsed and matched against patterns which will then inform the handlers." target="_top">Routing and Navigation</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>