<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 13: Make Table Sorting Bookmarkable</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we will create a button at the top of the table which will change the sorting of the table. When the current sorting state of the table is changed, the sorting state will be reflected in the URL. This illustrates how to make the table sorting bookmarkable."><meta name="description" content="In this step, we will create a button at the top of the table which will change the sorting of the table. When the current sorting state of the table is changed, the sorting state will be reflected in the URL. This illustrates how to make the table sorting bookmarkable."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"5cc3147afc8d4854b5d3c5fc20923f77.html","previousTopicHref":"e85da535ea19430a90c381f3c2bd748e.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e85da535ea19430a90c381f3c2bd748e.html" title="In this step we will make the search bookmarkable. This allows users to search for employees in the Employees table and they can bookmark their search query or share the URL." target="_top">Step 12: Make a Search Bookmarkable</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/5cc3147afc8d4854b5d3c5fc20923f77.html" title="In this step, we want to allow bookmarking of the dialog box that is opened when the user clicks the Sort button. The dialog should automatically open when the URL contains the query parameter showDialog." target="_top">Step 14: Make Dialogs Bookmarkable</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio39759878ae4f48dcad0cf34da1d299f0"><h1 class="title topictitle1" hidden>Step 13: Make Table Sorting Bookmarkable</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we will create a button at the top of the table which will change the sorting of the table. When the current sorting state of the
table is changed, the sorting state will be reflected in the URL. This illustrates how to make the table sorting bookmarkable.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio39759878ae4f48dcad0cf34da1d299f0__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio39759878ae4f48dcad0cf34da1d299f0__image_y2g_qcw_zs" src="loio7ec54ef9b041497aaa70694e80016a9c_LowRes.png">
</div><span class="figcap">Bookmarkable search and sorting</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo Kit
<span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.navigation.13/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.navigation.13/preview" title="#/sample/sap.ui.core.tutorial.navigation.13/preview">Routing and Navigation - Step
13</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/employee/overview/EmployeeOverviewContent.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/employee/overview/EmployeeOverviewContent.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/nav/controller/BaseController&quot;,
	&quot;sap/ui/model/Filter&quot;,
	&quot;sap/ui/model/FilterOperator&quot;,
	&quot;sap/ui/model/Sorter&quot;,
	&quot;sap/m/ViewSettingsDialog&quot;,
	&quot;sap/m/ViewSettingsItem&quot;
], function(
	BaseController,
	Filter,
	FilterOperator,
	Sorter,
	ViewSettingsDialog,
	ViewSettingsItem
) {
	&quot;use strict&quot;;
	return BaseController.extend(&quot;sap.ui.demo.nav.controller.employee.overview.EmployeeOverviewContent&quot;, {
		onInit: function () {
			...
		},
		_onRouteMatched: function (oEvent) {
			// save the current query state
			this._oRouterArgs = oEvent.getParameter(&quot;arguments&quot;);
			this._oRouterArgs[&quot;?query&quot;] = this._oRouterArgs[&quot;?query&quot;] || {};
			var oQueryParameter = this._oRouterArgs[&quot;?query&quot;];

			// search/filter via URL hash
			this._applySearchFilter(oQueryParameter.search);

			<span class="ph emphasis emphasis">// sorting via URL hash
			this._applySorter(oQueryParameter.sortField, oQueryParameter.sortDescending);</span>
			
		},
		...
		_initViewSettingsDialog: function () {
			var oRouter = this.getRouter();
			this._oVSD = new sap.m.ViewSettingsDialog(&quot;vsd&quot;, {
				confirm: function (oEvent) {
					var oSortItem = oEvent.getParameter(&quot;sortItem&quot;);
					<span class="ph emphasis emphasis">this._oRouterArgs[&quot;?query&quot;].sortField = oSortItem.getKey();
					this._oRouterArgs[&quot;?query&quot;].sortDescending = oEvent.getParameter(&quot;sortDescending&quot;);
					oRouter.navTo(&quot;employeeOverview&quot;, this._oRouterArgs, true /*without history*/);</span>
				}.bind(this) 
			});
			...
		},
		...
	});
});</pre>
<p class="p">We enhance the <samp class="ph codeph">EmployeeOverviewContent</samp> controller further to add support for bookmarking the table&#x2019;s sorting options. We expect
two query parameters <samp class="ph codeph">sortField</samp> and <samp class="ph codeph">sortDescending</samp> from the URL for configuring the sorting of the
table. In the matched handler of the route <samp class="ph codeph">employeeOverview</samp>, we store the query parameter in the
<samp class="ph codeph">oQueryParameter</samp> variable and add an additional call to <samp class="ph codeph">this._applySorter(oQueryParameter.sortField,
oQueryParameter.sortDescending)</samp> . This triggers the sorting action based on the two query parameters
<samp class="ph codeph">sortField</samp> and <samp class="ph codeph">sortDescending</samp> from the URL.</p>
<p class="p">Next we change the <samp class="ph codeph">confirm</samp> event handlers of our <samp class="ph codeph">ViewSettingsDialog</samp>. The <samp class="ph codeph">confirm</samp> handler
updates the current router arguments with the parameters from the event accordingly. Then we call
<samp class="ph codeph">oRouter.navTo(&quot;employeeOverview&quot;, this._oRouterArgs, true)</samp> with the updated router arguments to persist the new
sorting parameters in the URL. Both the previous arguments (i.e. <samp class="ph codeph">search</samp>) and the new arguments for the sorting will
then be handled by the matched event handler for the <samp class="ph codeph">employeeOverview</samp> route.</p>
<div class="p">Congratulations! Even the sorting options of the table can now be bookmarked. Try to
access the following pages: <ul class="ul" id="loio39759878ae4f48dcad0cf34da1d299f0__ul_ec5_25v_ns">
<li class="li">
<p class="p"><samp class="ph codeph">webapp/index.html#/employees/overview?sortField=EmployeeID&amp;sortDescending=true</samp></p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">webapp/index.html#/employees/overview?search=an&amp;sortField=EmployeeID&amp;sortDescending=true</samp></p>
</li>
</ul> When changing the table&#x2019;s sorting options, you will see that the hash updates
accordingly.</div>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/e85da535ea19430a90c381f3c2bd748e.html" title="In this step we will make the search bookmarkable. This allows users to search for employees in the Employees table and they can bookmark their search query or share the URL." target="_top">Step 12: Make a Search Bookmarkable</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/5cc3147afc8d4854b5d3c5fc20923f77.html" title="In this step, we want to allow bookmarking of the dialog box that is opened when the user clicks the Sort button. The dialog should automatically open when the URL contains the query parameter showDialog." target="_top">Step 14: Make Dialogs Bookmarkable</a><br></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>