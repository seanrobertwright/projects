<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 11: Testing User Input</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, we will write a test that simulates a user search. We will enter the search string into the search field and check if the correct results are shown in worklist table."><meta name="description" content="In this step, we will write a test that simulates a user search. We will enter the search string into the search field and check if the correct results are shown in worklist table."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"0c270b45dd904429ba634656e3a37a73.html","previousTopicHref":"07c97a2e497d443eb6fa74bb9445ab9c.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/07c97a2e497d443eb6fa74bb9445ab9c.html" title="In this step, we will step back from our tests and application features that we have implemented so far and add another important piece of test code: The test suite page. A test suite can execute multiple tests and collect the results. This comes in handy for automatic tools in a continuous integration process." target="_top">Step 10: Test Suite and Automated Testing</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/0c270b45dd904429ba634656e3a37a73.html" title="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial." target="_top">Step 12: Adding a Search</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio92959b10ecf14582b65eaadb40571156"><h1 class="title topictitle1" hidden>Step 11: Testing User Input</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, we will write a test that simulates a user search. We will enter the
search string into the search field and check if the correct results are shown in worklist
table.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio92959b10ecf14582b65eaadb40571156__fig_k3l_yjj_sx"><div class="figbody">

<img class="inline" id="loio92959b10ecf14582b65eaadb40571156__image_k5p_kkj_sx" src="loio2d8ec1ca920948989b9d50d28f0e78e4_LowRes.png">
</div><span class="figcap">Testing user input in a search field</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the Demo Kit <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.testing.11/preview" target="_top" alt="#/sample/sap.m.tutorial.testing.11/preview" title="#/sample/sap.m.tutorial.testing.11/preview">Testing - Step 11</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="test/integration/WorklistJourney.js"><h2 class="section_title" style="font-size: 1.15em;">test/integration/WorklistJourney.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/test/opaQunit&quot;,
	&quot;./pages/Worklist&quot;
], function (opaTest) {
	&quot;use strict&quot;;

	QUnit.module(&quot;Posts&quot;);

	opaTest(&quot;Should see the table with all posts&quot;, function (Given, When, Then) {
		// Arrangements
		Given.iStartMyApp();

		// Assertions
		Then.onTheWorklistPage.theTableShouldHavePagination().
			and.theTitleShouldDisplayTheTotalAmountOfItems();
	});

	opaTest(&quot;Should be able to load more items&quot;, function (Given, When, Then) {
		//Actions
		When.onTheWorklistPage.iPressOnMoreData();

		// Assertions
		Then.onTheWorklistPage.theTableShouldHaveAllEntries();
	});
	<span class="ph emphasis emphasis">opaTest(&quot;Should be able to search for items&quot;, function (Given, When, Then) {
		//Actions
		When.onTheWorklistPage.iSearchFor(&quot;Bear&quot;);

		// Assertions
		Then.onTheWorklistPage.theTableHasOneItem();

		// Cleanup
		Then.iTeardownMyApp();
	});
</span>
	}
);</pre>
<p class="p">In this example, we extend the <span class="ph filepath">WorklistJourney.js</span> file with a new test
<samp class="ph codeph">&quot;Should be able to enter text into the search field&quot;</samp>. The
action within this test simulates a user entering text into a search field, so we
pass a search string <samp class="ph codeph">&quot;Bear&quot;</samp> to this action. It is important to move
the <samp class="ph codeph">Teardown</samp> step to the last test, otherwise our app would be
destroyed and the test would not be able to find the
<span class="ph uicontrol">Statistics</span> tab.</p>
<p class="p">Delete <samp class="ph codeph">.and.iTeardownMyApp();</samp> from the previous test in the file and add the new test case.</p>
</section></div>
<div class="section"><section class="section" type="test/integration/pages/Worklist.js"><h2 class="section_title" style="font-size: 1.15em;">test/integration/pages/Worklist.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.require([
		&apos;sap/ui/test/Opa5&apos;,
		&apos;sap/ui/test/matchers/AggregationLengthEquals&apos;,
		&apos;sap/ui/test/matchers/I18NText&apos;,
		&apos;sap/ui/test/matchers/BindingPath&apos;,
		&apos;sap/ui/demo/bulletinboard/test/integration/pages/Common&apos;,
		&apos;sap/ui/test/actions/Press&apos;<span class="ph emphasis emphasis">,
		&apos;sap/ui/test/actions/EnterText&apos;</span>
	],
	function (Opa5,
			  AggregationLengthEquals,
			  I18NText,
			  BindingPath,
			  Common,
			  Press<span class="ph emphasis emphasis">,
			  EnterText</span>) {
		&quot;use strict&quot;;

		var sViewName = &quot;Worklist&quot;,
			sTableId = &quot;table&quot;;

		Opa5.createPageObjects({
			onTheWorklistPage: {
				baseClass: Common,
				actions: {
...
					}<span class="ph emphasis emphasis">,
					
					iSearchFor: function (sSearchString) {
						return this.waitFor({
							id: &quot;searchField&quot;,
							viewName: sViewName,
							actions: new EnterText({
								text: sSearchString
							}),
							errorMessage: &quot;SearchField was not found.&quot;
						});
					}
</span>
				},
				assertions: {
					<span class="ph emphasis emphasis">theTableHasOneItem: function () {
						return this.waitFor({
							id: sTableId,
							viewName: sViewName,
							matchers: new AggregationLengthEquals({
								name: &quot;items&quot;,
								length: 1
							}),
							success: function () {
								Opa5.assert.ok(true, &quot;The table contains one corresponding entry&quot;);
							},
							errorMessage: &quot;The table does not contain one item.&quot;
						});
					},</span>
...</pre>
<p class="p">For the new test case we add an action <samp class="ph codeph">iEnterSearchStringIntoSearchField</samp> and
a new assertion <samp class="ph codeph">theTableShouldHaveCorrespondingEntries</samp>.</p>
<p class="p">In <samp class="ph codeph">iEnterSearchStringIntoSearchField</samp>, we use the <samp class="ph codeph">EnterText</samp>
action and load the dependency <samp class="ph codeph">sap/ui/test/actions/EnterText</samp>.</p>
<p class="p">We define a <samp class="ph codeph">waitFor</samp> statement with the current view and with the ID of our
<samp class="ph codeph">SearchField</samp>, which is stored as an internal variable. This is
done in the same way as in the <samp class="ph codeph">iPressOnMoreData</samp> action that we
implemented in our first OPA test. But now we don&apos;t use the
<samp class="ph codeph">EnterText</samp> action. As soon as the <samp class="ph codeph">SearchField</samp>
is visible on the screen and can be interacted with, the <samp class="ph codeph">EnterText</samp>
action is invoked. If is is not invoked, an error message is displayed and the test
fails.</p>
<p class="p">The <samp class="ph codeph">assert</samp> part is implemented in the same way as in our first OPA test.
Again, we use the matchers to check the state. Here we check the number of items in
the table resulting from the simulated search. According to our mock data, there
should be only one item visible.</p>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;">Conventions</h2>

<p class="p">Actions in OPA never contain a QUnit assertion.</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/07c97a2e497d443eb6fa74bb9445ab9c.html" title="In this step, we will step back from our tests and application features that we have implemented so far and add another important piece of test code: The test suite page. A test suite can execute multiple tests and collect the results. This comes in handy for automatic tools in a continuous integration process." target="_top">Step 10: Test Suite and Automated Testing</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/0c270b45dd904429ba634656e3a37a73.html" title="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial." target="_top">Step 12: Adding a Search</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.test.actions.EnterText" target="_top" alt="#/api/sap.ui.test.actions.EnterText" title="#/api/sap.ui.test.actions.EnterText">API Reference: <samp class="ph codeph">sap.ui.test.actions.EnterText</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>