<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 33: Routing Back and History</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="Now we can navigate to our detail page and display an invoice, but we cannot go back to the overview page yet. We&apos;ll add a back button to the detail page and implement a function that shows our overview page again."><meta name="description" content="Now we can navigate to our detail page and display an invoice, but we cannot go back to the overview page yet. We&apos;ll add a back button to the detail page and implement a function that shows our overview page again."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"d12d2ee6a5454d799358d425f9e7c4db.html","previousTopicHref":"2366345a94f64ec1a80f9d9ce50a59ef.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/2366345a94f64ec1a80f9d9ce50a59ef.html" title="We can now navigate between the overview and the detail page, but the actual item that we selected in the overview is not displayed on the detail page yet. A typical use case for our app is to show additional information for the selected item on the detail page." target="_top">Step 32: Routing with Parameters</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/d12d2ee6a5454d799358d425f9e7c4db.html" title="In this step, we are going to extend the functionality of OpenUI5 with a custom control. We want to rate the product shown on the detail page, so we create a composition of multiple standard controls using the OpenUI5 extension mechanism and add some glue code to make them work nicely together. This way, we can reuse the control across the app and keep all related functionality in one module." target="_top">Step 34: Custom Controls</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio8ef57cfd37b44f089f7e3b52d56597eb"><h1 class="title topictitle1" hidden>Step 33: Routing Back and History</h1><div class="body conbody"><p class="shortdesc" hidden>Now we can navigate to our detail page and display an invoice, but we cannot go back to
the overview page yet. We&apos;ll add a back button to the detail page and implement a function
that shows our overview page again.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio8ef57cfd37b44f089f7e3b52d56597eb__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio8ef57cfd37b44f089f7e3b52d56597eb__image_xvb_tym_yr" src="loio6e4426b30fae4b51bc540fdacbe4f16f_HiRes.png">
</div><span class="figcap">A back button is now displayed on the detail page</span></div>
</section></div>
<div class="section">
<div class="section_title">Coding</div>
<p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.walkthrough.33/preview" target="_top" alt="#/sample/sap.m.tutorial.walkthrough.33/preview" title="#/sample/sap.m.tutorial.walkthrough.33/preview">Walkthrough - Step 33</a></span>.</p>
<div class="section_title">webapp/view/Detail.view.xml</div>
<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName=&quot;sap.ui.demo.walkthrough.controller.Detail&quot;
	xmlns=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;Page
		title=&quot;{i18n&gt;detailPageTitle}&quot;
		<span class="ph emphasis emphasis">showNavButton=&quot;true&quot;
		navButtonPress=&quot;.onNavBack&quot;&gt;</span>
		&lt;ObjectHeader
			intro=&quot;{invoice&gt;ShipperName}&quot;
			title=&quot;{invoice&gt;ProductName}&quot;/&gt;
	&lt;/Page&gt;
&lt;/mvc:View&gt;</pre>
<p class="p">On the detail page, we tell the control to display a back button by setting the
parameter <samp class="ph codeph">showNavButton</samp> to true and register an event handler that
is called when the back button is pressed.</p>
</div>
<div class="section"><section class="section" type="webapp/controller/Detail.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/Detail.controller.js </h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
<span class="ph emphasis emphasis">	&quot;sap/ui/core/routing/History&quot;,</span>
	&quot;sap/ui/core/UIComponent&quot;
], function (Controller<span class="ph emphasis emphasis">, History</span>, UIComponent) {
	&quot;use strict&quot;;

	return Controller.extend(&quot;sap.ui.demo.walkthrough.controller.Detail&quot;, {

		onInit: function () {
			var oRouter = UIComponent.getRouterFor(this);
			oRouter.getRoute(&quot;detail&quot;).attachPatternMatched(this._onObjectMatched, this);
		},

		_onObjectMatched: function (oEvent) {
			this.getView().bindElement({
				path: &quot;/&quot; + window.decodeURIComponent(oEvent.getParameter(&quot;arguments&quot;).invoicePath),
				model: &quot;invoice&quot;
			});
		}<span class="ph emphasis emphasis">,

		onNavBack: function () {
			var oHistory = History.getInstance();
			var sPreviousHash = oHistory.getPreviousHash();

			if (sPreviousHash !== undefined) {
				window.history.go(-1);
			} else {
				var oRouter = UIComponent.getRouterFor(this);
				oRouter.navTo(&quot;overview&quot;, {}, true);
			}
		}
</span>
	});
});
</pre>
<p class="p">We load a new dependency that helps us to manage the navigation history from the
<samp class="ph codeph">sap.ui.core.routing</samp> namespace and add the implementation for
the event handler to our detail page controller.</p>
<p class="p">In the event handler we access the navigation history and try to determine the previous hash. In contrast to the browser history, we will get a valid
result only if a navigation step inside our app has already happened. Then we will simply use the browser history to go back to the previous
page. If no navigation has happened before, we can tell the router to go to our overview page directly. The third parameter
<samp class="ph codeph">true</samp> tells the router to replace the current history state with the new one since we actually do a back navigation by
ourselves. The second parameter is an empty array (<samp class="ph codeph">{}</samp>) as we do not pass any additional parameters to this route.</p>
<p class="p">This implementation is a bit better than the browser&#x2019;s back button for our use case.
The browser would simply go back one step in the history even though we were on
another page outside of the app. In the app, we always want to go back to the
overview page even if we came from another link or opened the detail page directly
with a bookmark. You can try it by loading the detail page in a new tab directly and
clicking on the back button in the app, it will still go back to the overview
page.</p>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;">Conventions</h2>

<ul class="ul" id="loio8ef57cfd37b44f089f7e3b52d56597eb__ul_nh5_ybb_nr">
<li class="li">
<p class="p">Add a path to go back to the parent page when the history state is
unclear.</p>
</li>
</ul>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/2366345a94f64ec1a80f9d9ce50a59ef.html" title="We can now navigate between the overview and the detail page, but the actual item that we selected in the overview is not displayed on the detail page yet. A typical use case for our app is to show additional information for the selected item on the detail page." target="_top">Step 32: Routing with Parameters</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/d12d2ee6a5454d799358d425f9e7c4db.html" title="In this step, we are going to extend the functionality of OpenUI5 with a custom control. We want to rate the product shown on the detail page, so we create a composition of multiple standard controls using the OpenUI5 extension mechanism and add some glue code to make them work nicely together. This way, we can reuse the control across the app and keep all related functionality in one module." target="_top">Step 34: Custom Controls</a><br></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>