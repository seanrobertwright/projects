<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 21: Data Types</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="The list of invoices is already looking nice, but what is an invoice without a price assigned? Typically prices are stored in a technical format and with a &apos;.&apos; delimiter in the data model. For example, our invoice for pineapples has the calculated price 87.2 without a currency. We are going to use the OpenUI5 data types to format the price properly, with a locale-dependent decimal separator and two digits after the separator."><meta name="description" content="The list of invoices is already looking nice, but what is an invoice without a price assigned? Typically prices are stored in a technical format and with a &apos;.&apos; delimiter in the data model. For example, our invoice for pineapples has the calculated price 87.2 without a currency. We are going to use the OpenUI5 data types to format the price properly, with a locale-dependent decimal separator and two digits after the separator."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"c98d57347ba444c6945f596584d2db45.html","previousTopicHref":"bf71375454654b44af01379a3c3a6273.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/bf71375454654b44af01379a3c3a6273.html" title="Now that we have established a good structure for our app, it&apos;s time to add some more functionality. We start exploring more features of data binding by adding some invoice data in JSON format that we display in a list below the panel." target="_top">Step 20: Aggregation Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/c98d57347ba444c6945f596584d2db45.html" title="Sometimes the predefined types of OpenUI5 are not flexible enough and you want to do a simple calculation or formatting in the view - that is where expressions are really helpful. We use them to format our price according to the current number in the data model." target="_top">Step 22: Expression Binding</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loiodfe04650afc046e0802abb1a1a90d2d9"><h1 class="title topictitle1" hidden>Step 21: Data Types</h1><div class="body conbody"><p class="shortdesc" hidden>The list of invoices is already looking nice, but what is an invoice without a price
assigned? Typically prices are stored in a technical format and with a &apos;<samp class="ph codeph">.</samp>&apos;
delimiter in the data model. For example, our invoice for pineapples has the calculated
price <samp class="ph codeph">87.2</samp> without a currency. We are going to use the <span class="ph"><span class="ph pname">OpenUI5</span></span> data types to format the
price properly, with a locale-dependent decimal separator and two digits after the
separator.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loiodfe04650afc046e0802abb1a1a90d2d9__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loiodfe04650afc046e0802abb1a1a90d2d9__image_m5d_mzd_yr" src="loioa8394701ac104827af7e2034cb527e1c_HiRes.png">
</div><span class="figcap">The list of invoices with prices and number units</span></div>
</section></div>
<div class="section">
<div class="section_title">Coding</div>
<p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.walkthrough.21/preview" target="_top" alt="#/sample/sap.m.tutorial.walkthrough.21/preview" title="#/sample/sap.m.tutorial.walkthrough.21/preview">Walkthrough - Step 21</a></span>.</p>
<div class="section_title">webapp/view/InvoiceList.view.xml</div>
<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
   <span class="ph emphasis emphasis">controllerName=&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;</span>
   xmlns=&quot;sap.m&quot;
   xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
   &lt;List
      headerText=&quot;{i18n&gt;invoiceListTitle}&quot;
      class=&quot;sapUiResponsiveMargin&quot;
      width=&quot;auto&quot;
      items=&quot;{invoice&gt;/Invoices}&quot;&gt;
      &lt;items&gt;
         &lt;ObjectListItem
		title=&quot;{invoice&gt;Quantity} x {invoice&gt;ProductName}&quot;
		<span class="ph emphasis emphasis">number=&quot;{
			parts: [{path: &apos;invoice&gt;ExtendedPrice&apos;}, {path: &apos;view&gt;/currency&apos;}],
			type: &apos;sap.ui.model.type.Currency&apos;,
			formatOptions: {
				showMeasure: false
			}
		}&quot;
		numberUnit=&quot;{view&gt;/currency}&quot;</span>/&gt;
	&lt;/items&gt;
   &lt;/List&gt;
&lt;/mvc:View&gt;</pre>
<p class="p">We add a price to our invoices list in the view by adding the <samp class="ph codeph">number</samp>
and <samp class="ph codeph">numberUnit</samp> attributes to the <samp class="ph codeph">ObjectListItem</samp>
control, then we apply the currency data type on the number by setting the
<samp class="ph codeph">type</samp> attribute of the binding syntax to
<samp class="ph codeph">sap.ui.model.type.Currency</samp>.</p>
<p class="p">As you can see above, we are using a special binding syntax for the
<samp class="ph codeph">number</samp> property of the <samp class="ph codeph">ObjectListItem</samp>. This
binding syntax makes use of so-called &quot;Calculated Fields&quot;, which allows the binding
of multiple properties from different models to a single property of a control. The
properties bound from different models are called &#x201C;parts&#x201D;. In the example above, the
property of the control is <samp class="ph codeph">number</samp> and the bound properties
(&#x201C;parts&#x201D;) retrieved from two different models are
<samp class="ph codeph">invoice&gt;ExtendedPrice</samp> and
<samp class="ph codeph">view&gt;/currency</samp>.</p>
<p class="p">We want to display the price in Euro, and typically the currency is part of our data model on
the back end. In our case this is not the case, so we need to define it directly in
the app. We therefore add a controller for the invoice list, and use the
<samp class="ph codeph">currency</samp> property as the second part of our binding syntax. The
<samp class="ph codeph">Currency</samp> type will handle the formatting of the price for us,
based on the currency code. In our case, the price is displayed with 2 decimals.</p>
<p class="p">Additionally, we set the formatting option <samp class="ph codeph">showMeasure</samp> to
<samp class="ph codeph">false</samp>. This hides the currency code in the property
<samp class="ph codeph">number</samp>, because it is passed on to the
<samp class="ph codeph">ObjectListItem</samp> control as a separate property
<samp class="ph codeph">numberUnit</samp>. </p>
</div>
<div class="section"><section class="section" type="webapp/controller/InvoiceList.controller.js (New)"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/InvoiceList.controller.js (New)</h2>

<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
	&quot;sap/ui/model/json/JSONModel&quot;
], function (Controller, JSONModel) {
	&quot;use strict&quot;;

	return Controller.extend(&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;, {

		onInit : function () {
			var oViewModel = new JSONModel({
				currency: &quot;EUR&quot;
			});
			this.getView().setModel(oViewModel, &quot;view&quot;);
		}

	});
});</span></pre>
<p class="p">To be able to access the currency code that is not part of our data model, we define a view
model in the controller of the invoice list. It is a simple JSON model with just one
key <samp class="ph codeph">currency</samp> and the value <samp class="ph codeph">EUR</samp>. This can be bound
to the formatter of the number field. View models can hold any configuration options
assigned to a control to bind properties such as the visibility. </p>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;"> Conventions</h2>

<ul class="ul" id="loiodfe04650afc046e0802abb1a1a90d2d9__ul_nh5_ybb_nr">
<li class="li">
<p class="p">Use data types instead of custom formatters whenever possible.</p>
</li>
</ul>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/bf71375454654b44af01379a3c3a6273.html" title="Now that we have established a good structure for our app, it&apos;s time to add some more functionality. We start exploring more features of data binding by adding some invoice data in JSON format that we display in a list below the panel." target="_top">Step 20: Aggregation Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/c98d57347ba444c6945f596584d2db45.html" title="Sometimes the predefined types of OpenUI5 are not flexible enough and you want to do a simple calculation or formatting in the view - that is where expressions are really helpful. We use them to format our price according to the current number in the data model." target="_top">Step 22: Expression Binding</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/a2fe8e763014477e87990ff50657a0d0.html" title="Calculated fields enable the binding of multiple properties in different models to a single property of a control." target="_top">Composite Binding</a></div><div><a class="link" href="../../#/topic/07e4b920f5734fd78fdaa236f26236d8.html" title="Data that is presented on the UI often has to be converted so that is human readable and fits to the locale of the user. On the other hand, data entered by the user has to be parsed and validated to be understood by the data source. For this purpose, you use formatters and data types." target="_top">Formatting, Parsing, and Validating Data</a></div><div><a class="link" href="../../#/api/sap.ui.model.type-1" target="_top" alt="#/api/sap.ui.model.type-1" title="#/api/sap.ui.model.type-1">API Reference: <samp class="ph codeph">sap.ui.model.type</samp></a></div><div><a class="link" href="../../#/api/sap.ui.model.type.Currency" target="_top" alt="#/api/sap.ui.model.type.Currency" title="#/api/sap.ui.model.type.Currency">API Reference: <samp class="ph codeph">sap.ui.model.type.Currency</samp></a></div><div><a class="link" href="../../#/entity/sap.ui.model.type.Currency" target="_top" alt="#/entity/sap.ui.model.type.Currency" title="#/entity/sap.ui.model.type.Currency">Samples: <samp class="ph codeph">sap.ui.model.type.Currency</samp>
</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>