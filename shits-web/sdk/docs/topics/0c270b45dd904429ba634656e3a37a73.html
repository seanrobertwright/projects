<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 12: Adding a Search</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial."><meta name="description" content="We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the Walkthrough tutorial."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"19ccd473c9a14c2ab7529303a2232d2c.html","previousTopicHref":"92959b10ecf14582b65eaadb40571156.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/92959b10ecf14582b65eaadb40571156.html" title="In this step, we will write a test that simulates a user search. We will enter the search string into the search field and check if the correct results are shown in worklist table." target="_top">Step 11: Testing User Input</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/19ccd473c9a14c2ab7529303a2232d2c.html" title="In this step we want to write a test that simulates user interaction with an icon tab bar. We want to change the tab and check if the correct content is shown." target="_top">Step 13: Testing User Interaction</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio0c270b45dd904429ba634656e3a37a73"><h1 class="title topictitle1" hidden>Step 12: Adding a Search</h1><div class="body conbody"><p class="shortdesc" hidden>We now add a search field to our bulletin board and define a filter that represents the search term. This is done similarly as in step 24 of the
Walkthrough tutorial.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio0c270b45dd904429ba634656e3a37a73__fig_k3l_yjj_sx"><div class="figbody">

<img class="inline" id="loio0c270b45dd904429ba634656e3a37a73__image_px2_bpj_sx" src="loiob012fdf751b947f08cf77cf124334c9f_LowRes.png">
</div><span class="figcap">Search field</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo Kit <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.testing.12/preview" target="_top" alt="#/sample/sap.m.tutorial.testing.12/preview" title="#/sample/sap.m.tutorial.testing.12/preview">Testing - Step 12</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/view/Worklist.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/Worklist.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">...
         &lt;Table
               id=&quot;table&quot;
               width=&quot;auto&quot;
               class=&quot;sapUiResponsiveMargin&quot;
               growing=&quot;true&quot;
               items=&quot;{
               path: &apos;/Posts&apos;,
               sorter: {
                  path: &apos;Title&apos;,
                  descending: false
                  }
               }&quot;
               busyIndicatorDelay=&quot;{worklistView&gt;/tableBusyDelay}&quot;
               updateFinished=&quot;.onUpdateFinished&quot;&gt;
            &lt;headerToolbar&gt;
               &lt;Toolbar&gt;
                  &lt;Label id=&quot;tableHeader&quot; text=&quot;{worklistView&gt;/worklistTableTitle}&quot;/&gt;
                  <span class="ph emphasis emphasis">&lt;ToolbarSpacer /&gt;
                  &lt;SearchField id=&quot;searchField&quot; width=&quot;auto&quot; search=&quot;.onFilterPosts&quot; /&gt;</span>
               &lt;/Toolbar&gt;
            &lt;/headerToolbar&gt;
...</pre>
<p class="p">We add a <samp class="ph codeph">ToolbarSpacer</samp> and a <samp class="ph codeph">SearchField</samp> to the <samp class="ph codeph">headerToolbar</samp> of our table.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/Worklist.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/Worklist.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&apos;./BaseController&apos;,
	&apos;sap/ui/model/json/JSONModel&apos;,
	&apos;../model/formatter&apos;,
	&apos;../model/FlaggedType&apos;,
	&apos;sap/m/library&apos;<span class="ph emphasis emphasis">,
	&quot;sap/ui/model/Filter&quot;,
	&quot;sap/ui/model/FilterOperator&quot;</span>

], function (BaseController, JSONModel, formatter, FlaggedType, mobileLibrary<span class="ph emphasis emphasis">, Filter, FilterOperator</span>) {
	&quot;use strict&quot;;
...
		onUpdateFinished: function (oEvent) {
			// update the worklist&apos;s object counter after the table update
			var sTitle,
				oTable = oEvent.getSource(),
				iTotalItems = oEvent.getParameter(&quot;total&quot;);
			// only update the counter if the length is final and
			// the table is not empty
			if (iTotalItems &amp;&amp; oTable.getBinding(&quot;items&quot;).isLengthFinal()) {
				sTitle = this.getResourceBundle().getText(&quot;worklistTableTitleCount&quot;, [iTotalItems]);
			} else {
				sTitle = this.getResourceBundle().getText(&quot;worklistTableTitle&quot;);
			}
			this.getModel(&quot;worklistView&quot;).setProperty(&quot;/worklistTableTitle&quot;, sTitle);
		},

		<span class="ph emphasis emphasis">onFilterPosts: function (oEvent) {

			// build filter array
			var aFilter = [];
			var sQuery = oEvent.getParameter(&quot;query&quot;);
			if (sQuery) {
				aFilter.push(new Filter(&quot;Title&quot;, FilterOperator.Contains, sQuery));
			}

			// filter binding
			var oTable = this.byId(&quot;table&quot;);
			var oBinding = oTable.getBinding(&quot;items&quot;);
			oBinding.filter(aFilter);
		},
</span>
...</pre>
<p class="p">To enable filtering, we extend the controller with a method that applies the search term entered in the search field to the list binding,
similarly as we did for <span class="ph filepath">InvoiceList.controller.js</span> in step 24 of the Walkthrough tutorial.</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/291c9121e6044ab381e0b51716f97f52.html" title="In this tutorial we will test application functionality with the testing tools that are delivered with OpenUI5. At different steps of this tutorial you will write tests using QUnit, OPA5, and the mock server. Additionally, you will learn about testing strategies, Test Driven Development (TDD), and much more." target="_top">Testing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/92959b10ecf14582b65eaadb40571156.html" title="In this step, we will write a test that simulates a user search. We will enter the search string into the search field and check if the correct results are shown in worklist table." target="_top">Step 11: Testing User Input</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/19ccd473c9a14c2ab7529303a2232d2c.html" title="In this step we want to write a test that simulates user interaction with an icon tab bar. We want to change the tab and check if the correct content is shown." target="_top">Step 13: Testing User Interaction</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/5295470d7eee46c1898ee46c1b9ad763.html" title="In this step, we add a search field for our product list and define a filter that represents the search term. When searching, the list is automatically updated to show only the items that match the search term." target="_top">Step 42 of Walkthrough: Filtering</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>