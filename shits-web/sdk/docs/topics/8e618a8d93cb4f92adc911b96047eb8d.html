<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Unit Formatting</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="OpenUI5 supports the formatting and parsing of units. These unit formats are by default taken from the CLDR. Besides the default units defined in the CLDR, you can also define custom units."><meta name="description" content="OpenUI5 supports the formatting and parsing of units. These unit formats are by default taken from the CLDR. Besides the default units defined in the CLDR, you can also define custom units."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"e978728a6ef6490c971248948f9101e0.html","previousTopicHref":"24f340bdd59e4428aab30a20d14e2ebc.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio8e618a8d93cb4f92adc911b96047eb8d"><h1 class="title topictitle1" hidden>Unit Formatting</h1><div class="body conbody"><p class="shortdesc" hidden><span class="ph"><span class="ph pname">OpenUI5</span></span> supports the
formatting and parsing of units. These unit formats are by default taken from the CLDR.
Besides the default units defined in the CLDR, you can also define custom units.</p>
<div class="section" id="loio8e618a8d93cb4f92adc911b96047eb8d__section_m5b_xkh_hdb"><section class="section" type="Introduction"><h2 class="section_title" style="font-size: 1.15em;">Introduction</h2>

<p class="p">Similar to the formatting of currencies, the new unit formatting feature allows you
to combine a number value with a localized unit string. Still the actual numbers
themselves can be formatted in all kinds of styles, for example, with different
decimals or fraction digits.</p>
<p class="p">With version 1.54 all language files will include the CLDR data for formatting. You
can check out the public CLDR github repository for an overview of all supported
languages and units: <a class="extlink" href="http://help.sap.com/disclaimer?site=https://github.com/unicode-cldr/cldr-units-modern" target="_blank" alt="https://github.com/unicode-cldr/cldr-units-modern" title="https://github.com/unicode-cldr/cldr-units-modern">https://github.com/unicode-cldr/cldr-units-modern
<img src="themes/sap-default/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a></p>
<p class="p">The default CLDR units include a pattern for formatting a number value in the given
unit and the set locale. Additionally, you can now parse an already formatted string
back into the unit-format code from the CLDR and of course the raw number value. The
same is true for your self-defined custom units.</p>
<p class="p">In addition to the formatting and parsing patterns, the CLDR also provides a
display-name for all units, as well as grammatical plural forms. The display-name
for the unit <span class="keyword parmname">volume-cubic-inch</span> is
<span class="ph uicontrol">inches&#xB3;</span>. The formatting output might however look like
this: <span class="ph uicontrol">12 in&#xB3;</span>.</p>
</section></div>
<div class="section" id="loio8e618a8d93cb4f92adc911b96047eb8d__section_fb5_wlh_hdb"><section class="section" type="Usage"><h2 class="section_title" style="font-size: 1.15em;">Usage</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">Simple Sample</p>
<p class="p">Since the units and their formatting patterns are already included in the
respective language JSON files, you can simply instantiate a new unit format
instance via the <samp class="ph codeph">NumberFormat.getUnitInstance()</samp> factory. The
resulting instance supports formatting and parsing. While the
<samp class="ph codeph">FormatOptions</samp> are used to format the Number itself, the
specific unit code is passed to the format/parse method.</p>
<pre class="pre codeblock prettyprint">// create a simple unit formatting instance, without any additional options
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   var oUnitFormat = NumberFormat.getUnitInstance();
   oUnitFormat.format(12345.678, &quot;speed-mile-per-hour&quot;); // output: 12,345.678 mph
   oUnitFormat.parse(&quot;12345.678 mph&quot;); // output: [12345.678, &quot;speed-mile-per-hour&quot;]
});</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Complex Sample</p>
<p class="p">Besides a simple formatting and parsing of units defined in the CLDR, you can
also use the known format options for formatting numbers independent of the
unit. The style of the number output format can be defined as either
<span class="keyword parmname">short</span> or <span class="keyword parmname">long.</span></p>
<p class="p">Essentially, the new unit formatting can be combined together with the existing
number formatting.</p>
<pre class="pre codeblock prettyprint">
// new unit formatter, decimals are limited to 2, and the output style is set to &quot;short&quot;
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   var en = new sap.ui.core.Locale(&quot;en&quot;);
   var oUnitFormat = NumberFormat.getUnitInstance({decimals:2, style:&quot;short&quot;}, en);
   console.log(oUnitFormat.format(12345.678, &quot;speed-mile-per-hour&quot;)); // output:  12.35K mph
   console.log(oUnitFormat.parse(&quot;12.35K mph&quot;)); // output: [12350, &quot;speed-mile-per-hour&quot;]
});

// new unit formatter, decimals are limited to 2, and the output style is set to &quot;long&quot;
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   var en = new sap.ui.core.Locale(&quot;en&quot;);
   var oUnitFormat = NumberFormat.getUnitInstance({decimals:2, style:&quot;long&quot;}, en);
   console.log(oUnitFormat.format(12345.678, &quot;speed-mile-per-hour&quot;)); // output: 12.35 thousand mph
   console.log(oUnitFormat.parse(&quot;12.35 thousand mph&quot;)); // output: [12350, &quot;speed-mile-per-hour&quot;]
});</pre>
<p class="p">The unit&#x2019;s <span class="keyword parmname">displayname</span> can also be retrieved based on the
data from the CLDR.</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;, &quot;sap/ui/core/Locale&quot;, &quot;sap/ui/core/LocaleData&quot;],
    function(NumberFormat, Locale, LocaleData) {
    console.log(LocaleData.getInstance(new Locale(&quot;en&quot;)).getUnitDisplayName(&quot;speed-mile-per-hour&quot;)); // output: miles/hour
});</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Plural Forms and RTL</p>
<p class="p">Depending on the set locale/language, the output also correctly regards grammatical plural
forms, as well as right-to-left orientation. In some Arabic languages, for
example, there is a distinction between &#x201C;many&#x201D; and &#x201C;one&#x201D;, with &#x201C;one&#x201D; being a
single string without a number in it:</p>
<pre class="pre codeblock prettyprint">
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   var ar = new sap.ui.core.Locale(&quot;ar&quot;);
   var oUnitFormat = NumberFormat.getUnitInstance({decimals:2, style:&quot;long&quot;}, ar);
   console.log(oUnitFormat.format(123456.789, &quot;angle-revolution&quot;)); // 123.46 &#x623;&#x644;&#x641; &#x62F;&#x648;&#x631;&#x629;
   console.log(oUnitFormat.format(1, &quot;angle-revolution&quot;)); // &#x62F;&#x648;&#x631;&#x629;
});</pre>
<p class="p">And here&#x2019;s an example of right-to-left orientation in Hebrew:</p>
<pre class="pre codeblock prettyprint">
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   var he = new sap.ui.core.Locale(&quot;he&quot;);
   var oUnitFormat = NumberFormat.getUnitInstance({decimals:2, style:&quot;long&quot;}, he);
   console.log(oUnitFormat.format(12345.678, &quot;speed-mile-per-hour&quot;)); // &#x200F;12.35 &#x5D0;&#x5DC;&#x5E3; mph
});</pre>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">The right-to-left languages include a special whitespace character as a
marker. This character is of course invisible, but you should take note of
it, in case you intend to do string comparisons and other string operations.
For example, in the Chrome debugger the RTL mark is visualized as a red
dot.</p></aside>
</div></section></div>
<div class="section" id="loio8e618a8d93cb4f92adc911b96047eb8d__section_b2x_tnh_hdb"><section class="section" type="Custom Units"><h2 class="section_title" style="font-size: 1.15em;">Custom Units</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">Instance-Exclusive Units</p>
<p class="p">The unit NumberFormat instance also allows you to specify custom units, which can
be used for formatting, as well as parsing. All you have to do is add your
custom units as an additional parameter in the
<samp class="ph codeph">NumberFormat.getUnitInstance()</samp> factory.</p>
<p class="p">In the following example, you can see how this is done for a specific
instance.</p>
<pre class="pre codeblock prettyprint">
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
 
       var oFormat = sap.ui.core.format.NumberFormat.getUnitInstance({
              customUnits: {
                     &quot;zomb&quot;: {
                            &quot;unitPattern-count-one&quot;: &quot;{0} Zombie...&quot;,
                            &quot;unitPattern-count-other&quot;: &quot;{0} Zombies!!&quot;
                     }
              }
       });
 
       console.log(oFormat.format(1, &quot;zomb&quot;));     // 1 Zombie...
       console.log(oFormat.format(9001, &quot;zomb&quot;));  // 9.001 Zombies!!
       
       console.log(oFormat.parse(&quot;12 Zombies!!&quot;)); // [12, &quot;zomb&quot;];
});</pre>
<aside class="note caution" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Caution</strong></div>
<p class="p">The custom units defined on the number format instance will be exclusive to
this instance. No other instances are affected. In addition, once you define
custom units for an instance, only those units will be formatted and parsed
by that instance. This also means that custom units defined via the
Configuration are not taken into account for this specific instance.</p><p class="p">This is done to circumvent ambiguities and unit clashes with the CLDR units.
So in the above example, only Zombies can be formatted, but no Gigawatt
(CLDR key: <span class="keyword parmname">power-gigawatt</span>).</p><div class="p">
<aside class="note sap-example example" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Example</strong></div>
<pre class="pre codeblock prettyprint">       // the previous Unit instance is used
       // formatting/parsing Zombies is fine
       console.log(oFormat.format(9001, &quot;zomb&quot;));  // 9.001 Zombies!!
       console.log(oFormat.parse(&quot;12 Zombies!!&quot;)); // [12, &quot;zomb&quot;];
 
       // formatting/parsing Giga-Watt does not work (because of the exclusivity of the custom units on the above instance)
       console.log(oFormat.format(1.21, &quot;power-gigawatt&quot;)); // &quot;&quot;: results in an empty string</pre></aside>
</div></aside>
<p class="p">If you need both, CLDR units and custom units, you simply have to create two
separate number format instances.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Globally Configured Units</p>
<p class="p">You can also add custom units via the format settings in the Core configuration.
Contrary to the custom units defined exclusively on a single unit-formatter
instance, these custom units will be available in ALL unit-formatted instances
for the current locale (except if they also define a set of custom units).</p>
<p class="p">Adding a unit with a key which is already available in the CLDR, will overwrite
the CLDR unit. This way you can overdefine single units, in case the CLDR
provided formatting is not sufficient.</p>
<pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   sap.ui.getCore().getConfiguration().getFormatSettings().addCustomUnits({
       &quot;cats&quot;: {
          &quot;displayName&quot;: &quot;kitties&quot;,
          &quot;unitPattern-count-one&quot;: &quot;{0} kitty&quot;,
          &quot;unitPattern-count-other&quot;: &quot;{0} kitties&quot;
       },
       &quot;dogs&quot;: {
          &quot;displayName&quot;: &quot;puppies&quot;,
          &quot;unitPattern-count-one&quot;: &quot;{0} puppy&quot;,
          &quot;unitPattern-count-other&quot;: &quot;{0} puppies&quot;
       },
       &quot;power-horsepower&quot;: { // overwrite of an existing CLDR unit
          &quot;displayName&quot;: &quot;Horsepower&quot;,
          &quot;unitPattern-count-one&quot;: &quot;{0} AmazingHorse&quot;, // singular form
          &quot;unitPattern-count-other&quot;: &quot;{0} AmazingHorses&quot; // plural form
       }
    });
 
 
    var oUnitFormat = NumberFormat.getUnitInstance({decimals:2, style:&quot;long&quot;});
 
    // formatting a custom unit
    console.log(oUnitFormat.format(12, &quot;cats&quot;)); // 12,00 kitties
 
 
    // formatting and existing CLDR unit
    console.log(oUnitFormat.format(5, &quot;speed-meter-per-second&quot;)); // 5,00 m/s
 
 
    // formatting and existing CLDR unit
    console.log(oUnitFormat.format(12, &quot;power-horsepower&quot;)); // 12,00 AmazingHorses
});</pre>
<p class="p">Additionally, you can now define unit mappings, in order to use aliases for some
units. A typical use-case is to map from an ISO unit code to a CLDR key. Of
course you can also map to custom units as shown below.</p>
<pre class="pre codeblock prettyprint">sap.ui.getCore().getConfiguration().getFormatSettings().addUnitMappings({
   &quot;kitties&quot;: &quot;cats&quot;, // maps to a custom defined unit
   &quot;mySpeedAlias&quot;: &quot;speed-kilometer-per-hour&quot; // maps to an existing the CLDR unit
});</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Additional Format Options</p>
<p class="p">When using either instance, exclusive or globally configured custom units, you
can also add two additional format options (<span class="keyword parmname">decimals</span> and
<span class="keyword parmname">precision</span>) to the custom unit&apos;s definition block. In
the following examples the <span class="keyword parmname">decimals</span> option is set.</p>
<aside class="note sap-example example" aria-labelledby="note_3_title"><div class="title" id="note_3_title"><strong>Example</strong></div>
<p>Globally configured custom
units:</p><pre class="pre codeblock prettyprint">sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
   // define a new unit called Lux
   sap.ui.getCore().getConfiguration().getFormatSettings().addCustomUnits({
       &quot;lux&quot;: {
          &quot;displayName&quot;: &quot;Lux&quot;,
          &quot;unitPattern-count-one&quot;: &quot;{0} lx&quot;,
          &quot;unitPattern-count-other&quot;: &quot;{0} lx&quot;,
          &quot;decimals&quot;: 2
       }
    });
 
    var oUnitFormat = NumberFormat.getUnitInstance({style:&quot;long&quot;});
 
    console.log(oUnitFormat.format(2.4, &quot;lux&quot;)); // 2,40 lux (notice the padded 0 after the 4, this is due to the decimals option)
});</pre></aside>
<aside class="note sap-example example" aria-labelledby="note_4_title"><div class="title" id="note_4_title"><strong>Example</strong></div>
<p>Instance exclusive custom unit
definition:</p><pre class="pre codeblock prettyprint">
sap.ui.require([&quot;sap/ui/core/format/NumberFormat&quot;], function(NumberFormat) {
    // define a new unit called Lux
    var oFormat = sap.ui.core.format.NumberFormat.getUnitInstance({
        customUnits: {
            &quot;lux&quot;: {
                 &quot;displayName&quot;: &quot;Lux&quot;,
                 &quot;unitPattern-count-one&quot;: &quot;{0} lx&quot;,
                 &quot;unitPattern-count-other&quot;: &quot;{0} lx&quot;,
                 &quot;decimals&quot;: 2
            }
        }
    });
 
    var oUnitFormat = NumberFormat.getUnitInstance({style:&quot;long&quot;});
 
    console.log(oUnitFormat.format(2.4, &quot;lux&quot;)); // 2,40 lux (notice the padded 0 after the 4, this is due to the decimals option)
});</pre></aside>
</div></section></div>
<div class="section" id="loio8e618a8d93cb4f92adc911b96047eb8d__section_ybw_1yh_hdb"><section class="section" type="Databinding: New Unit Type"><h2 class="section_title" style="font-size: 1.15em;">Databinding: New Unit Type</h2>

<p class="p">Besides the NumberFormat instances, you now can also include the new Unit type in
your application. Simply define it as the type for a property binding, and most of
the formatting and parsing effort will be handled for you out of the box.</p>
<p class="p">To demonstrate this, we can consider an example with electric meters. Typically they
all measure the flow of energy in kilowatt hours (kWh). Yet some meters are more
precise than others, some measure up to a few hundred wattseconds, others just cap
it at full kilowatt hours. To simplify it for our example: the number of decimals
might differ depending on the type of electric meter.</p>
<pre class="pre codeblock prettyprint">
// defining a new custom Type as a subclass of the sap.ui.model.type.Unit type
sap.ui.require([&quot;sap/ui/model/type/Unit&quot;, &quot;sap/ui/core/format/NumberFormat&quot;], function(UnitType, NumberFormat) {
 
       UnitType.extend(&quot;sap.ui.core.samples.MeterType&quot;, {
              constructor: function(oFormatOptions, oConstraints){
                     // define the dynamic format options as the third argument
                     // &#x2018;aDynamicFormatOptionNames&#x2019;
                     UnitType.apply(this, [oFormatOptions, oConstraints, [&quot;decimals&quot;]]);
              }
       });
});</pre>
<div class="p">In the example we defined a new <samp class="ph codeph">MeterType</samp> to combine not only a
number value and a unit, but the already mentioned optional dynamic format options
in one single typed
<samp class="ph codeph">PropertyBinding</samp>.<pre class="pre codeblock prettyprint">&lt;-- XML View snippet --&gt;
&lt;t:Table rows=&#x2019;energyModel&gt;/meters&#x2019;&gt;
   ... &lt;!-- here is more Table definition stuff, we cut this for simplicity --&gt;
 
 
   &lt;!-- the third part of the binding is the number of decimals for this meter instance --&gt;
   &lt;m:Label text=&quot;{parts:[&apos;energyModel&gt;value&apos;, &apos;energyModel&gt;unit&apos;, &apos;energyModel&gt;decimals&apos;],type: &apos;sap.ui.core.samples.MeterType&apos;}&quot;/&gt;
 
 
   ...
&lt;/t:Table&gt;</pre></div>
<p class="p">With the new bindable dynamic format options of Unit type, you can pass the relevant
meter formatting information in a generalized way through the cell&#x2019;s bindings.</p>
<p class="p">The third argument of the base Unit type constructor is a list of dynamic format
options. In our example, the binding context itself contains the information on how
many-decimals should be used. Still, these dynamic format options can be bound to
any value from any model.</p>
<aside class="note" aria-labelledby="note_5_title"><div class="title" id="note_5_title"><strong>Note</strong></div>
<p class="p">If you use a combination of custom units on the Configuration and the Unit type,
the format options from the type have priority.</p><p class="p">So if you define a <span class="keyword parmname">decimals</span> value for a custom unit in the
Configuration, the bound values from the Unit type instance will still be taken
for the formatting.</p></aside>
</section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.core.format.NumberFormat" target="_top" alt="#/api/sap.ui.core.format.NumberFormat" title="#/api/sap.ui.core.format.NumberFormat">API Reference: <samp class="ph codeph">sap.ui.core.format.NumberFormat</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>