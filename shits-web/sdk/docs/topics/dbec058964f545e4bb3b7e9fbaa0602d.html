<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Annotation Helper</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="A collection of methods which help to consume OData Version 4.0 annotations in XML template views."><meta name="description" content="A collection of methods which help to consume OData Version 4.0 annotations in XML template views."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"153b357ccff14715af9973de9a045e38.html","previousTopicHref":"b15e6afc5ae74227a661dc6ff104bf80.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loiodbec058964f545e4bb3b7e9fbaa0602d"><h1 class="title topictitle1" hidden>Annotation Helper</h1><div class="body conbody"><p class="shortdesc" hidden> A collection of methods which help to consume OData Version 4.0 annotations in XML
template views.</p>
<div class="p">The <samp class="ph codeph">AnnotationHelper</samp> connects all the pieces related to XML templating: It
knows the OData meta model and its structure as well as the OData v4 annotations. The
<samp class="ph codeph">AnnotationHelper</samp> offers formatter functions and helper functions.
You can call these methods directly from the JavaScript code without XML runtime
templating. You do not need to require
<samp class="ph codeph">sap.ui.model.odata.AnnotationHelper</samp> before use. <aside class="note tip" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Tip</strong></div>
<p class="p">You can see more information on the expressions, constants and functions used by the
<samp class="ph codeph">AnnotationHelper</samp>, in the respective chapters of the
specification <a class="extlink" href="http://help.sap.com/disclaimer?site=http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html" target="_blank" alt="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html" title="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html">OData Version 4.0 Specification: Part 3: Common Schema
Definition Language<img src="themes/sap-default/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a> .</p></aside></div>
<div class="section">
<div class="section_title">Formatter Functions</div>
<p class="p">The formatter functions can be used in binding expressions and
<samp class="ph codeph">&lt;template:if&gt;</samp> instructions for test conditions.</p>
<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p class="p">To use formatter functions, you need to enable the extended binding syntax by setting the
configuration option <samp class="ph codeph">xx-bindingSyntax</samp> to
<samp class="ph codeph">complex</samp>. For more information, see <a class="xref" href="../../#/topic/a2fe8e763014477e87990ff50657a0d0.html" title="Calculated fields enable the binding of multiple properties in different models to a single property of a control." target="_top">Composite Binding</a>. If the extended binding
syntax is not enabled and expressions are created by means of the annotation
helper&apos;s format functions, the following warning is issued in the console:
<em class="ph i">Complex binding syntax not active</em>.</p></aside>
<p class="p">The following formatter functions exist:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_wkp_5f2_mr">
<li class="li">
<p class="p"><samp class="ph codeph">createPropertySetting</samp>: Creates a property setting which is
either a constant value or a binding info object from the given parts and
from the optional root formatter function. Each part can have one of the
following types:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_z53_m13_lt">
<li class="li">
<p class="p">boolean, number, undefined: The part is a constant value.</p>
</li>
<li class="li">
<p class="p">string: The part is a data binding expression with complex binding
syntax (for example, as created by format) and is parsed accordingly
to create either a constant value or a binding info object. Proper
backslash escaping must be used for constant values with curly
braces.</p>
</li>
<li class="li">
<p class="p">object: The part is a binding info object if it has a &quot;path&quot; or
&quot;parts&quot; property, otherwise it is a constant value.</p>
</li>
</ul>
<p class="p">If a binding info object is not the only part and has a
<samp class="ph codeph">parts</samp> property itself, then it must have no other
properties except <samp class="ph codeph">formatter</samp>. This applies to expression
bindings and data binding expressions that are created by
<samp class="ph codeph">format</samp>. If all parts are constant values, the resulting
property setting is also a constant value computed by applying the root
formatter function to the constant parts once. If at least one part is a
binding info object, the resulting property setting is also a binding info
object and the root formatter function will be applied again and again to
the current values of all parts, no matter whether constant or variable.</p>
<aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p class="p">The root formatter function should not rely on its <samp class="ph codeph">this</samp>
value because it depends on how the function is called.</p><p class="p">A single data binding expression can be given directly to
<samp class="ph codeph">applySettings</samp>; you do <span class="ph emphasis emphasis">not</span> need
to call <samp class="ph codeph">this</samp> function first.</p></aside>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">format</samp>: General purpose method that handles proper escaping and formatting
of constant values and provides binding expressions with suitable types.
<samp class="ph codeph">format</samp> supports the following constructs:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_vkz_qbf_mr">
<li class="li">
<p class="p">The <em class="ph i">&quot;14.4 Constant Expressions&quot;</em> for <em class="ph i">&quot;edm:Bool&quot;</em>, <em class="ph i">&quot;edm:Date&quot;</em>,
<em class="ph i">&quot;edm:DateTimeOffset&quot;</em>, <em class="ph i">&quot;edm:Decimal&quot;</em>,
<em class="ph i">&quot;edm:Float&quot;</em>, <em class="ph i">&quot;edm:Guid&quot;</em>, <em class="ph i">&quot;edm:Int&quot;</em>,
<em class="ph i">&quot;edm:TimeOfDay&quot;</em>.</p>
</li>
<li class="li">
<p class="p">Constant <em class="ph i">&quot;14.4.11 Expression edm:String&quot;</em>: This constant is either turned into fixed
text, for example <em class="ph i">&quot;Width&quot;</em>, or into a data binding expression,
for example
<samp class="ph codeph">&quot;{/##/dataServices/schema/0/entityType/1/com.sap.vocabularies.UI.v1.FieldGroup#Dimensions/Data/0/Label/String}&quot;</samp>.
If XML template processing has been started with the setting
<samp class="ph codeph">bindTexts : true</samp>, data binding expressions are
used. The constant is used to reference translatable texts from
OData v4 annotations, especially for XML template processing at
design time. The string constants that contain a simple binding
<samp class="ph codeph">&quot;{@i18n&gt;...}&quot;</samp> to the hard-coded model name
<samp class="ph codeph">&quot;@i18n&quot;</samp> with an arbitrary path are not turned
into a fixed text, but kept as a data binding expression. This
enables local annotation files to refer to a resource bundle for
internationalization. If you want to avoid this behaviour, add a
space at the end of the string constant and it will be turned into a
fixed text again.</p>
</li>
<li class="li">
<p class="p">Dynamic <em class="ph i">&quot;14.5.1 Comparison and Logical Operators&quot;</em>: Turned into
an expression binding to perform the operations at runtime</p>
</li>
<li class="li">
<p class="p">Dynamic <em class="ph i">&quot;14.5.3 Expression edm:Apply&quot;</em>:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_kb5_ccf_mr">
<li class="li">
<p class="p"><em class="ph i">&quot;14.5.3.1.1 Function odata.concat&quot;</em>: Turned into a data
binding expression relative to an entity</p>
</li>
<li class="li">
<p class="p"><em class="ph i">&quot;14.5.3.1.2 Function odata.fillUriTemplate&quot;</em>: Turned
into an expression binding to fill the template at
runtime</p>
</li>
<li class="li">
<p class="p"><em class="ph i">&quot;14.5.3.1.3 Function odata.uriEncode&quot;</em>: Turned into an expression binding to
encode the parameter at runtime</p>
</li>
</ul>
<p class="p">The <em class="ph i">apply</em> functions can be nested arbitrarily.</p>
</li>
<li class="li">
<p class="p">Dynamic <em class="ph i">&quot;14.5.12 Expression edm:Path&quot;</em> and <em class="ph i">&quot;14.5.13 Expression
edm.PropertyPath</em>: This dynamic expression is turned into a
data binding relative to an entity including type information and
constraints as available from metadata, for example <samp class="ph codeph">&quot;{path : &apos;Name&apos;, type : &apos;sap.ui.model.odata.type.String&apos;, constraints : {&apos;maxLength&apos;:&apos;255&apos;}}&quot;</samp>.</p>
</li>
<li class="li">
<p class="p">Dynamic <em class="ph i">&quot;14.5.6 Expression edm:If&quot;</em>: This dynamic expression is
turned into an expression binding to be evaluated at runtime. The
expression is conditional, for example, <samp class="ph codeph">&quot;{=condition ? expression1 : expression2}&quot;</samp>.</p>
</li>
</ul>
<aside class="note" aria-labelledby="note_3_title"><div class="title" id="note_3_title"><strong>Note</strong></div>
<p class="p">Unsupported values are turned into strings, and indicated as such. To ensure that the data
binding syntax is not corrupted, proper escaping is used.</p></aside>
<pre class="pre codeblock prettyprint nocode">&lt;Text text=&quot;{path: &apos;meta&gt;Value&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.format&apos;}&quot;/&gt;</pre>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">getNavigationPath</samp>: Special formatter that extracts a data binding
expression for the navigation path from one of the following dynamic
expressions: <em class="ph i">14.5.2 Expression edm:AnnotationPath</em>, <em class="ph i">&quot;14.5.11
Expression edm:NavigationPropertyPath&quot;</em>, <em class="ph i">&quot;14.5.12 Expression
edm:Path&quot;</em> and <em class="ph i">&quot;14.5.13 Expression edm:PropertyPath&quot;</em>;
example:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_vgs_lyk_cr">
<li class="li">The input value <samp class="ph codeph">{AnnotationPath : &quot;ToSupplier/@com.sap.vocabularies.Communication.v1.Address&quot;}</samp>
returns <samp class="ph codeph">&quot;{ToSupplier}&quot;</samp></li>
<li class="li">The input value <samp class="ph codeph">{AnnotationPath : &quot;@com.sap.vocabularies.UI.v1.FieldGroup#Dimensions&quot;}</samp>
returns <samp class="ph codeph">&quot;{}&quot;</samp></li>
<li class="li">The input value <samp class="ph codeph">{}</samp> returns <samp class="ph codeph">&quot;&quot;</samp></li>
</ul>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:if test=&quot;{path: &apos;facet&gt;Target&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.getNavigationPath&apos;}&quot;&gt;
    &lt;form:SimpleForm binding=&quot;{path: &apos;facet&gt;Target&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.getNavigationPath&apos;}&quot; /&gt;
&lt;/template:if&gt;</pre>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">isMultiple</samp>: Special formatter that knows about the one of the following
dynamic expressions: <em class="ph i">14.5.2 Expression edm:AnnotationPath</em>,
<em class="ph i">&quot;14.5.11 Expression edm:NavigationPropertyPath&quot;</em>, <em class="ph i">&quot;14.5.12
Expression edm:Path&quot;</em> and <em class="ph i">&quot;14.5.13 Expression
edm:PropertyPath&quot;</em>. The formatter returns the information whether the
navigation path ends with an association end with multiple &quot;*&quot;. If the
multiple &quot;*&quot; are not the last characters, the formatter returns an
error.</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:if test=&quot;{path: &apos;facet&gt;Target&apos;, formatter: &apos;sap.ui.model.odata.AnnotationHelper.isMultiple&apos;}&quot;&gt;</pre>
</li>
</ul>
<div class="p">The formatter functions can also be called directly from JavaScript. The following
code snippet shows an example for the use of a formatter function outside
templating:<pre class="pre codeblock prettyprint">var oModel = this.getModel(),
    sPath = &quot;##com.sap.vocabularies.UI.v1.HeaderInfo/Description/Label&quot;,
    oContext = oModel.getContext(oModel.resolve(sPath, this.getBindingContext())),
    oLabel = new sap.m.Label({
        text : sap.ui.model.odata.AnnotationHelper.format(oContext)
    }));
...</pre></div>
<p class="p">The formatter functions are called with a context object as first parameter. The
second parameter (<samp class="ph codeph">vRawValue</samp>) is optional. If the value is not
provided, it is calculated in the formatter function. If the application has already
calculated the value, it passes the raw value as second parameter, thus avoiding
unnecessary further calculations of the raw value.</p>
<div class="section_title">Helper Functions</div>
<p class="p">The following helper functions can be used with
<samp class="ph codeph">&lt;template:with&gt;</samp>:</p>
<ul class="ul" id="loiodbec058964f545e4bb3b7e9fbaa0602d__ul_m4l_j2f_mr">
<li class="li">
<p class="p"><samp class="ph codeph">gotoEntityset</samp>: Helper function for a <samp class="ph codeph">with</samp>
instruction for the entity set with the given name or the entity set that
depending on how it is called has been determined by the last navigation
property of one of the following dynamic expressions: <em class="ph i">14.5.2 Expression
edm:AnnotationPath</em>, <em class="ph i">&quot;14.5.11 Expression
edm:NavigationPropertyPath&quot;</em>, <em class="ph i">&quot;14.5.12 Expression edm:Path&quot;</em>
and <em class="ph i">&quot;14.5.13 Expression edm:PropertyPath&quot;</em>.</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:with path=&quot;facet&gt;Target&quot; helper=&quot;sap.ui.model.odata.AnnotationHelper.gotoEntitySet&quot; var=&quot;entitySet&quot; /&gt;
&lt;template:with path=&quot;associationSetEnd&gt;entitySet&quot; helper=&quot;sap.ui.model.odata.AnnotationHelper.gotoEntitySet&quot; var=&quot;entitySet&quot;/&gt;</pre>
<p class="p">The binding context passed to the helper function, as determined by the
<samp class="ph codeph">template:with</samp> instruction&apos;s <samp class="ph codeph">path</samp>
property, must point to a simple string or to an annotation (or annotation
property) of type <samp class="ph codeph">Edm.AnnotationPath</samp>, embedded within an
entity set or type; the context&apos;s model must be an
<samp class="ph codeph">sap.ui.model.odata.ODataMetaModel</samp>.</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">gotoEntityType</samp>: Helper function for a <samp class="ph codeph">with</samp>
instruction that goes to the entity type with the given qualified name. The
binding context passed to the helper function, as determined by the
<samp class="ph codeph">template: with</samp> instruction&apos;s <samp class="ph codeph">path</samp>
property, must point to the qualified name of an entity type; the context&apos;s
model must be an <samp class="ph codeph">sap.ui.model.odata.ODataMetaModel</samp>.</p>
<p class="p"><strong class="ph b">Example:</strong> Assume that <samp class="ph codeph">entitySet</samp> refers to an entity
set within an OData meta model; the helper function is then called on the
<samp class="ph codeph">entityType</samp> property of that entity set (which holds the
qualified name of the entity type) and in turn the path of that entity type
is assigned to the variable <samp class="ph codeph">entityType</samp>.</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:with path=&quot;entitySet&gt;entityType&quot; helper=&quot;sap.ui.model.odata.AnnotationHelper.gotoEntityType&quot; var=&quot;entityType&quot;&gt;</pre>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">resolvePath</samp> is a helper function for a
<samp class="ph codeph">template:with</samp> instruction that resolves one of the
following dynamic expressions: <em class="ph i">14.5.2 Expression edm:AnnotationPath</em>,
<em class="ph i">&quot;14.5.11 Expression edm:NavigationPropertyPath&quot;</em>, <em class="ph i">&quot;14.5.12
Expression edm:Path&quot;</em> and <em class="ph i">&quot;14.5.13 Expression
edm:PropertyPath&quot;</em>. The function supports navigation properties and
term casts. The binding context passed to the helper function, as determined
by the <samp class="ph codeph">template:with</samp> instruction&apos;s path property, must
point to an annotation or annotation property of type
<samp class="ph codeph">Edm.AnnotationPath</samp>, embedded within an entity type, The
context&apos;s model must be
<samp class="ph codeph">sap.ui.model.odata.ODataMetaModel</samp>.</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:with path=&quot;meta&gt;Value&quot; helper=&quot;sap.ui.model.odata.AnnotationHelper.resolvePath&quot; var=&quot;target&quot;&gt;</pre>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">gotoFunctionImport</samp>: Helper function for a
<samp class="ph codeph">template:with</samp> instruction that goes to the function
import with the name which <samp class="ph codeph">oContext</samp> points at. Example:
Assume that <samp class="ph codeph">dataField</samp> refers to a
<samp class="ph codeph">DataFieldForAction</samp> within an OData meta model; the
helper function is then called on the <samp class="ph codeph">Action</samp> property of
that data field (which holds an object with the qualified name of the
function import in the String property) and in turn the path of that
function import is assigned to the variable <samp class="ph codeph">function</samp>.</p>
<pre class="pre codeblock prettyprint lang-xml">
&lt;template:with path=&quot;dataField&gt;Action&quot; helper=&quot;sap.ui.model.odata.AnnotationHelper.gotoEntityType&quot; var=&quot;function&quot;&gt;</pre>
</li>
</ul>
</div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.model.odata.AnnotationHelper" target="_top" alt="#/api/sap.ui.model.odata.AnnotationHelper" title="#/api/sap.ui.model.odata.AnnotationHelper">sap.ui.model.odata.AnnotationHelper</a></div><div><a class="extlink" href="http://help.sap.com/disclaimer?site=http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html" target="_blank" alt="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html" title="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html">OData Version 4.0<img src="themes/sap-default/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>