<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulating User Interactions on Controls</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="OPA5 has a built-in actions parameter that can be used for simulating events. If you use an action, OPA5 makes sure that the UI is in a state that allows the action to be executed."><meta name="description" content="OPA5 has a built-in actions parameter that can be used for simulating events. If you use an action, OPA5 makes sure that the UI is in a state that allows the action to be executed."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"952e2c7458e14d6581cdfc510fbb272a.html","previousTopicHref":"a88a5e5529e54b3aa703a0b2a36cf7be.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio8615a0b9088645ae936dbb8bbce5d01d"><h1 class="title topictitle1" hidden>Simulating User Interactions on Controls</h1><div class="body conbody"><p class="shortdesc" hidden>OPA5 has a built-in actions parameter that can be used for simulating events. If you use
an action, OPA5 makes sure that the UI is in a state that allows the action to be
executed.</p>
<p class="p">We recommend that you use actions and not success functions for user interactions as using
success functions doesn&apos;t execute the checks on the UI. You can use multiple actions on
one control and you can mix built-in actions with custom actions.</p>
<div class="section"><section class="section" type="Simulating a press Event"><h2 class="section_title" style="font-size: 1.15em;">Simulating a <samp class="ph codeph">press</samp> Event</h2>

<p class="p">In this example, we trigger a <samp class="ph codeph">press</samp> event on a button, using the
<samp class="ph codeph">waitFor</samp> function of OPA5, and the <samp class="ph codeph">Press</samp>
action. Note that the action has access to the located button implicitly.</p>
<pre class="pre codeblock prettyprint lang-js">oOpa.waitFor({
    id: &quot;myButton&quot;,
    actions: new Press()
});</pre>
</section></div>
<div class="section"><section class="section" type="Choosing an Item from sap.m.Select"><h2 class="section_title" style="font-size: 1.15em;">Choosing an Item from <samp class="ph codeph">sap.m.Select</samp></h2>

<p class="p">Here&apos;s an example showing how to choose an item from <samp class="ph codeph">sap.m.Select</samp>, using the
<samp class="ph codeph">waitFor</samp> function of OPA5, and the <samp class="ph codeph">Press</samp>
action:</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([
    &quot;sap/ui/test/opaQUnit&quot;,
    &quot;sap/ui/test/actions/Press&quot;,
    &quot;sap/ui/test/matchers/Properties&quot;,
    &quot;sap/ui/test/matchers/Ancestor&quot;
],  function (opaTest, Press, Properties, Ancestor) {

    opaTest(&quot;Should trigger a press event&quot;, function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id: &quot;mySelect&quot;,
            actions: new Press(),
            success: function(oSelect) {
                this.waitFor({
                    controlType: &quot;sap.ui.core.Item&quot;,
                    matchers: [
                        new Ancestor(oSelect),
                        new Properties({ key: &quot;Germany&quot;})
                    ],
                    actions: new Press(),
                    errorMessage: &quot;Cannot select Germany from mySelect&quot;
                });
            },
            errorMessage: &quot;Could not find mySelect&quot;
        });

        // Assert what happened after pressing using Then

    });

});</pre>
<p class="p">For <samp class="ph codeph">sap.m.Combobox</samp>, use <samp class="ph codeph">controlType:
&quot;sap.m.StandardListItem&quot;</samp>.</p>
</section></div>
<div class="section"><section class="section" type="Entering Text into Input Fields"><h2 class="section_title" style="font-size: 1.15em;">Entering Text into Input Fields</h2>

<p class="p">Use the <samp class="ph codeph">EnterText</samp> action when you want to enter text in a form
control.</p>
<p class="p">In this example, the text of an <samp class="ph codeph">sap.m.Input</samp> is changed twice. First,
&quot;Hello &quot; is entered as value. Then, with the second action, &quot;World&quot; is added. As a
result, the value of the input is &quot;Hello World&quot;.</p>
<pre class="pre codeblock prettyprint lang-js">oOpa.waitFor({
    id: &quot;myInput&quot;,
    actions: [
        new EnterText({ text: &quot;Hello &quot; }),
        new EnterText({ text: &quot;World&quot; })
    ]
});</pre>
<p class="p">There are a couple of modifiers to the <samp class="ph codeph">EnterText</samp> action:</p>
<ul class="ul" id="loio8615a0b9088645ae936dbb8bbce5d01d__ul_szq_m2j_thb">
<li class="li">
<p class="p">Use the <samp class="ph codeph">clearTextFirst</samp> property to empty the existing value
before entering new text. This example changes a control value to &quot;Hello&quot;
and then to &quot;World&quot; with two consecutive actions:</p>
<pre class="pre codeblock prettyprint lang-js">actions: [
    new EnterText({ text: &quot;Hello&quot; }), // changes Input value to &quot;Hello&quot;
    new EnterText({ text: &quot;World&quot;, clearTextFirst: true }) // changes Input value to &quot;World&quot;
]</pre>
</li>
<li class="li">
<p class="p">Use the <samp class="ph codeph">keepFocus</samp> property to preserve the focus on the
input after the action completes. This is useful if the control has enabled
suggestions that have to remain open after the text is entered. After the
text is entered, you can perform another OPA5 search for the suggestion
control and select it using a <samp class="ph codeph">Press</samp> action.</p>
<pre class="pre codeblock prettyprint lang-js">// Show the suggestion list with filter &quot;Jo&quot;
oOpa.waitFor({
    id: &quot;formInput&quot;,
    actions: new EnterText({
        text: &quot;Jo&quot;,
        keepFocus: true
    }),
    success: function (oInput) {
        // Select a suggestion by pressing an item with text &quot;John&quot;.
        // After the press action, the value of the input should be changed to &quot;John&quot;.
        // Note that the focus will remain in the input field.
        this.waitFor({
            controlType: &quot;sap.m.StandardListItem&quot;,
            matchers: [
                new Ancestor(oInput),
                new Properties({
                    title: &quot;John&quot;
                })
            ],
            actions: new Press()
        });
    }
});</pre>
</li>
<li class="li">
<p class="p">Use the <samp class="ph codeph">pressEnterKey</samp> property to add an
<samp class="ph codeph">enter</samp> key to the end of the input. This triggers the
<samp class="ph codeph">change</samp> event for the input and the input remains
focused. If you use this when focusing out of the input results in unwanted
results. For example, focusing out of inputs in a popup results in the popup
closing only in some browsers, which leads to inconsistent test results.</p>
<pre class="pre codeblock prettyprint lang-js">oOpa.waitFor({
    controlType: &quot;sap.m.Input&quot;,
    searchOpenDialogs: true,
    actions: new EnterText({
        text: &quot;test&quot;,
        pressEnterKey: true
    })
});
oOpa.waitFor({
    controlType: &quot;sap.m.Popover&quot;,
    searchOpenDialogs: true,
    success: function (aPopover) {
        Opa5.assert.ok(aPopover[0].isOpen(), &quot;Popover should remain open on any browser&quot;);
    }
});</pre>
</li>
</ul>
</section></div>
<div class="section" id="loio8615a0b9088645ae936dbb8bbce5d01d__section_tmf_bpm_2cb"><section class="section" type="Table Interaction"><h2 class="section_title" style="font-size: 1.15em;">Table Interaction</h2>

<p class="p">A Table consists of columns (<samp class="ph codeph">sap.m.Column</samp>) and rows. The rows, defined as
<samp class="ph codeph">sap.m.ColumnListItems</samp>, consist of cells. In order to use a
stable locator, which isn&#x2019;t expected to change frequently, you can use a field/value
combination to retrieve and interact with table items.</p>
<p class="p">The following example simulates a click on an item in a table. The name of the field can be
found in the $metadata file of your OData service.</p>
<pre class="pre codeblock prettyprint">iClickOnTableItemByFieldValue: function () {
                    return this.waitFor({
                        controlType: &quot;sap.m.ColumnListItem&quot;,

                        // Retrieve all list items in the table
                        matchers: [function(oCandidateListItem) {
                            var oTableLine = {};
                            oTableLine = oCandidateListItem.getBindingContext().getObject();
                            var sFound = false;

                            // Iterate through the list items until the specified cell is found
                            for (var sName in oTableLine) {
                                if ((sName === &quot;Field Name&quot;) &amp;&amp; (oTableLine[sName].toString() === &quot;Cell Value&quot;)) {
                                     QUnit.ok(true, &quot;Cell has been found&quot;);
                                    sFound = true;
                                    break;
                                }
                            }
                            return sFound;
                        }],

                        // Click on the specified item
                        actions: new Press(),
                        errorMessage: &quot;Cell could not be found in the table&quot;
                     });
                }</pre>
</section></div>
<div class="section" id="loio8615a0b9088645ae936dbb8bbce5d01d__section_qn2_rhr_vkb"><section class="section" type="Simulating Drag and Drop"><h2 class="section_title" style="font-size: 1.15em;">Simulating Drag and Drop</h2>

<p class="p">As of version 1.76, you can use the <samp class="ph codeph">sap.ui.test.actions.Drag</samp> and
<samp class="ph codeph">sap.ui.test.actions.Drop</samp> actions.</p>
<p class="p">First, locate a control to drag and use the <samp class="ph codeph">Drag</samp> action with it.
Then, locate the control on which you wish to drop the first control, and use the
<samp class="ph codeph">Drop</samp> action with it. The <samp class="ph codeph">Drop</samp> action accepts
several optional parameters to specify the drop target:</p>
<ul class="ul" id="loio8615a0b9088645ae936dbb8bbce5d01d__ul_jzd_j3r_vkb">
<li class="li">
<p class="p">Use <samp class="ph codeph">idSuffix</samp> to set an exact DOM element within the control
tree</p>
</li>
<li class="li">
<p class="p">Use <samp class="ph codeph">aggregationName</samp> to set the target to be the DOM element
for this aggregation</p>
</li>
<li class="li">
<p class="p">Use <samp class="ph codeph">before</samp> or <samp class="ph codeph">after</samp> to choose whether the
dragged control should be dropped before or after the drop target.</p>
</li>
</ul>
<p class="p">The following example rearranges items in a list:</p>
<pre class="pre codeblock prettyprint lang-js">// Find the item to drag
oOpa.waitFor({
    controlType: &quot;sap.m.StandardListItem&quot;,
    matchers: new BindingPath({
        path: &quot;/ProductCollection/1&quot;
    }),
    // Start the dragging
    actions: new Drag()
});

// Find another item on which to drop the dragged item
oOpa.waitFor({
    controlType: &quot;sap.m.StandardListItem&quot;,
    matchers: new BindingPath({
        path: &quot;/ProductCollection/5&quot;
    }),
    // Finish dragging and drop the item right before this one.
    // In the end, the item with binding context path &quot;/ProductCollection/1&quot; should appear right on top of the item with
    // binding context path &quot;/ProductCollection/5&quot;
    actions: new Drop({
        before: true
    })
});</pre>
</section></div>
<div class="section"><section class="section" type="Writing Your Own Action"><h2 class="section_title" style="font-size: 1.15em;">Writing Your Own Action</h2>

<p class="p">Since OPA5 uses JavaScript for its execution, you can&#x2019;t use native browser events to simulate
user events. Sometimes it&apos;s also hard to know the exact position where to click or
enter your keystrokes since <span class="ph"><span class="ph pname">OpenUI5</span></span> controls don&apos;t
have a common interface for that. If you find you&apos;re missing a certain built-in
action, you can create your own actions easily. Just provide an inline function as
shown here:</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([&quot;sap/ui/test/opaQUnit&quot;, &quot;sap/ui/test/matchers/Properties&quot;], function (opaTest, Properties) {

    opaTest(&quot;Should simulate press on the delete button&quot;, function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id : &quot;entryList&quot;,
            matchers : new Properties({ mode : &quot;Delete&quot;}),
            actions: function (oList) {
                oList.fireDelete({listItem : oList.getItems()[0]});
            },
            errorMessage : &quot;The delete button could not be pressed&quot;
        });

        // Assert what happened after selecting the item using Then

    });

});</pre>
</section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.ui.test.actions" target="_top" alt="#/api/sap.ui.test.actions" title="#/api/sap.ui.test.actions">API Reference: <samp class="ph codeph">sap.ui.test.actions</samp></a></div><div><a class="link" href="../../#/api/sap.ui.test.actions.EnterText" target="_top" alt="#/api/sap.ui.test.actions.EnterText" title="#/api/sap.ui.test.actions.EnterText">API Reference: <samp class="ph codeph">sap.ui.test.actions.EnterText</samp></a></div><div><a class="link" href="../../#/api/sap.ui.test.actions.Press" target="_top" alt="#/api/sap.ui.test.actions.Press" title="#/api/sap.ui.test.actions.Press">API Reference: <samp class="ph codeph">sap.ui.test.actions.Press</samp></a></div><div><a class="link" href="../../#/api/sap.ui.test.matchers.Interactable" target="_top" alt="#/api/sap.ui.test.matchers.Interactable" title="#/api/sap.ui.test.matchers.Interactable">API Reference: <samp class="ph codeph">sap.ui.test.matchers.Interactable</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>