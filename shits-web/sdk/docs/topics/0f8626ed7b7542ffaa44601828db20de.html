<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 23: Custom Formatters</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="If we want to do a more complex logic for formatting properties of our data model, we can also write a custom formatting function. We will now add a localized status with a custom formatter, because the status in our data model is in a rather technical format."><meta name="description" content="If we want to do a more complex logic for formatting properties of our data model, we can also write a custom formatting function. We will now add a localized status with a custom formatter, because the status in our data model is in a rather technical format."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"5295470d7eee46c1898ee46c1b9ad763.html","previousTopicHref":"c98d57347ba444c6945f596584d2db45.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/c98d57347ba444c6945f596584d2db45.html" title="Sometimes the predefined types of OpenUI5 are not flexible enough and you want to do a simple calculation or formatting in the view - that is where expressions are really helpful. We use them to format our price according to the current number in the data model." target="_top">Step 22: Expression Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/5295470d7eee46c1898ee46c1b9ad763.html" title="In this step, we add a search field for our product list and define a filter that represents the search term. When searching, the list is automatically updated to show only the items that match the search term." target="_top">Step 24: Filtering</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loio0f8626ed7b7542ffaa44601828db20de"><h1 class="title topictitle1" hidden>Step 23: Custom Formatters</h1><div class="body conbody"><p class="shortdesc" hidden>If we want to do a more complex logic for formatting properties of our data model, we
can also write a custom formatting function. We will now add a localized status with a
custom formatter, because the status in our data model is in a rather technical
format.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio0f8626ed7b7542ffaa44601828db20de__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loio0f8626ed7b7542ffaa44601828db20de__image_ycr_222_yr" src="loio7e0112d9ffe54e568fa8ecc44a5af3bf_HiRes.png">
</div><span class="figcap">A status is now displayed with a custom formatter</span></div>
</section></div>
<div class="section">
<div class="section_title">Coding</div>
<p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.m.tutorial.walkthrough.23/preview" target="_top" alt="#/sample/sap.m.tutorial.walkthrough.23/preview" title="#/sample/sap.m.tutorial.walkthrough.23/preview">Walkthrough - Step 23</a></span>.</p>
<div class="section_title">webapp/model/formatter.js (New)</div>
<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">sap.ui.define([], function () {
	&quot;use strict&quot;;
	return {
		statusText: function (sStatus) {
			var resourceBundle = this.getView().getModel(&quot;i18n&quot;).getResourceBundle();
			switch (sStatus) {
				case &quot;A&quot;:
					return resourceBundle.getText(&quot;invoiceStatusA&quot;);
				case &quot;B&quot;:
					return resourceBundle.getText(&quot;invoiceStatusB&quot;);
				case &quot;C&quot;:
					return resourceBundle.getText(&quot;invoiceStatusC&quot;);
				default:
					return sStatus;
			}
		}
	};
});</span></pre>
<p class="p">We create a new folder <samp class="ph codeph">model</samp> in our app project. The new <samp class="ph codeph">formatter</samp> file is placed in the model folder of the
app, because formatters are working on data properties and format them for display on the UI. So far we did not have any model-related
artifacts, except for the <span class="ph filepath">Invoices.json</span> file, we will now add the folder <samp class="ph codeph">webapp/model</samp> to our
app. This time we do not extend from any base object but just return a JavaScript object with our <samp class="ph codeph">formatter</samp> functions
inside the <samp class="ph codeph">sap.ui.define</samp> call.</p>
<p class="p">Function <samp class="ph codeph">statusText</samp> gets the technical status from the data model as input parameter and returns a human-readable text that is read from
the <samp class="ph codeph">resourceBundle</samp> file.</p>
</div>
<div class="section"><section class="section" type="webapp/controller/InvoiceList.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/InvoiceList.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/core/mvc/Controller&quot;,
	&quot;sap/ui/model/json/JSONModel&quot;<span class="ph emphasis emphasis">,
	&quot;../model/formatter&quot;</span>
], function (Controller, JSONModel, <span class="ph emphasis emphasis">formatter</span>) {
	&quot;use strict&quot;;
	return Controller.extend(&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;, {
		<span class="ph emphasis emphasis">formatter: formatter,</span>
		onInit : function () {
			var oViewModel = new JSONModel({
				currency: &quot;EUR&quot;
			});
			this.getView().setModel(oViewModel, &quot;view&quot;);
		}
	});
});</pre>
<p class="p">To load our formatter functions, we have to add it to the
<samp class="ph codeph">InvoiceList.controller.js</samp>. In this controller, we first add a
dependency to our custom <samp class="ph codeph">formatter</samp> module. The controller simply
stores the loaded formatter functions in the local property
<samp class="ph codeph">formatter</samp> to be able to access them in the view.</p>
</section></div>
<div class="section"><section class="section" type="webapp/view/InvoiceList.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/InvoiceList.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName=&quot;sap.ui.demo.walkthrough.controller.InvoiceList&quot;
	xmlns=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;List
			headerText=&quot;{i18n&gt;invoiceListTitle}&quot;
		class=&quot;sapUiResponsiveMargin&quot;
		width=&quot;auto&quot;
		items=&quot;{invoice&gt;/Invoices}&quot;&gt;
		&lt;items&gt;
			&lt;ObjectListItem
				title=&quot;{invoice&gt;Quantity} x {invoice&gt;ProductName}&quot;
				number=&quot;{
					parts: [{path: &apos;invoice&gt;ExtendedPrice&apos;}, {path: &apos;view&gt;/currency&apos;}],
					type: &apos;sap.ui.model.type.Currency&apos;,
					formatOptions: {
						showMeasure: false
					}
				}&quot;
				numberUnit=&quot;{view&gt;/currency}&quot;
				numberState=&quot;{=	${invoice&gt;ExtendedPrice} &gt; 50 ? &apos;Error&apos; : &apos;Success&apos; }&quot;<span class="ph emphasis emphasis">&gt;
				&lt;firstStatus&gt;
					&lt;ObjectStatus text=&quot;{
						path: &apos;invoice&gt;Status&apos;,
						formatter: &apos;.formatter.statusText&apos;
					}&quot;/&gt;
				&lt;/firstStatus&gt;
			&lt;/ObjectListItem&gt;</span>
		&lt;/items&gt;
	&lt;/List&gt;
&lt;/mvc:View&gt;</pre>
<p class="p">We add a status using the <samp class="ph codeph">firstStatus</samp> aggregation to our
<samp class="ph codeph">ObjectListItem</samp> that will display the status of our invoice. The
custom formatter function is specified with the reserved property
<samp class="ph codeph">formatter</samp> of the binding syntax. A <samp class="ph codeph">&quot;.&quot;</samp> in
front of the formatter name means that the function is looked up in the controller
of the current view. There we defined a property <samp class="ph codeph">formatter</samp> that
holds our formatter functions, so we can access it by
<samp class="ph codeph">.formatter.statusText</samp>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/i18n/i18n.properties"><h2 class="section_title" style="font-size: 1.15em;">webapp/i18n/i18n.properties</h2>

<pre class="pre codeblock prettyprint lang-prefs"># App Descriptor
appTitle=Hello World
appDescription=A simple walkthrough app that explains the most important concepts of <span class="ph"><span class="ph pname">OpenUI5</span></span>

# Hello Panel
showHelloButtonText=Say Hello
helloMsg=Hello {0}
homePageTitle=Walkthrough
helloPanelTitle=Hello World
openDialogButtonText=Say Hello With Dialog
dialogCloseButtonText=Ok

# Invoice List
invoiceListTitle=Invoices
<span class="ph emphasis emphasis">invoiceStatusA=New
invoiceStatusB=In Progress
invoiceStatusC=Done</span></pre>
<p class="p">We add three new entries to the resource bundle that reflect our translated status texts.
These texts are now displayed below the <samp class="ph codeph">number</samp> attribute of the
<samp class="ph codeph">ObjectListItem</samp> dependent on the status of the invoice.</p>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/3da5f4be63264db99f2e5b04c5e853db.html" title="In this tutorial we will introduce you to all major development paradigms of OpenUI5." target="_top">Walkthrough</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/c98d57347ba444c6945f596584d2db45.html" title="Sometimes the predefined types of OpenUI5 are not flexible enough and you want to do a simple calculation or formatting in the view - that is where expressions are really helpful. We use them to format our price according to the current number in the data model." target="_top">Step 22: Expression Binding</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/5295470d7eee46c1898ee46c1b9ad763.html" title="In this step, we add a search field for our product list and define a filter that represents the search term. When searching, the list is automatically updated to show only the items that match the search term." target="_top">Step 24: Filtering</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/07e4b920f5734fd78fdaa236f26236d8.html" title="Data that is presented on the UI often has to be converted so that is human readable and fits to the locale of the user. On the other hand, data entered by the user has to be parsed and validated to be understood by the data source. For this purpose, you use formatters and data types." target="_top">Formatting, Parsing, and Validating Data</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>