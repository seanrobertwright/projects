<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Test Libraries for OPA5</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="Test libraries are a means of collaboration between app developers and reusable content providers."><meta name="description" content="Test libraries are a means of collaboration between app developers and reusable content providers."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"8615a0b9088645ae936dbb8bbce5d01d.html","previousTopicHref":"9c22d2ada0414d97837b845e1e85ab86.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loioa88a5e5529e54b3aa703a0b2a36cf7be"><h1 class="title topictitle1" hidden>Test Libraries for OPA5</h1><div class="body conbody"><p class="shortdesc" hidden>Test libraries are a means of collaboration between app developers and reusable content
providers.</p>
<p class="p">As of version 1.48, you can declare OPA5 test libraries to be used within your integration
tests. </p>
<p class="p">The main benefit is reduced test maintenance efforts and avoidance of code repetition. You can
isolate generic actions and validations in a test library and reuse them across apps,
for example, clicking search and back buttons, and validating table content. As a
result, app tests are simplified and have compact page objects and short journeys. The
test library provider is responsible for keeping it up to date with component changes,
which significantly lowers maintenance costs.</p>
<div class="section" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__section_trz_xnv_4bb"><section class="section" type="Consuming a Test Library"><h2 class="section_title" style="font-size: 1.15em;">Consuming a Test Library</h2>

<p class="p">There are 3 simple steps to start using a test library:</p>
<ol class="ol" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__ol_lls_14v_4bb">
<li class="li">
<p class="p">Define the test library resource root in the QUnit start page.</p>
<p class="p">For example, the app <samp class="ph codeph">my.application</samp> has a dependency on the
test library <samp class="ph codeph">my.awesome.testlibrary</samp> and its test resources
are built into the directory <samp class="ph codeph">test-resources</samp>.</p>
<pre class="pre codeblock prettyprint lang-html">&lt;script id=&quot;sap-ui-bootstrap&quot;
    src=&quot;../../resources/sap-ui-core.js&quot;
    data-sap-ui-resourceroots=&apos;<span class="ph emphasis emphasis">{
        &quot;my.application.test.integration&quot;: &quot;./&quot;,
        &quot;my.awesome.testlibrary.integration.testLibrary&quot; : &quot;../../../test-resources/my/awesome/testlibrary/integration/testLibrary&quot;
</span>
    }&apos;&gt;
&lt;/script&gt;</pre>
</li>
<li class="li">
<p class="p">Add the name of the library and its configuration object to the
<samp class="ph codeph">testLibs</samp> OPA5 configuration property:</p>
<pre class="pre codeblock prettyprint">Opa5.extendConfig({
    testLibs: {
        myAwesomeTestLibrary: {
            appId: &quot;my.application.appId&quot;,
            entitySet: &quot;MyExampleEntitySet&quot;,
            viewNamespace: &quot;my.application.mainView&quot;
        }
    }</pre>
</li>
<li class="li">
<p class="p">Require the test library modules in your test files:</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([
    &quot;sap/ui/test/Opa5&quot;,
    &quot;my/awesome/testlibrary/integration/testLibrary/ExampleList/pages/ExampleList&quot;
], function (Opa5, ExampleList) {
    // you can now use ExampleList&apos;s actions and assertions
    When.onTheTestLibraryPage.iDoThings();
    Then.onTheTestLibraryPage.iCheckTheResult();
});</pre>
</li>
</ol>
</section></div>
<div class="section" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__section_xdl_ndb_4gb"><section class="section" type="Reusing Functionality"><h2 class="section_title" style="font-size: 1.15em;">Reusing Functionality</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">Page Objects</p>
<p class="p">You can directly consume page objects defined by the test library. We recommend
you follow the pattern described in <a class="xref" href="../../#/topic/f2f843d375384d56bbf955a80ee66ab6.html" title="The page object design pattern supports UI-based tests with improved readability, fostering the don&apos;t repeat yourself (DRY) principle of software development that is aimed at reducing repetition of any kind of information." target="_top">Structuring OPA Tests With Page Objects</a>.</p>
<p class="p">Here is an example, assuming that the page object <samp class="ph codeph">onTheListPage</samp>
is defined by a test library:</p>
<pre class="pre codeblock prettyprint lang-js">Then.onTheListPage.iSearchForItem();</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Page Object Utilities</p>
<p class="p">If a test library has exposed utilities, you can use them in your own page
objects to simplify interaction with complex controls. There are two steps to
start reusing utility functions:</p>
<ol class="ol" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__ol_u2z_c2b_4gb">
<li class="li">
<p class="p">Configure the test library:</p>
<pre class="pre codeblock prettyprint lang-js">Opa5.extendConfig({
    testLibs: {
        myAwesomeTestLibrary: {...}
    }
});</pre>
</li>
<li class="li">
<p class="p">Load the test library before the page objects that will use it.</p>
<p class="p">The utilities will be available on the page object instance under a
property matching the name of the test library:</p>
<pre class="pre codeblock prettyprint lang-js">Opa5.createPageObjects({
    onTheListPage: {
        viewName: &quot;myTestView&quot;,
        actions: {
            iSetTheFilter: function () {
                this.myAwesomeTestLibrary.iSelectItem();
                // trigger other interactions
            }
        }
    }
});

Then.onTheListPage.iSetTheFilter();</pre>
</li>
</ol>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Global Configuration</p>
<p class="p">Global statements set by a test library are defined and used in the same way as
global statements set by a consumer.</p>
<p class="p">Here is an example, assuming that the action <samp class="ph codeph">iSetupTheApp</samp> is
added by a test library:</p>
<pre class="pre codeblock prettyprint lang-js">Given.iSetupTheApp();</pre>
</div></section></div>
<div class="section" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__section_n53_ynv_4bb"><section class="section" type="Creating a Test Library"><h2 class="section_title" style="font-size: 1.15em;">Creating a Test Library</h2>

<p class="p">The test library consists of OPA5 statements written the same way as in a regular test. Users
should be able to provide app-specific parameters, such as app ID, view names,
control IDs, control labels and texts.</p>
<p class="p">The test library can access the configuration provided by the consumer test in the following
manner:</p>
<pre class="pre codeblock prettyprint">var oConfiguration = Opa5.getTestLibConfig(&quot;myAwesomeTestLibrary&quot;);
oConfiguration.appId === &quot;my.application.appId&quot; // true</pre>
</section></div>
<div class="section" id="loioa88a5e5529e54b3aa703a0b2a36cf7be__section_hjg_3gb_4gb"><section class="section" type="Exposing Functionality"><h2 class="section_title" style="font-size: 1.15em;">Exposing Functionality</h2><p class="p">There are several
ways to expose functionality from a test library.</p><div class="sectiondiv subsection">
<p class="p subsectiontitle">Page Objects</p>
<p class="p">We recommend you use the page objects pattern described in <a class="xref" href="../../#/topic/f2f843d375384d56bbf955a80ee66ab6.html" title="The page object design pattern supports UI-based tests with improved readability, fostering the don&apos;t repeat yourself (DRY) principle of software development that is aimed at reducing repetition of any kind of information." target="_top">Structuring OPA Tests With Page Objects</a>. Page objects created by
this pattern are automatically available for the app tests.</p>
<p class="p">Use this pattern for interactions that always involve a single page:</p>
<pre class="pre codeblock prettyprint lang-js">Opa5.createPageObjects({
    onTheListPage: {
        viewName: &quot;myTestView&quot;,
        actions: {
            iSearchForItem: function () {
                // find a search field and enter some text
            }
        }
    }
});</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Page Object Utilities</p>
<p class="p">Define utility functions when you need to expose functionality that will be used
as a building block for user page objects. A utility function can be used by
multiple page objects.</p>
<p class="p">A common use case is the interaction with a single control:</p>
<pre class="pre codeblock prettyprint lang-js">Opa5.extendConfig({
    testLibBase: {
        myAwesomeTestLibrary: {
            actions: {
                iSelectItem: function: () {
                    // choose item of a Select
                }
            }
        }
    }
});</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Global Configuration</p>
<p class="p">Extending OPA5 configuration from within the test library has an effect on the
app test as well. This means that you can also set global OPA5 test
statements.</p>
<p class="p">Use this pattern when you need to expose functionality relevant to the the entire
app, such as setup and teardown:</p>
<pre class="pre codeblock prettyprint lang-js">var Common = Opa5.extend(&quot;testLibrary.pageObjects.Common&quot;, {
    iSetupTheApp: function () {
        // do some setup actions
    }
});
Opa5.extendConfig({
    actions: new Common()
});</pre>
</div></section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/entity/sap.ui.test.Opa5" target="_top" alt="#/entity/sap.ui.test.Opa5" title="#/entity/sap.ui.test.Opa5">Samples: <samp class="ph codeph">sap.ui.test.Opa5</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>