<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 8: OData Operations</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="Our OData service provides one OData operation: the ResetDataSource action. In this step, we add a button that resets all data changes we made during the tutorial to their original state using this action."><meta name="description" content="Our OData service provides one OData operation: the ResetDataSource action. In this step, we add a button that resets all data changes we made during the tutorial to their original state using this action."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"1b6dcd39a6a74f528b27ddb22f15af0d.html","previousTopicHref":"12a0d1ef150a42ef81e9f07fe6407018.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/bcdbde6911bd4fc68fd435cf8e306ed0.html" title="In this tutorial, we explore how features of OData V4 can be used in OpenUI5. We write a small app that consumes data from an OData V4 service to understand how to access, modify, aggregate, and filter data in an OData V4 model." target="_top">OData V4</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/12a0d1ef150a42ef81e9f07fe6407018.html" title="In this step, we make it possible to delete user data." target="_top">Step 7: Delete</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loioa3e7cb6f671b4b839f37eb5f88429e41"><h1 class="title topictitle1" hidden>Step 8: OData Operations</h1><div class="body conbody"><p class="shortdesc" hidden>Our OData service provides one OData operation: the <samp class="ph codeph">ResetDataSource</samp>
action. In this step, we add a button that resets all data changes we made during the
tutorial to their original state using this action.</p>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_bt4_fxc_z1b"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>
<div class="fig fignone" id="loioa3e7cb6f671b4b839f37eb5f88429e41__fig_ybl_pdx_4cb"><div class="figbody">

<img class="inline" id="loioa3e7cb6f671b4b839f37eb5f88429e41__image_dsw_pdx_4cb" src="loioe518debe1cdc4fcd9f5a6cffd014fbfa_LowRes.png">
</div><span class="figcap">A <span class="ph uicontrol">Restart Tutorial</span> button is added</span></div></section></div>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_tsr_gxc_z1b"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2><p class="p">You can view and download all files <span class="ph">at <a class="xref" href="../../#/sample/sap.ui.core.tutorial.odatav4.08/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.odatav4.08/preview" title="#/sample/sap.ui.core.tutorial.odatav4.08/preview">OData V4 - Step 8</a></span>.</p></section></div>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_pvc_fyc_z1b"><section class="section" type="webapp/controller/App.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/App.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">...
		onResetChanges : function () {
			this.byId(&quot;peopleList&quot;).getBinding(&quot;items&quot;).resetChanges();
			this._setUIChanges();
		},

		<span class="ph emphasis emphasis">onResetDataSource : function () {
			var oModel = this.getView().getModel(),
				oOperation = oModel.bindContext(&quot;/ResetDataSource(...)&quot;);

			oOperation.execute().then(function () {
					oModel.refresh();
					MessageToast.show(this._getText(&quot;sourceResetSuccessMessage&quot;));
				}.bind(this), function (oError) {
					MessageBox.error(oError.message);
				}
			);
		},</span>

		onSave : function () {
...
</pre>
<p class="p">The <samp class="ph codeph">onResetDataSource</samp> event handler calls the
<samp class="ph codeph">ResetDataSource</samp> action, which is an action of the
<span class="ph uicontrol">TripPin</span> OData service that resets the data of the service
to its original state.</p>
<p class="p">We call that action by first creating a deferred operation binding on the model. The
<samp class="ph codeph">(&#x2026;)</samp> part of the binding syntax marks the binding as deferred.
We use a deferred binding because we want to control when the action is executed.
Since it is deferred, we need to explicitly call its <samp class="ph codeph">execute</samp>
method.</p>
<p class="p">The execution is asynchronous, therefore the execute method returns a
<samp class="ph codeph">Promise</samp>. We attach simple success and error handlers to that
<samp class="ph codeph">Promise</samp> by calling its <samp class="ph codeph">then</samp> method.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">Many of the methods in the OData V4 API of <span class="ph"><span class="ph pname">OpenUI5</span></span> return a
<samp class="ph codeph">Promise</samp> to manage asynchronous processing</p></aside>
</section></div>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_pp2_mxc_z1b"><section class="section" type="webapp/view/App.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/App.view.xml</h2><pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName=&quot;sap.ui.core.tutorial.odatav4.controller.App&quot;
	displayBlock=&quot;true&quot;
	xmlns=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;Shell&gt;
		&lt;App busy=&quot;{appView&gt;/busy}&quot; class=&quot;sapUiSizeCompact&quot;&gt;
			&lt;pages&gt;
				&lt;Page title=&quot;{i18n&gt;peoplePageTitle}&quot;&gt;
<span class="ph emphasis emphasis">					&lt;headerContent&gt;
						&lt;Button
							id=&quot;resetChangesButton&quot;
							text=&quot;{i18n&gt;resetChangesButtonText}&quot;
							enabled=&quot;{= !${appView&gt;/hasUIChanges}}&quot;
							press=&quot;onResetDataSource&quot;
							type=&quot;Emphasized&quot;&gt;
						&lt;/Button&gt;
					&lt;/headerContent&gt;</span>
...</pre><p class="p">We add the <span class="ph emphasis emphasis">headerContent</span> aggregation to the <span class="ph emphasis emphasis">Page</span> and
insert the new <span class="ph emphasis emphasis">Button</span>. We add the
<span class="ph emphasis emphasis">onResetDataSource</span> event handler to the
<span class="ph emphasis emphasis">press</span> event.</p></section></div>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_kl4_d1x_4cb"><section class="section" type="webapp/i18n/i18n.properties"><h2 class="section_title" style="font-size: 1.15em;">webapp/i18n/i18n.properties</h2>

<pre class="pre codeblock prettyprint lang-prefs">...
# Toolbar
...
<span class="ph emphasis emphasis">#XBUT: Button text for reset changes
resetChangesButtonText=Restart Tutorial</span>
...
# Messages
...
<span class="ph emphasis emphasis">#XMSG: Message for changes reverted
sourceResetSuccessMessage=All changes reverted back to start</span></pre>
<p class="p">We add the missing texts to the properties file.</p>
</section></div>
<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_rtl_jnx_pcb">And now we are done! We built a simple application with user
data from an OData V4 service. We can display, edit, create, and delete users. And we
use OData V4 features such as batch groups and automatic type detection.</div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/bcdbde6911bd4fc68fd435cf8e306ed0.html" title="In this tutorial, we explore how features of OData V4 can be used in OpenUI5. We write a small app that consumes data from an OData V4 service to understand how to access, modify, aggregate, and filter data in an OData V4 model." target="_top">OData V4</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/12a0d1ef150a42ef81e9f07fe6407018.html" title="In this step, we make it possible to delete user data." target="_top">Step 7: Delete</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/54e0ddf695af4a6c978472cecb01c64d.html" title="Bindings connect OpenUI5 view elements to model data, allowing changes in the model to be reflected in the view element and vice versa." target="_top">Bindings</a></div><div><a class="link" href="../../#/topic/b54f7895b7594c61a83fa7257fa9d13f.html" title="The OData V4 model supports OData operations (ActionImport, FunctionImport, bound Actions and bound Functions). Unbound parameters are limited to primitive values." target="_top">OData Operations</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>