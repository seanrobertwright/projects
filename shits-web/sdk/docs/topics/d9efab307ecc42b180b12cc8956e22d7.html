<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step 5: Display a Target Without Changing the Hash</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="In this step, you will learn more about targets and how to display a target from the routing configuration manually."><meta name="description" content="In this step, you will learn more about targets and how to display a target from the routing configuration manually."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"782aac08f2de4003a2fcbdd39d27f374.html","previousTopicHref":"66670b0aab3948469d5cc8276113e9ea.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/66670b0aab3948469d5cc8276113e9ea.html" title="When we are on the Not Found page because of an invalid hash, we want to get back to our app to select another page. Therefore, we will add a Back button to the Not Found view and make sure that the user gets redirected to either the previous page or the overview page when the Back button is pressed." target="_top">Step 4: Add a Back Button to Not Found Page</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/782aac08f2de4003a2fcbdd39d27f374.html" title="In this step, we&apos;ll create a second button on the home page, with which we can navigate to a simple list of employees. This example illustrates how to navigate to a route that has a hard-coded pattern." target="_top">Step 6: Navigate to Routes with Hard-Coded Patterns</a><br></div></div></div><div class="page concept  - topic-topic concept-concept " id="loiod9efab307ecc42b180b12cc8956e22d7"><h1 class="title topictitle1" hidden>Step 5: Display a Target Without Changing the Hash</h1><div class="body conbody"><p class="shortdesc" hidden>In this step, you will learn more about targets and how to display a target from the routing configuration manually. </p>
<p class="p">We will display the <span class="ph uicontrol">Not Found</span> target from the previous step without changing the
hash to illustrate this navigation pattern. We will also consider a side-effect that
prevents us from navigating back in this case. </p>
<p class="p">Fortunately, we can extend our app and offer an easy solution. There are some use cases
that should not be persisted in the URL but just be triggered by the application logic
if needed. A target is a navigation-related configuration for a view and we can display
targets manually without referencing them in a navigation route. Good examples for this
are temporary errors, switching to an edit page for a business object, or going to a
<span class="ph uicontrol">Settings</span> page. Sometimes you will also have to implement a
way back manually.</p>
<div class="section"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loiod9efab307ecc42b180b12cc8956e22d7__fig_r1j_pst_mr"><div class="figbody">

<img class="inline" id="loiod9efab307ecc42b180b12cc8956e22d7__image_fgl_3vh_ns" src="loio64fc7de39bed41d48d01e08244f201ab_LowRes.png">
</div><span class="figcap">The new <span class="ph uicontrol">Home</span> page with a navigation button</span></div>
</section></div>
<div class="section"><section class="section" type="Coding"><h2 class="section_title" style="font-size: 1.15em;">Coding</h2>

<p class="p">You can view and download all files in the <span class="ph uicontrol">Samples</span> in the Demo
-kit <span class="ph">at
<a class="xref" href="../../#/sample/sap.ui.core.tutorial.navigation.05/preview" target="_top" alt="#/sample/sap.ui.core.tutorial.navigation.05/preview" title="#/sample/sap.ui.core.tutorial.navigation.05/preview">Routing and Navigation - Step
5</a></span>.</p>
</section></div>
<div class="section"><section class="section" type="webapp/view/Home.view.xml"><h2 class="section_title" style="font-size: 1.15em;">webapp/view/Home.view.xml</h2>

<pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName=&quot;sap.ui.demo.nav.controller.Home&quot;
	xmlns=&quot;sap.m&quot;
	xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
	&lt;Page title=&quot;{i18n&gt;homePageTitle}&quot; class=&quot;sapUiResponsiveContentPadding&quot;&gt;
		&lt;content&gt;
			&lt;Button <span class="ph emphasis emphasis">id=&quot;displayNotFoundBtn&quot; text=&quot;{i18n&gt;DisplayNotFound}&quot; press=&quot;.onDisplayNotFound&quot; class=&quot;sapUiTinyMarginEnd&quot;/&gt;
		&lt;/content&gt;
	&lt;/Page&gt;
&lt;/mvc:View&gt;</span></pre>
<p class="p">We start by changing the <samp class="ph codeph">Button</samp> control from the home view. When the button is pressed, the <samp class="ph codeph">onDisplayNotFound</samp>
handler is called. </p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/Home.controller.js"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/Home.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/nav/controller/BaseController&quot;
], function (BaseController) {
	&quot;use strict&quot;;
	return BaseController.extend(&quot;sap.ui.demo.nav.controller.Home&quot;, {
<span class="ph emphasis emphasis">		onDisplayNotFound : function () {
			//display the &quot;notFound&quot; target without changing the hash
			this.getRouter().getTargets().display(&quot;notFound&quot;);
		}</span>
	});
});</pre>
<p class="p">Inside the <samp class="ph codeph">onDisplayNotFound</samp> handler we get a reference to the
<samp class="ph codeph">Targets</samp> helper object of the router and simply call
<samp class="ph codeph">display(&quot;notFound&quot;)</samp>. The view associated to the target with the
name <samp class="ph codeph">notFound</samp> from the routing configuration will be displayed by
the router without changing the hash.</p>
<p class="p">The <samp class="ph codeph">sap.m.routing.Targets</samp> object itself can be retrieved by calling
<samp class="ph codeph">getTargets()</samp> on the router. It provides a convenient way for
placing views into the correct containers of your application. The main benefits of
targets are structuring and lazy loading: you just configure the views in the
routing configuration and you do not have to load the views until you really need
them.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">In the example code we get a reference to the
<samp class="ph codeph">sap.m.routing.Targets</samp> object by calling
<samp class="ph codeph">getTargets()</samp> on <samp class="ph codeph">this.getRouter()</samp> from the
base controller. However, you could also get a reference to the
<samp class="ph codeph">sap.m.routing.Targets</samp> object by calling
<samp class="ph codeph">this.getOwnerComponent().getRouter().getTargets()</samp> or
<samp class="ph codeph">this.getOwnerComponent().getTargets()</samp>.</p></aside>
<p class="p"> If you now call the app and press the <span class="ph uicontrol">Display Not Found</span>
button you see that the <samp class="ph codeph">notFound</samp> target is displayed without
changing the URL. That was easy, but suddenly our app&#x2019;s <span class="ph uicontrol">Back</span> button does not
work anymore. The bug we have just introduced illustrates an interesting navigation
trap. The application hash is still empty since we just display the target and did
not hit a route.</p>
<p class="p">When pressing the app&#x2019;s <span class="ph uicontrol">Back</span> button, the <samp class="ph codeph">onNavBack</samp> from the
previous step is called. It detects that there is no previous hash and therefore
tries to navigate to the <samp class="ph codeph">appHome</samp> route again. The router is smart
enough to detect that the current hash did not change and therefore skips the
navigation to the route. Fortunately, there is an easy workaround for us. However,
we need to touch the <samp class="ph codeph">Home</samp> controller again.</p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/Home.controller.js (Changed Again)"><h2 class="section_title" style="font-size: 1.15em;">webapp/controller/Home.controller.js (Changed Again)</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/nav/controller/BaseController&quot;
], function (BaseController) {
	&quot;use strict&quot;;
	return BaseController.extend(&quot;sap.ui.demo.nav.controller.Home&quot;, {
		onDisplayNotFound : function () {
			//display the &quot;notFound&quot; target without changing the hash
			this.getRouter().getTargets().display(&quot;notFound&quot;<span class="ph emphasis emphasis">, {
				fromTarget : &quot;home&quot;
			}</span>);
		}
	});
});
</pre>
<p class="p">This time we pass on a data object as the second parameter for the display method
which contains the name of the current target; the one from which we navigate to the
<samp class="ph codeph">notFound</samp> target. We decide to choose the key
<samp class="ph codeph">fromTarget</samp> but since it is a custom configuration object any
other key would be fine as well. </p>
</section></div>
<div class="section"><section class="section" type="webapp/controller/NotFound.controller.js"><h2 class="section_title" style="font-size: 1.15em;"> webapp/controller/NotFound.controller.js</h2>

<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
	&quot;sap/ui/demo/nav/controller/BaseController&quot;
], function (BaseController) {
	&quot;use strict&quot;;

	return BaseController.extend(&quot;sap.ui.demo.nav.controller.NotFound&quot;, {

		onInit: function () {
			<span class="ph emphasis emphasis">var oRouter, oTarget;

			oRouter = this.getRouter();
			oTarget = oRouter.getTarget(&quot;notFound&quot;);
			oTarget.attachDisplay(function (oEvent) {
				this._oData = oEvent.getParameter(&quot;data&quot;);	// store the data
			}, this);</span>
		}<span class="ph emphasis emphasis">,

		// override the parent&apos;s onNavBack (inherited from BaseController)
		onNavBack : function () {
			// in some cases we could display a certain target when the back button is pressed
			if (this._oData &amp;&amp; this._oData.fromTarget) {
				this.getRouter().getTargets().display(this._oData.fromTarget);
				delete this._oData.fromTarget;
				return;
			}

			// call the parent&apos;s onNavBack
			BaseController.prototype.onNavBack.apply(this, arguments);
		}</span>
	});
});</pre>
<p class="p">Next, we have to register an event listener to the <samp class="ph codeph">display</samp> event of
the <samp class="ph codeph">notFound</samp> target. The best place for us to register an event
listener for this is inside the <samp class="ph codeph">init</samp> function of our
<samp class="ph codeph">NotFound</samp> controller. There we can access and store the custom
data that we are passing on when displaying the target manually.</p>
<p class="p">From the router reference we can fetch a reference to the <samp class="ph codeph">notFound</samp>
target. Each target configuration will create a runtime object that can be accessed
through the router. </p>
<p class="p">Similar to <span class="ph"><span class="ph pname">OpenUI5</span></span> controls, targets define API methods and events that can be attached. We
attach a display event handler and save the data that was received as the event parameter <samp class="ph codeph">data</samp> in an internal controller
variable <samp class="ph codeph">_oData</samp>. This data also includes the <samp class="ph codeph">fromTarget</samp> information in case the caller passed it on. However,
we now have to override the base controller&#x2019;s <samp class="ph codeph">onNavBack</samp> implementation to change the behavior a bit. We add a special case for
our target back functionality in case the <samp class="ph codeph">fromTarget</samp> property has been passed on. If specified, we simply display the target
defined as <samp class="ph codeph">fromTarget</samp> manually the same way we actually called the <samp class="ph codeph">notFound</samp> target manually. Otherwise we just
call the base controller&#x2019;s <samp class="ph codeph">onNavBack</samp> implementation.</p>
</section></div>
<div class="section"><section class="section" type="webapp/i18n/i18n.properties"><h2 class="section_title" style="font-size: 1.15em;">webapp/i18n/i18n.properties</h2>

<pre class="pre codeblock prettyprint lang-prefs">...
DisplayNotFound=Display Not Found</pre>
<p class="p">Add the new property to the <samp class="ph codeph">i18n.properties</samp> file.</p>
<p class="p">When we now click the <span class="ph uicontrol">Back</span> button, it works as expected and brings us back to
the overview page, also when the <span class="ph uicontrol">Not Found</span> view is displayed manually. </p>
</section></div>
<div class="section"><section class="section" type="Conventions"><h2 class="section_title" style="font-size: 1.15em;"> Conventions</h2>

<ul class="ul" id="loiod9efab307ecc42b180b12cc8956e22d7__ul_nh5_ybb_nr">
<li class="li">
<p class="p">Display targets manually if you want to trigger a navigation without changing
the hash</p>
</li>
<li class="li">
<p class="p">Think carefully about all navigation patterns in your application, otherwise the user might get stuck</p>
</li>
</ul>
</section></div>
</div><div class="related-links"> <div class="familylinks"><div class="parentlink"><br><strong>Parent topic: </strong><a class="link" href="../../#/topic/1b6dcd39a6a74f528b27ddb22f15af0d.html" title="OpenUI5 comes with a powerful routing API that helps you control the state of your application efficiently. This tutorial will illustrate all major features and APIs related to navigation and routing in OpenUI5 apps by creating a simple and easy to understand mobile app. It represents a set of best practices for applying the navigation and routing features of OpenUI5 to your applications." target="_top">Navigation and Routing</a><br></div><div class="previouslink"><br><strong>Previous: </strong><a class="link" href="../../#/topic/66670b0aab3948469d5cc8276113e9ea.html" title="When we are on the Not Found page because of an invalid hash, we want to get back to our app to select another page. Therefore, we will add a Back button to the Not Found view and make sure that the user gets redirected to either the previous page or the overview page when the Back button is pressed." target="_top">Step 4: Add a Back Button to Not Found Page</a><br></div><div class="nextlink"><br><strong>Next: </strong><a class="link" href="../../#/topic/782aac08f2de4003a2fcbdd39d27f374.html" title="In this step, we&apos;ll create a second button on the home page, with which we can navigate to a simple list of employees. This example illustrates how to navigate to a route that has a hard-coded pattern." target="_top">Step 6: Navigate to Routes with Hard-Coded Patterns</a><br></div></div><div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/api/sap.m.routing.Targets" target="_top" alt="#/api/sap.m.routing.Targets" title="#/api/sap.m.routing.Targets">API Reference: <samp class="ph codeph">sap.m.routing.Targets</samp></a></div><div><a class="link" href="../../#/api/sap.ui.core.routing.Targets" target="_top" alt="#/api/sap.ui.core.routing.Targets" title="#/api/sap.ui.core.routing.Targets">API Reference: <samp class="ph codeph">sap.ui.core.routing.Targets</samp></a></div><div><a class="link" href="../../#/api/sap.ui.core.routing.Target" target="_top" alt="#/api/sap.ui.core.routing.Target" title="#/api/sap.ui.core.routing.Target">API Reference: <samp class="ph codeph">sap.ui.core.routing.Target</samp></a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>