<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregation Forwarding</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="A mechanism used for aggregations of composite controls."><meta name="description" content="A mechanism used for aggregations of composite controls."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"694b3568fcc94f089ac7515d6fadbd5d.html","previousTopicHref":"2abc8ffc18b34c6b991165fc017b87a9.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio64a5e1775bf04d4883db18c9de7d83bd"><h1 class="title topictitle1" hidden>Aggregation Forwarding</h1><div class="body conbody"><p class="shortdesc" hidden>A mechanism used for aggregations of composite controls.</p>
<div class="section" id="loio64a5e1775bf04d4883db18c9de7d83bd__section_kyq_3m5_scb"><section class="section" type="Overview"><h2 class="section_title" style="font-size: 1.15em;">Overview</h2>

<p class="p">Aggregration forwarding is used when application developers
want
to add child controls
to
an aggregation of a composite control, but the composite control does not keep these
controls as direct children. Instead, it moves or forwards them to an aggregation of
one of its internal controls. </p>
<p class="p">This technique is often used when a control with an aggregation is wrapped by a composite
control to add functionality, but the application
still
has control over the content of the
wrapped
control.
In
other cases, the composite control uses layout controls
internally
to define the placement of aggregated children.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">While aggregation forwarding as described here is mainly aimed at composite
controls, it has also been implemented for the <samp class="ph codeph">ManagedObject</samp>
base class. The forwarding can also be used for other entities which are not
controls, but inherit directly from <samp class="ph codeph">ManagedObject</samp> or one of its
subclasses.</p><p><span class="ph">For more
information about this class, see the <a class="xref" href="../../#/api/sap.ui.base.ManagedObject/methods/sap.ui.base.ManagedObject.extend" target="_top" alt="#/api/sap.ui.base.ManagedObject/methods/sap.ui.base.ManagedObject.extend" title="#/api/sap.ui.base.ManagedObject/methods/sap.ui.base.ManagedObject.extend">API Reference:
<samp class="ph codeph">ManagedObject</samp></a>.</span>
</p></aside>
<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p>Sometimes the controls that have been added to an aggregation of a composite control have
to be transformed into different controls, which are then added to an aggregation of
an internal control. This is a different use case and not covered by aggregation
forwarding. With aggregation forwarding, aggregated child controls are moved
<span class="ph emphasis emphasis">without</span> transforming them.</p></aside>
</section></div>
<div class="section" id="loio64a5e1775bf04d4883db18c9de7d83bd__section_vlk_km5_scb"><section class="section" type="Configuration"><h2 class="section_title" style="font-size: 1.15em;">Configuration</h2>

<p class="p">Aggregation forwarding requires a simple additional setting in the definition of a
control aggregation. <span class="ph"><span class="ph pname">OpenUI5</span></span> needs to know to
which internal control all aggregated children need to be forwarded and to which
aggregation of this internal control.</p>
<p class="p">Aggregation forwarding is defined in the aggregation definition inside the control
metadata.</p>
<p class="p">The <samp class="ph codeph">forwarding</samp> property can be set as an object defining the following:</p>
<ul class="ul" id="loio64a5e1775bf04d4883db18c9de7d83bd__ul_o5w_v3r_rcb">
<li class="li">
<p class="p"><samp class="ph codeph">getter</samp> or <samp class="ph codeph">idSuffix</samp>: A way how <span class="ph"><span class="ph pname">OpenUI5</span></span>
determines the internal control instance to which the aggregation is
forwarded at runtime, which is what you could call the target control. This
can either be done by specifying the <samp class="ph codeph">getter</samp>, the name of a
function of the composite control which always returns the target control
instance, or the <samp class="ph codeph">idSuffix</samp>, a string which is appended to
the ID of the composite control to construct the ID of the target
control.</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">aggregation</samp>: The name of the aggregation of the target
control to which this aggregation is forwarded</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">forwardBinding</samp>
(optional): Determines whether any binding is done
at
the target control or only at the outer composite
control.
This can be crucial if the forwarding target control has functionality that
requires the aggregation to be bound. </p>
</li>
</ul>
<p class="p">When such a forwarding definition is done, <span class="ph"><span class="ph pname">OpenUI5</span></span> moves all
aggregated child controls to the target control. All calls to
<samp class="ph codeph">addAggregation</samp>, <samp class="ph codeph">removeAggregation</samp>,
<samp class="ph codeph">indexOfAggregation</samp> and so on are forwarded. When asked for the
forwarded child control, both the composite control and the forwarding target act
like the child control belongs to their aggregation. However, the inner forwarding
target control is the actual parent of all forwarded children.</p>
</section></div>
<div class="section" id="loio64a5e1775bf04d4883db18c9de7d83bd__section_pmd_qm5_scb"><section class="section" type="Examples"><h2 class="section_title" style="font-size: 1.15em;">Examples</h2>

<p class="p">Here is an example that demonstrates aggregation forwarding: The new
<samp class="ph codeph">FilterableList</samp> control is supposed to display a list of items
with an input field above the list. The list items are filtered while the
user
is entering the input. This <samp class="ph codeph">FilterableList</samp>
control can be implemented as a composite control, using the
<samp class="ph codeph">sap.m.List</samp> and <samp class="ph codeph">sap.m.Input</samp> controls as inner
controls to take advantage of their existing implementation, design, and set of
features. Application developers using <samp class="ph codeph">FilterableList</samp>
cannot
change all
attributesof
the inner <samp class="ph codeph">List</samp> control. However, they should be able to provide the
actual list items. Hence, the new <samp class="ph codeph">FilterableList</samp> composite control
has an <samp class="ph codeph">items</samp> aggregation and forwards all items to the inner
<samp class="ph codeph">sap.m.List</samp> control, so, for example, the layouting, events, and
selection can be handled
there.</p>
<pre class="pre codeblock prettyprint lang-js">
aggregations: {
	 // The items forwarded from the FilterableList to the internal sap.m.List
	 items : {type: &quot;sap.m.ListItemBase&quot;, multiple: true, forwarding: {
		   idSuffix: &quot;-myInternalList&quot;,
		   aggregation: &quot;items&quot;
	 }},
</pre>
<p class="p">Another example would be a new <samp class="ph codeph">ButtonList</samp> control that is supposed
to contain and display an arbitrary number of <samp class="ph codeph">sap.m.Button</samp> controls
in a grid. Hence it has a <samp class="ph codeph">buttons</samp> aggregation. For this control,
control-specific HTML could be written that provides screen-size-dependent CSS for a
proper grid layout of the buttons. However, this effort can be avoided, and a
<samp class="ph codeph">sap.ui.layout.Grid</samp> control used internally instead to do the
layouting. The buttons given to the <samp class="ph codeph">ButtonList</samp> control then need to
be forwarded to the <samp class="ph codeph">content</samp> aggregation of the
<samp class="ph codeph">Grid</samp> control.</p>
<pre class="pre codeblock prettyprint lang-js">
aggregations: {
	 // The items forwarded from the ButtonList to the internal sap.ui.layout.Grid
	 buttons: {type: &quot;sap.m.Button&quot;, multiple: true, forwarding: {
		   getter: &quot;_getInternalGrid&quot;,
		   aggregation: &quot;content&quot;
	 }},</pre>
</section></div>
<div class="section" id="loio64a5e1775bf04d4883db18c9de7d83bd__section_fbk_l3q_ddb"><section class="section" type="Aggregation Forwarding in XML Composite Controls"><h2 class="section_title" style="font-size: 1.15em;">Aggregation Forwarding in XML Composite Controls</h2>

<p class="p">If you use aggregation forwarding with <samp class="ph codeph">idSuffix</samp> for an XML composite
control, you define this as follows:</p>
<pre class="pre codeblock prettyprint lang-js">sap.ui.define([
    &quot;sap/ui/core/XMLComposite&quot;], 
    function( XMLComposite ) {
    &quot;use strict&quot;;
    var TextList = XMLComposite.extend(&quot;fragments.TextList&quot;, {
        metadata: {
            aggregations: {
                texts: { 
                    type: &quot;sap.ui.core.Item&quot;,
                    multiple: true, forwarding: {
                           idSuffix: &quot;<span class="ph emphasis emphasis">--</span>myInternalVBox&quot;,
                           aggregation: &quot;items&quot;
                     }
                }
            }
        }
    })
    return TextList;
}, /* bExport= */true);</pre>
<p class="p">In this case, the fragment definition XML file looks like this:</p>
<pre class="pre codeblock prettyprint lang-xml">&lt;core:FragmentDefinition xmlns:m=&quot;sap.m&quot; xmlns:core=&quot;sap.ui.core&quot;&gt;
    &lt;m:VBox id=&quot;myInternalVBox&quot;/&gt;
&lt;/core:FragmentDefinition&gt;</pre>
<aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p><samp class="ph codeph">myInternalVBox</samp> is prefixed with <samp class="ph codeph">--</samp>. Other than
that, the coding looks exactly the same as the one for aggregation forwarding for
standard composite controls.</p></aside>
</section></div>
<div class="section" id="loio64a5e1775bf04d4883db18c9de7d83bd__section_b14_ym5_scb"><section class="section" type="Dos and Don&apos;ts"><h2 class="section_title" style="font-size: 1.15em;">Dos and Don&apos;ts</h2>

<p class="p">If you use aggregation forwarding, you have to keep the following in mind:</p>
<ul class="ul" id="loio64a5e1775bf04d4883db18c9de7d83bd__ul_urn_1fg_scb">
<li class="li">
<p class="p">Do not call any methods (such as <samp class="ph codeph">add</samp>,
<samp class="ph codeph">insert</samp>, <samp class="ph codeph">remove</samp> , or
<samp class="ph codeph">destroy</samp>) that modify the aggregation in the forwarding
target, but call them in the control that defines the forwarding. </p>
<p class="p">For example, if you create something like a <samp class="ph codeph">CustomList</samp>
control that uses forwarding for its <samp class="ph codeph">items</samp> aggregation to
an internal <samp class="ph codeph">List</samp> control, do not call
<samp class="ph codeph">this._internalList.destroyItems()</samp>, but call
<samp class="ph codeph">this.destroyItems()</samp>.</p>
</li>
<li class="li">
<p class="p">Aggregations can only be forwarded to non-hidden aggregations of the same or a greater
multiplicity (single-to-single, single-to-multi, multi-to-multi).</p>
</li>
<li class="li">
<p class="p">The target aggregation and the source aggregation have to be compatible: Any child elements
given
to the source aggregation must be valid in the target
aggregation as well (otherwise the target element will throw a validation
error).</p>
</li>
<li class="li">
<p class="p">The aggregation target control for a particular instance of a composite control must stay
the same across the entire
lifecycle
of the composite control.</p>
</li>
<li class="li">
<p class="p">If the content in the target aggregation is modified by other
entities
or actions, such as the target control itself or another
forwarding from a different source aggregation, this
will
lead to an unexpected behavior of the aggregation forwarding. Hence, these
modifications are not allowed.</p>
</li>
<li class="li">
<p class="p">Forwarded child controls always have the same models that were also available at their
original location <span class="ph emphasis emphasis">before</span> the forwarding. They will not
use any
models
that are only set for the inner control to which they are forwarded. This
way, models set by an application will not be overridden.</p>
<p class="p">Also, this is in accordance with what application developers would expect
regarding the models set for the child control: Any bindings they define
should work regardless of how aggregation forwarding is used within the
controls.</p>
</li>
<li class="li">
<p class="p">Never clone children in public aggregations even if the aggregation is
forwarded to an inner control. They are cloned automatically by the
framework.</p>
<p class="p">Also, do not clone inner controls created by your composite control, for
example, inside the <samp class="ph codeph">init()</samp> method: If your control is
cloned, the <samp class="ph codeph">init()</samp> method of the clone is called, and the
inner control is created
as
well.</p>
</li>
</ul>
</section></div>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>