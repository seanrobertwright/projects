<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Mock Server: Frequently Asked Questions</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content><meta name="description" content><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"a428d4128f22435693a65223fe6d8ff2.html","previousTopicHref":"3459c372aaaa4c31ab87bb0e174adcc3.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page topic  - topic-topic " id="loioc9a91ddaef47461c9c44bfc2198ea3f0"><h1 class="title topictitle1" hidden>Mock Server: Frequently Asked Questions</h1><div class="body"><p class="shortdesc" hidden></p>
<div class="section"><section class="section" type="Is the mock server a real server?"><h2 class="section_title" style="font-size: 1.15em;">Is the mock server a real server?</h2>

<p class="p">No. The mock server runs on the client and only uses the server terminology of &apos;start&apos; and
&apos;stop&apos;. It does <span class="ph emphasis emphasis">not</span> require a network connection since there is
no actual server involved.</p>
</section></div>
<div class="section"><section class="section" type="What module is needed?"><h2 class="section_title" style="font-size: 1.15em;">What module is needed?</h2>

<div class="p">The mock server is contained in module <samp class="ph codeph">sap/ui/core/util/MockServer</samp>. The
module can either be added to the list of dependencies in a
<samp class="ph codeph">sap.ui.define</samp> call or it can be required with a call to
<samp class="ph codeph">sap.ui.require</samp>:<pre class="pre codeblock prettyprint lang-js">sap.ui.define([&#x2026;, &apos;sap/ui/core/util/MockServer&apos;, ...], function(&#x2026;, MockServer, &#x2026;) { 
    var oMyMockServer = new MockServer(...);
});

sap.ui.require([&apos;sap/ui/core/util/MockServer&apos;], function(MockServer) {
    var oMyMockServer = new MockServer(&#x2026;);
});</pre></div>
</section></div>
<div class="section"><section class="section" type="Can we use one mock server instance to mock multiple OData services?"><h2 class="section_title" style="font-size: 1.15em;">Can we use one mock server instance to mock multiple OData services?</h2>

<p class="p">No. Each OData service needs its own mock server. Create one <samp class="ph codeph">MockServer</samp>
instance per service.</p>
</section></div>
<div class="section"><section class="section" type="How to obtain metadata xml?"><h2 class="section_title" style="font-size: 1.15em;">How to obtain metadata xml?</h2>

<p class="p">Call the metadata of the service in a browser and save it into a file.</p>
</section></div>
<div class="section"><section class="section" type="How to obtain mock data? What options do I have for mock data?"><h2 class="section_title" style="font-size: 1.15em;">How to obtain mock data? What options do I have for mock data?</h2>

<div class="p">You can let the mock server generate random mock data automatically based on services metadata. For this, provide only the path to the metadata
file and omit the second parameter of the simulate function as follows:
<pre class="pre codeblock prettyprint lang-js">// url to the service metadata document 
        var sMetadataUrl = &quot;testdata/rmtsampleflight/metadata.xml&quot;; 
        oMockServer.simulate(sMetadataUrl);</pre></div>
<div class="p">You can provide your own mock data in .json files, which can either be created manually or saved from an OData service response. Mock data in
JSON format can be generated from an OData service by adding the <samp class="ph codeph">$format=json</samp> parameter to the URL. Save the browser
response which is called <samp class="ph codeph">&lt;entity set name&gt;.json</samp>, for example <samp class="ph codeph">FlightCollection.json</samp> and put it
into the model folder. Add the path to the simulate function:
<pre class="pre codeblock prettyprint lang-js">// url to the service metadata document 
        var sMetadataUrl = &quot;testdata/rmtsampleflight/metadata.xml&quot;;
        // base url which contains the mockdata
        var sMockdataBaseUrl = &quot;testdata/rmtsampleflight/&quot;;
        oMockServer.simulate(sMetadataUrl, sMockdataBaseUrl);</pre></div>
<div class="p">You can specify a path to .json mock data and let the mock server generate data for the rest of the service entities:
<pre class="pre codeblock prettyprint lang-js">var sMetadataUrl = &quot;testdata/rmtsampleflight/metadata.xml&quot;// url to the service metadata document
        var sMockdataBaseUrl = &quot;testdata/rmtsampleflight/&quot;// base url which contains the mockdata
            oMockServer.simulate(sMetadataUrl, {
                &apos;sMockdataBaseUrl&apos; : sMockdataBaseUrl,
                &apos;bGenerateMissingMockData&apos; : true
            });</pre></div>
<div class="p">You can specify the names of the entity sets that are needed, and the mock server will load data only for the specified service
entities:<pre class="pre codeblock prettyprint lang-js">var sMetadataUrl = &quot;testdata/rmtsampleflight/metadata.xml&quot;// url to the service metadata document
        var sMockdataBaseUrl = &quot;testdata/rmtsampleflight/&quot;// base url which contains the mockdata
            oMockServer.simulate(sMetadataUrl, {
                &apos;sMockdataBaseUrl&apos; : sMockdataBaseUrl,
                &apos;bGenerateMissingMockData&apos; : true,
                &apos;aEntitySetsNames&apos; : [&quot;EntitySetName1&quot;, &quot; EntitySetName2&quot;]
            });</pre></div>
</section></div>
<div class="section"><section class="section" type="I&apos;m using the OData model and I get the following error in the console: The following problem occurred: no handler for data"><h2 class="section_title" style="font-size: 1.15em;">I&apos;m using the OData model and I get the following error in the console: <span class="ph uicontrol">The
following problem occurred: no handler for data</span></h2>

<div class="p">The OData model uses JSON to fetch the data:
<pre class="pre codeblock prettyprint lang-js">var oModel = new sap.ui.model.odata.ODataModel(sUri, true);</pre></div>
</section></div>
<div class="section"><section class="section" type="What do I put in the rootUri?"><h2 class="section_title" style="font-size: 1.15em;">What do I put in the <samp class="ph codeph">rootUri</samp>?</h2>

<p class="p">Verify that you use the exact same URI prefix in the request as in the
<samp class="ph codeph">rootUri</samp> you define for the mock server. If a root URI is set,
all request path URIs are prefixed with this root URI. The root URI has to be
relative and requires a trailing &apos;/&apos;. It also needs to match the URI set in
OData/JSON models or simple XHR calls in order for the mock server to intercept
them.</p>
<div class="p">The code snippet shows an example:
<pre class="pre codeblock prettyprint lang-js">sap.ui.define([&#x2026;, 
    &apos;sap/ui/core/util/MockServer&apos;,
    &apos;sap/ui/model/odata/v2/ODataModel&apos;,
     ...
], function(&#x2026;, MockServer, ODataModel, &#x2026;) {

    var sUri = &quot;/mock/&quot;;
    var oMockServer = new MockServer({
        rootUri : sUri
    });
    var oModel = new ODataModel(sUri, true);
    ...

});</pre></div>
</section></div>
<div class="section"><section class="section" type="Can the mock server be used for more than for OData service simulation?"><h2 class="section_title" style="font-size: 1.15em;">Can the mock server be used for more than for OData service simulation?</h2>

<p class="p">Yes. The mock server can be used to help you fake server response on any given API and stub
all AJAX access to resources such as OData service, metadata, annotation files
(XML), other JSON or *.properties files.</p>
</section></div>
<div class="section"><section class="section" type="Is OData navigation supported?"><h2 class="section_title" style="font-size: 1.15em;">Is OData navigation supported?</h2>

<p class="p">The mock server supports navigation via association also if no referential constraint is
defined. However, the result of the navigation is the entire collection of the
navigation, or the first entry of the collection according to the association
multiplicity. So, if you want the navigation to return &quot;correct&quot; results according
to keys, define a respective referential constraint.</p>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p class="p">Due to a limitation of the mock server, you <span class="ph emphasis emphasis">cannot</span> use the same
association to describe a two-way navigation. If the navigation shall work for
both directions, you need to define an appropriate association for each
direction. </p></aside>
</section></div>
<div class="section"><section class="section" type="How can I use the mock server in a QUnit?"><h2 class="section_title" style="font-size: 1.15em;">How can I use the mock server in a QUnit?</h2>

<div class="p">You can set up the mock server in the setup function. For example:
<pre class="pre codeblock prettyprint lang-js">sap.ui.require([&apos;sap/ui/core/util/MockServer&apos;], function(MockServer) {
	...
        QUnit.module(&quot;OData data provider&quot;, {
            beforeEach : function() {
                this._oMockServer = new MockServer({ rootUri: &quot;/model/&quot;});
                this._oMockServer.simulate(&quot;../../../../qunit/service/metadata.xml&quot;);
                this._oMockServer.start();
            },
            afterEach : function() {
                this._oMockServer.stop();
            }
        });

	...
});</pre></div>
</section></div>
<div class="section"><section class="section" type="How can I provide exit functions as pre/post functions of requests?"><h2 class="section_title" style="font-size: 1.15em;">How can I provide exit functions as pre/post functions of requests?</h2>

<p class="p">Mock Server has APIs to provide more flexibility and control over its current request
processing. During request processing, the callbacks are called before or after
native handling of the Mock Server using the SAPUI5 eventing mechanism. You can add
a callback in all requests of a specific HTTP method, for example in all
<samp class="ph codeph">get</samp> requests, but additionally also on a specific entity set
name, for example, <samp class="ph codeph">POST</samp> to <samp class="ph codeph">SaleOrders</samp>).</p>
<pre class="pre codeblock prettyprint lang-js">// add a callback in all requests of a specific http method
oMockServer.attachAfter(sap.ui.core.util.MockServer.HTTPMETHOD.GET, fnCbPost);</pre>
<pre class="pre codeblock prettyprint lang-js">// on a specific entityset name
oMockServer.attachAfter(sap.ui.core.util.MockServer.HTTPMETHOD.GET, fnCbPost, &quot;CarrierCollection&quot;);
</pre>
<pre class="pre codeblock prettyprint lang-js">// remove the callback
oMockServer.detachAfter(sap.ui.core.util.MockServer.HTTPMETHOD.GET, fnCbPost);</pre>
<div class="p">If you add additional request handlers and want to use this hooks mechanism inside your response function, just call:
<pre class="pre codeblock prettyprint lang-js">this.fireEvent(sap.ui.core.util.MockServer.HTTPMETHOD.GET + &apos;sEntityset&apos; + &apos;:before&apos; , {oXhr: oXhr, sUrlParameters: sUrlParameters});</pre></div>
</section></div>
<div class="section"><section class="section" type="What do I need to do to run an OPA test with mock server"><h2 class="section_title" style="font-size: 1.15em;">What do I need to do to run an OPA test with mock server</h2>

<p class="p">Start your app in mock mode. It is not possible to declare a mock server outside the app
context.</p>
</section></div>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>