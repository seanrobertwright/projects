<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Request Fails Due to Same-Origin Policy (Cross-Origin Resource Sharing - CORS)</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"c34413d7554a4ae7b2aba6bcca92aac8.html","previousTopicHref":"492d9d93effd4229a5a89cb20124553c.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }
$('.collapsible').collapsify({"expandText":"Display Content","collapseText":"Hide Content","codeblockText":"Code Sample","codeblockCopyText":"Copy code to clipboard","codeblockSelectText":"Select code for copying to clipboard"});


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio5bb388fc289d44dca886c8fa25da466e"><h1 class="title topictitle1" hidden>Request Fails Due to Same-Origin Policy (Cross-Origin Resource Sharing - CORS)</h1><div class="body conbody">
<p class="p">If you use a remote URL in your code, for example a remote OData service, such as the publicly available Northwind OData service, the browser may
refuse to connect to a remote URL. Due to the same-origin policy, browsers deny AJAX requests to service endpoints in case the service
endpoint has a different domain/subdomain, protocol, or port than the app.</p>
<div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_a3s_mvw_p1b"><section class="section" type="Preview"><h2 class="section_title" style="font-size: 1.15em;">Preview</h2>

<div class="fig fignone" id="loio5bb388fc289d44dca886c8fa25da466e__fig_jyf_f1k_c5"><div class="figbody">

<img class="inline" id="loio5bb388fc289d44dca886c8fa25da466e__image_lmw_d1k_c5" src="loio2c36d72282e34903a97197783fe92122_HiRes.png">
</div><span class="figcap">Violations of the same-origin policy in Google Chrome</span></div>
</section></div>
<div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_q5w_mvw_p1b"><section class="section" type="Root Cause"><h2 class="section_title" style="font-size: 1.15em;">Root Cause</h2>

<p class="p">Normally, the remote system would be configured to send the cross-origin resource sharing (CORS) headers to make the browser also allow direct access to remote URLs. However, if you, for example, use a Northwind OData service, you cannot modify the publicly available service. Then when you try to execute XHR requests (<samp class="ph codeph">XMLHttpRequest</samp>) the browser prevents the call due to the same-origin policy.</p>
</section></div>
<div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_v4n_mvw_p1b"><section class="section" type="Resolution"><h2 class="section_title" style="font-size: 1.15em;">Resolution</h2><div class="p">To solve the issue, you have the following options:<ul class="ul" id="loio5bb388fc289d44dca886c8fa25da466e__ul_hgq_4dk_c5">
<li class="li">
<p class="p">SAP Web IDE: Configure a destination as described below (recommended)</p>
</li>
<li class="li">
<p class="p">Local Development: Configure a local proxy (CORS anywhere)</p>
</li>
<li class="li">
<p class="p">Workaround: Disable the same-origin policy in the browser for local testing (not recommended, only for testing)</p>
</li>
<li class="li">
<p class="p">Set the CORS-relevant response headers on the remote system (if possible)</p>
</li>
</ul></div></section></div>
<div class="section collapsible" id="loio5bb388fc289d44dca886c8fa25da466e__UsingHelperService"><section class="section collapsible" type="SAP Web IDE: Configure a destination"><h2 class="section_title" style="font-size: 1.15em;">SAP Web IDE: Configure a destination</h2><p class="p"><span class="ph pname">SAP Web IDE</span> and the <span class="ph pname">SAP Cloud Platform</span> offer destinations that allow you to easily connect to remote
systems. The destination to the Northwind OData service is an internet proxy made available inside the app at
<span class="ph filepath">&lt;protocol&gt;://&lt;domain&gt;/destinations/northwind/*</span>. Any request that is sent to this location is
forwarded to <span class="ph filepath">https://services.odata.org</span> automatically. </p><div class="sectiondiv subsection">
<p class="p subsectiontitle">Create Destination in SAP Cloud Platform Cockpit</p>
<div class="table-wrapper tablenoborder"><table summary id="loio5bb388fc289d44dca886c8fa25da466e__table_dfw_f2k_c5" class="table" frame="border" border="1" rules="all"><colgroup><col width="50%"><col width="50%"></colgroup><thead class="thead" style="text-align:left;">
<tr class="row">
<th class="entry" style="vertical-align:top;" id="d259377e106">
<p class="p">Requested URL</p>
</th>
<th class="entry" style="vertical-align:top;" id="d259377e112">
<p class="p">Forwarded To</p>
</th>
</tr>
</thead><tbody class="tbody">
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d259377e106 ">
<p class="p"><span class="ph filepath"> /destinations/northwind/V2/Northwind/Northwind.svc/$metadata</span></p>
</td>
<td class="entry" style="vertical-align:top;" headers="d259377e112 ">
<p class="p"><span class="ph filepath"> https://services.odata.org/V2/Northwind/Northwind.svc/$metadata</span></p>
</td>
</tr>
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d259377e106 ">
<p class="p"><span class="ph filepath"> /destinations/northwind/V2/Northwind/Northwind.svc/Invoices</span></p>
</td>
<td class="entry" style="vertical-align:top;" headers="d259377e112 ">
<p class="p"><span class="ph filepath"> https://services.odata.org/V2/Northwind/Northwind.svc/Invoices</span></p>
</td>
</tr>
</tbody></table></div>
<p class="p">The destination itself is configured inside the <span class="ph pname">SAP Cloud Platform</span> Cockpit.
For more information, see <a class="xref" href="../../#/topic/3a16c7a2f1e944deb000db49e5ece6be.html" title="Configure a destination in the SAP Cloud Platform Cockpit in order to bypass the same-origin policy of the browser." target="_top">Create a Northwind Destination</a>. </p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">neo-app.json</p>
<p class="p">For <span class="ph pname">SAP Web IDE</span>, a <span class="ph filepath">neo-app.json</span> file is needed to make
sure that the destination and resource mapping are available in the app. It has to be located in the root folder
(<span class="ph filepath">webapp</span>), on the same level as the <span class="ph filepath">user.project.json</span> file that is automatically
created. </p>
<p class="p">If it does not exist yet, create a <span class="ph filepath">neo-app.json</span> file and reference the Northwind destination there. Just copy
the content of the code into that file and try to run the app again.</p>
<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">{
  &quot;routes&quot;: [
    {
      &quot;path&quot;: &quot;/destinations/northwind&quot;,
      &quot;target&quot;: {
        &quot;type&quot;: &quot;destination&quot;,
        &quot;name&quot;: &quot;northwind&quot;
      },
      &quot;description&quot;: &quot;Northwind OData Service&quot;
    }
  ]
}</span></pre>
<aside class="note" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Note</strong></div>
<p>If the file already exists, for example, because you already created it to map the <span class="ph"><span class="ph pname">OpenUI5</span></span> resources, just append the destination to the existing
<samp class="ph codeph">route</samp> definitions.</p></aside>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">manifest.json</p>
<p class="p">In the <span class="ph filepath">manifest.json</span> descriptor file of your app, you can now change the data source to use the remote
destination, for example:</p>
<pre class="pre codeblock prettyprint lang-js">{
  &quot;_version&quot;: &quot;1.12.0&quot;,
  &quot;sap.app&quot;: {
	...
	&quot;dataSources&quot;: {
	  &quot;invoiceRemote&quot;: {

		&quot;uri&quot;: &quot;<span class="ph emphasis emphasis">/destinations/northwind/</span>V2/Northwind/Northwind.svc/&quot;,
		&quot;type&quot;: &quot;OData&quot;,
		&quot;settings&quot;: {
		  &quot;odataVersion&quot;: &quot;2.0&quot;
		}
	  }
	}
  },
  &quot;sap.ui&quot;: {
	...
  },
  &quot;sap.ui5&quot;: {
	...
  }
}</pre>
<p class="p">After this change, you can run the app in <span class="ph pname">SAP Web IDE</span> without disabling the
same-origin policy of your browser. The destination now manages the connection to the remote service.</p>
</div></section></div>
<div class="section collapsible" id="loio5bb388fc289d44dca886c8fa25da466e__CORSAnywhere"><section class="section collapsible" type="Local Development: Configure a local proxy (CORS anywhere)"><h2 class="section_title" style="font-size: 1.15em;">Local Development: Configure a local proxy (CORS anywhere)</h2><p class="p">A proxy is simply a
service end point on the same domain of your app to overcome the restrictions. It receives requests from the app, forwards them to
another server, and finally returns the corresponding response from the remote service.</p><p class="p">Follow the below steps to configure such
a proxy in your poject.</p><p class="p">Prerequisites: NodeJS is installed on your machine.</p><div class="sectiondiv subsection">
<p class="p subsectiontitle">package.json</p>
<pre class="pre codeblock prettyprint lang-json">{
	&quot;name&quot;: &quot;Sample-Package&quot;,
	&quot;version&quot;: &quot;1.0.0&quot;,
	&quot;description&quot;: &quot;Sample package.json&quot;,
<span class="ph emphasis emphasis">	&quot;scripts&quot;: {
		&quot;proxy&quot;: &quot;node proxy.js&quot;
	},
	&quot;devDependencies&quot;: {
		&quot;cors-anywhere&quot;: &quot;^0.4.1&quot;
	},</span>
	&quot;dependencies&quot;: {
	}
}</pre>
<p class="p">Add the <samp class="ph codeph">devDependency</samp> called <samp class="ph codeph">&quot;cors-anywhere&quot;: &quot;^0.4.1&quot;</samp> to your existing <samp class="ph codeph">package.json</samp>. Run
<samp class="ph codeph">node install</samp> to install the npm module. Add the <samp class="ph codeph">proxy</samp> script to the <samp class="ph codeph">scripts</samp>
section in the <samp class="ph codeph">package.json</samp> so that you can run a script via <samp class="ph codeph">npm run &lt;script_name&gt;</samp>.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">proxy.js (new)</p>
<pre class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">var cors_proxy = require(&apos;cors-anywhere&apos;);

// Listen on a specific IP Address
var host = &apos;localhost&apos;;

// Listen on a specific port, adjust if necessary
var port = 8081;

cors_proxy.createServer({
	originWhitelist: [], // Allow all origins
	requireHeader: [&apos;origin&apos;, &apos;x-requested-with&apos;],
	removeHeaders: [&apos;cookie&apos;, &apos;cookie2&apos;]
}).listen(port, host, function() {
	console.log(&apos;Running CORS Anywhere on &apos; + host + &apos;:&apos; + port);
});</span></pre>
<p class="p">Create a new file <samp class="ph codeph">proxy.js</samp>, and copy the above script into your project directory. This is the pre-configured proxy server we
are going to use to prevent the occurrence of <span class="ph emphasis emphasis">same-origin policy error</span>. We can start it by running the
command <samp class="ph codeph">node proxy.js</samp> or <samp class="ph codeph">npm run proxy. It runs a local proxy on port </samp> in the console.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">manifest.json</p>
<pre class="pre codeblock prettyprint lang-json">{
	&quot;sap.app&quot;: {
		...
		&quot;dataSources&quot;: {
			&quot;northwind&quot;: {
				<span class="ph emphasis emphasis">&quot;uri&quot;: &quot;http://localhost:8081/https://services.odata.org/V2/Northwind/Northwind.svc/&quot;,
</span>
				&quot;type&quot;: &quot;OData&quot;,
				&quot;settings&quot;: {
					&quot;odataVersion&quot;: &quot;2.0&quot;
				}
			}
		}
	}
}</pre>
<div class="p">To use a service in the <samp class="ph codeph">local ui5 application</samp> we have to change the <samp class="ph codeph">uri</samp> in the <samp class="ph codeph">manifest</samp>
file.<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p>The <samp class="ph codeph">uri</samp> must start with <samp class="ph codeph">http://localhost:&lt;port&gt;</samp>.</p></aside></div>
<aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p>By default, you can&apos;t run the request in your browser with the <samp class="ph codeph">proxy.js</samp> script. It throws the following exception:
<samp class="ph codeph">exception Missing required request header. Must specify one of: origin,x-requested-with</samp>. If you want to test
the service in your browser, you can temporarily comment out the line <samp class="ph codeph">requireHeader: [&apos;origin&apos;,
&apos;x-requested-with&apos;]</samp> from your <samp class="ph codeph">proxy.js</samp>.</p></aside>
<p class="p">For more information on CORS Anywhere, see <a class="extlink" href="http://help.sap.com/disclaimer?site=https://www.npmjs.com/package/cors-anywhere" target="_blank" alt="https://www.npmjs.com/package/cors-anywhere" title="https://www.npmjs.com/package/cors-anywhere">https://www.npmjs.com/package/cors-anywhere<img src="themes/sap-default/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a></p>
</div></section></div>
<div class="section collapsible" id="loio5bb388fc289d44dca886c8fa25da466e__DisablingSameOriginPolicy"><section class="section collapsible" type="Workaround: Disable the same-origin policy in the browser (not recommended, only for testing)"><h2 class="section_title" style="font-size: 1.15em;">Workaround: Disable the same-origin policy in the browser (not recommended, only for testing)</h2>

<p class="p">. It runs a local proxyIn Google Chrome, you can easily disable the same-origin policy of Chrome by running Chrome with the following command:
<samp class="ph codeph">[your-path-to-chrome-installation-dir]\chrome.exe --disable-web-security --user-data-dir</samp>. Make sure that all
instances of Chrome are closed before you run the command. This allows all web sites to break out of the same-origin policy and
connect to the remote service directly. </p>
<aside class="note caution" aria-labelledby="note_3_title"><div class="title" id="note_3_title"><strong>Caution</strong></div>
<p><span class="ph emphasis emphasis">This approach is not recommended for productive apps. Running Chrome this way for surfing on the internet
poses a security risk.</span> However, it allows you to avoid the need of setting up a proxy at development time or for
testing purposes.</p></aside>
</section></div>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>